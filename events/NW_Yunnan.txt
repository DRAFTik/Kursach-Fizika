###########################
# Yunnan Events
###########################

add_namespace = yunnan

country_event = {
	id = yunnan.1
	title = yunnan.1.t
	desc = yunnan.1.d
	is_triggered_only = yes
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event yunnan.1"}
	
	option = { 
		name = yunnan.1.a
	}
}
country_event = {
	id = yunnan.2
	title = yunnan.2.t
	desc = yunnan.2.d
	is_triggered_only = yes
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event yunnan.2"}
	
	option = { 
		name = yunnan.2.a
		325 = {
			add_extra_state_shared_building_slots = 1
		}
	}
}
country_event = {
	id = yunnan.3
	title = yunnan.3.t
	desc = yunnan.3.d
	is_triggered_only = yes
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event yunnan.3"}
	
	option = { 
		name = yunnan.3.a
		FROM = {
		    country_event = { id = yunnan.4 days = 5 }
		}
	}
	option = { 
		name = yunnan.3.b
		FROM = {
		    country_event = { id = yunnan.5 days = 5 }
		}
	}
}
country_event = {
	id = yunnan.4
	title = yunnan.4.t
	desc = yunnan.4.d
	is_triggered_only = yes
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event yunnan.4"}
	
	option = { 
		name = yunnan.4.a
        set_country_flag = YUN_cpc_agree
	}
}
country_event = {
	id = yunnan.5
	title = yunnan.5.t
	desc = yunnan.5.d
	is_triggered_only = yes
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event yunnan.5"}
	
	option = { 
		name = yunnan.5.a
	}
}
country_event = {
	id = yunnan.6
	title = yunnan.6.t
	desc = yunnan.6.d
	is_triggered_only = yes
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event yunnan.6"}
	
	option = { 
		name = yunnan.6.a
		trigger = { original_tag = YUN  }
		if = {
		    limit = {
			    YUN_long_yun = {
			        is_country_leader = yes
			    }
			}
			YUN_long_yun = { 
			    add_country_leader_trait = betrayed
			}
		}
		if = {
		    limit = {
			    YUN_lu_han = {
			        is_country_leader = yes
			    }
			}
			YUN_lu_han = { 
			    add_country_leader_trait = betrayed
			}
		}	
		YUN = {
            set_nationality = {
                target_country = PRC
                character = YUN_lu_han 
            }
		    set_nationality = {
                target_country = PRC
                character = YUN_long_shengzeng
            }
		    set_nationality = {
                target_country = PRC
                character = YUN_long_shenwu 
            }
		    set_nationality = {
                target_country = PRC
                character = YUN_long_zehui
            }
			set_nationality = {
                target_country = PRC
                character = YUN_wan_baobang
            }
		    set_nationality = {
                target_country = PRC
                character = YUN_zhang_chong
            }
		    set_nationality = {
                target_country = PRC
                character = YUN_an_enpu 
            }
		    set_nationality = {
                target_country = PRC
                character = YUN_lu_daoyuan 
            }
		    set_nationality = {
                target_country = PRC
                character = YUN_lu_junquan 
            }
		    set_nationality = {
                target_country = PRC
                character = YUN_sun_du 
            }
			remove_advisor_role = {
                character = "YUN_zou_ruoheng"
                slot = political_advisor
            }
			remove_advisor_role = {
                character = "YUN_li_peiyan"
                slot = political_advisor
            }
			remove_advisor_role = {
                character = "YUN_miao_yuntai"
                slot = political_advisor
            }
			remove_advisor_role = {
                character = "YUN_gu_yingqiu"
                slot = political_advisor
            }
			remove_advisor_role = {
                character = "YUN_zhou_zhongyue"
                slot = political_advisor
            }
			remove_advisor_role = {
                character = "YUN_li_xuanting"
                slot = political_advisor
            }
			remove_advisor_role = {
                character = "YUN_li_yanbin"
                slot = political_advisor
            }
			remove_advisor_role = {
                character = "YUN_hu_ying"
                slot = political_advisor
            }
			remove_advisor_role = {
                character = "YUN_xiong_qinglai"
                slot = political_advisor
            }
        }
		PRC = {
		    annex_country = {
                target = YUN
                transfer_troops = yes
            }
			change_tag_from = YUN
        }
		if = {
		    limit = {
			    date > 1942.1.1
			    YUN_long_shengzeng = {
			        skill > 2
				}
			}
			PRC = {
			    country_event = { id = yunnan.7 }
			}
		}
	}
	option = { 
		name = yunnan.6.b
		trigger = { original_tag = PRC }	
	}
	option = { 
		name = yunnan.6.c
		trigger = { 
			NOT = {
			    original_tag = PRC
				original_tag = YUN
			}
		}
	}
}
country_event = {
	id = yunnan.7
	title = yunnan.7.t
	desc = yunnan.7.d
	is_triggered_only = yes
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event yunnan.7"}
	
	option = { 
		name = yunnan.7.a
		PRC = {
		    set_nationality = {
                target_country = YUN
                character = YUN_long_shengzeng
            }
		}
		YUN = {
		    set_state_owner = 325
		    set_province_controller = 1319
		    set_province_controller = 5072
			set_province_controller = 7606
			set_province_controller = 10819
			set_province_controller = 12841
		    declare_war_on = {
                target = PRC
                type = annex_everything
            }
			load_focus_tree = yunnan_uprise_focus
			load_oob = "YUN_uprise"
			
			promote_character = YUN_long_shengzeng
			remove_ideas = {
				YUN_new_yunnan
				YUN_opium
				YUN_agricultural_growth
				YUN_agricultural_growth_2
				YUN_democratic_kunming
				YUN_new_education
				YUN_invest_in_industry
				YUN_textile_export
				YUN_road_budget
			}
			
		    create_corps_commander = { # TODO: переделать под character
	            name = YUN_long_kuiyuan
	            picture = "Portrait_Long_Kuiyuan.dds"
	            traits = { harsh_leader trickster guerilla_fighter }
	            skill = 2
	            attack_skill = 2
	            defense_skill = 2
	            planning_skill = 3
	            logistics_skill = 2
            }
		    create_corps_commander = { # TODO: переделать под character
	            name = YUN_an_chunsan
	            picture = "Portrait_An_Chunsan.dds"
	            traits = { }
	            skill = 1
	            attack_skill = 2
	            defense_skill = 1
	            planning_skill = 2
	            logistics_skill = 1
            }
		    create_corps_commander = { # TODO: переделать под character
	            name = YUN_long_chengyao
	            picture = "Portrait_Long_Chengyao.dds"
	            traits = { }
	            skill = 1
	            attack_skill = 1
	            defense_skill = 1
	            planning_skill = 1
	            logistics_skill = 1
            }
		}
	}
	option = { 
		name = yunnan.7.b
		PRC = {
		    set_nationality = {
                target_country = YUN
                character = YUN_long_shengzeng
            }
		}
		YUN = {
		    set_state_owner = 325
		    set_province_controller = 1319
		    set_province_controller = 5072
			set_province_controller = 7606
			set_province_controller = 10819
			set_province_controller = 12841
		    declare_war_on = {
                target = PRC
                type = annex_everything
            }
			load_focus_tree = yunnan_uprise_focus
			load_oob = "YUN_uprise"
			
			promote_character = YUN_long_shengzeng 
			remove_ideas = {
				YUN_new_yunnan
				YUN_opium
				YUN_agricultural_growth
				YUN_agricultural_growth_2
				YUN_democratic_kunming
				YUN_new_education
				YUN_invest_in_industry
				YUN_textile_export
				YUN_road_budget
			}
			
		    create_corps_commander = { # TODO: переделать под character
	            name = "Лун Куйюань"
	            picture = "Portrait_Long_Kuiyuan.dds"
	            traits = { harsh_leader trickster guerilla_fighter }
	            skill = 2
	            attack_skill = 2
	            defense_skill = 2
	            planning_skill = 3
	            logistics_skill = 2
            }
		    create_corps_commander = { # TODO: переделать под character
	            name = "Ань Чуньсань"
	            picture = "Portrait_An_Chunsan.dds"
	            traits = { }
	            skill = 1
	            attack_skill = 2
	            defense_skill = 1
	            planning_skill = 2
	            logistics_skill = 1
            }
		    create_corps_commander = { # TODO: переделать под character
	            name = "Лун Чэнъяо"
	            picture = "Portrait_Long_Chengyao.dds"
	            traits = { }
	            skill = 1
	            attack_skill = 1
	            defense_skill = 1
	            planning_skill = 1
	            logistics_skill = 1
            }
			change_tag_from = PRC
		}
	}
}
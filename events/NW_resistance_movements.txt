add_namespace = resistance

# Основано сопротивление
country_event = {
	id = resistance.1
	title = resistance.1.t
	desc = resistance.1.d
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.1" }
	
	option = {
		name = resistance.1.a
		clr_country_flag = reb_received_notification
	}
}

# Удар Сопротивления! - неудача
country_event = {
	id = resistance.2
	title = { text = resistance.2.t.infrastructure trigger = { FROM = { has_country_flag = strike_to_infrastructure } } }
	desc = { text = resistance.2.d.infrastructure trigger = { FROM = { has_country_flag = strike_to_infrastructure } } }
	title = { text = resistance.2.t.dockyard trigger = { FROM = { has_country_flag = strike_to_dockyard } } }
	desc = { text = resistance.2.d.dockyard trigger = { FROM = { has_country_flag = strike_to_dockyard } } }
	title = { text = resistance.2.t.arms_factory trigger = { FROM = { has_country_flag = strike_to_arms_factory } } }
	desc = { text = resistance.2.d.arms_factory trigger = { FROM = { has_country_flag = strike_to_arms_factory } } }
	title = { text = resistance.2.t.industrial_complex trigger = { FROM = { has_country_flag = strike_to_industrial_complex } } }
	desc = { text = resistance.2.d.industrial_complex trigger = { FROM = { has_country_flag = strike_to_industrial_complex } } }
	title = { text = resistance.2.t.aviabase trigger = { FROM = { has_country_flag = strike_to_aviabase } } }
	desc = { text = resistance.2.d.aviabase trigger = { FROM = { has_country_flag = strike_to_aviabase } } }
	title = { text = resistance.2.t.nuclear trigger = { FROM = { has_country_flag = strike_to_nuclear } } }
	desc = { text = resistance.2.d.nuclear trigger = { FROM = { has_country_flag = strike_to_nuclear } } }
	title = { text = resistance.2.t.anti_air_building trigger = { FROM = { has_country_flag = strike_to_anti_air_building } } }
	desc = { text = resistance.2.d.anti_air_building trigger = { FROM = { has_country_flag = strike_to_anti_air_building } } }
	title = { text = resistance.2.t.synthetic_refinery trigger = { FROM = { has_country_flag = strike_to_synthetic_refinery } } }
	desc = { text = resistance.2.d.synthetic_refinery trigger = { FROM = { has_country_flag = strike_to_synthetic_refinery } } }
	title = { text = resistance.2.t.fuel_silo trigger = { FROM = { has_country_flag = strike_to_fuel_silo } } }
	desc = { text = resistance.2.d.fuel_silo trigger = { FROM = { has_country_flag = strike_to_fuel_silo } } }
	title = { text = resistance.2.t.radar_station trigger = { FROM = { has_country_flag = strike_to_radar_station } } }
	desc = { text = resistance.2.d.radar_station trigger = { FROM = { has_country_flag = strike_to_radar_station } } }
	title = { text = resistance.2.t.rocket_site trigger = { FROM = { has_country_flag = strike_to_rocket_site } } }
	desc = { text = resistance.2.d.rocket_site trigger = { FROM = { has_country_flag = strike_to_rocket_site } } }
	
	is_triggered_only = yes
	
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event resistance.2"		
		
		hidden_effect = {
			if = {
				limit = { FROM = { has_country_flag = strike_to_infrastructure } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_infrastructure_flag
					}
					clr_state_flag = undermining_the_infrastructure_flag
				}
				FROM = { clr_country_flag = strike_to_infrastructure }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_dockyard } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_dockyard_flag
					}
					clr_state_flag = undermining_the_dockyard_flag
				}
				FROM = { clr_country_flag = strike_to_dockyard }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_arms_factory } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_arms_factory
					}
					clr_state_flag = undermining_the_arms_factory
				}
				FROM = { clr_country_flag = strike_to_arms_factory }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_industrial_complex } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_industrial_complex
					}
					clr_state_flag = undermining_the_industrial_complex
				}
				FROM = { clr_country_flag = strike_to_industrial_complex }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_anti_air_building } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_anti_air_building
					}
					clr_state_flag = undermining_the_anti_air_building
				}
				FROM = { clr_country_flag = strike_to_anti_air_building }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_synthetic_refinery } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_synthetic_refinery
					}
					clr_state_flag = undermining_the_synthetic_refinery
				}
				FROM = { clr_country_flag = strike_to_synthetic_refinery }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_fuel_silo } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_fuel_silo
					}
					clr_state_flag = undermining_the_fuel_silo
				}
				FROM = { clr_country_flag = strike_to_fuel_silo }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_radar_station } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_radar_station
					}
					clr_state_flag = undermining_the_radar_station
				}
				FROM = { clr_country_flag = strike_to_radar_station }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_rocket_site } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_rocket_site
					}
					clr_state_flag = undermining_the_rocket_site
				}
				FROM = { clr_country_flag = strike_to_rocket_site }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_nuclear } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_nuclear_flag
					}
					clr_state_flag = undermining_the_nuclear_flag
				}
				FROM = { clr_country_flag = strike_to_nuclear }
			}
			else_if = {
				limit = { FROM = { has_country_flag = strike_to_aviabase } }
				random_state = {
					limit = {
						is_owned_by = FROM
						NOT = { is_controlled_by = FROM }
						has_state_flag = undermining_the_aviabase_flag
					}
					clr_state_flag = undermining_the_aviabase_flag
				}
				FROM = { clr_country_flag = strike_to_aviabase }
			}
		}
	}
	
	option = {
		name = resistance.2.a
		
		custom_effect_tooltip = failed_rebels_tt
		hidden_effect = {
			
		}
	}
}

# Удар Сопротивления! - удача и не совсем
country_event = {
	id = resistance.3
	title = { text = resistance.3.t.infrastructure trigger = { FROM = { has_country_flag = strike_to_infrastructure } } }
	desc = { text = resistance.3.d.infrastructure trigger = { FROM = { has_country_flag = strike_to_infrastructure } } }
	title = { text = resistance.3.t.dockyard trigger = { FROM = { has_country_flag = strike_to_dockyard } } }
	desc = { text = resistance.3.d.dockyard trigger = { FROM = { has_country_flag = strike_to_dockyard } } }
	title = { text = resistance.3.t.arms_factory trigger = { FROM = { has_country_flag = strike_to_arms_factory } } }
	desc = { text = resistance.3.d.arms_factory trigger = { FROM = { has_country_flag = strike_to_arms_factory } } }
	title = { text = resistance.3.t.industrial_complex trigger = { FROM = { has_country_flag = strike_to_industrial_complex } } }
	desc = { text = resistance.3.d.industrial_complex trigger = { FROM = { has_country_flag = strike_to_industrial_complex } } }
	title = { text = resistance.3.t.aviabase trigger = { FROM = { has_country_flag = strike_to_aviabase } } }
	desc = { text = resistance.3.d.aviabase trigger = { FROM = { has_country_flag = strike_to_aviabase } } }
	title = { text = resistance.3.t.nuclear trigger = { FROM = { has_country_flag = strike_to_nuclear } } }
	desc = { text = resistance.3.d.nuclear trigger = { FROM = { has_country_flag = strike_to_nuclear } } }
	title = { text = resistance.3.t.anti_air_building trigger = { FROM = { has_country_flag = strike_to_anti_air_building } } }
	desc = { text = resistance.3.d.anti_air_building trigger = { FROM = { has_country_flag = strike_to_anti_air_building } } }
	title = { text = resistance.3.t.synthetic_refinery trigger = { FROM = { has_country_flag = strike_to_synthetic_refinery } } }
	desc = { text = resistance.3.d.synthetic_refinery trigger = { FROM = { has_country_flag = strike_to_synthetic_refinery } } }
	title = { text = resistance.3.t.fuel_silo trigger = { FROM = { has_country_flag = strike_to_fuel_silo } } }
	desc = { text = resistance.3.d.fuel_silo trigger = { FROM = { has_country_flag = strike_to_fuel_silo } } }
	title = { text = resistance.3.t.radar_station trigger = { FROM = { has_country_flag = strike_to_radar_station } } }
	desc = { text = resistance.3.d.radar_station trigger = { FROM = { has_country_flag = strike_to_radar_station } } }
	title = { text = resistance.3.t.rocket_site trigger = { FROM = { has_country_flag = strike_to_rocket_site } } }
	desc = { text = resistance.3.d.rocket_site trigger = { FROM = { has_country_flag = strike_to_rocket_site } } }
	
	is_triggered_only = yes
	
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event resistance.3"
	}
	
	option = {
		name = resistance.3.a
		attack_to = yes
		custom_effect_tooltip = failed_rebels_tt
	}
}

# Удар Сопротивления! - удача
country_event = {
	id = resistance.4
	title = { text = resistance.4.t.infrastructure trigger = { FROM = { has_country_flag = strike_to_infrastructure } } }
	desc = { text = resistance.4.d.infrastructure trigger = { FROM = { has_country_flag = strike_to_infrastructure } } }
	title = { text = resistance.4.t.dockyard trigger = { FROM = { has_country_flag = strike_to_dockyard } } }
	desc = { text = resistance.4.d.dockyard trigger = { FROM = { has_country_flag = strike_to_dockyard } } }
	title = { text = resistance.4.t.arms_factory trigger = { FROM = { has_country_flag = strike_to_arms_factory } } }
	desc = { text = resistance.4.d.arms_factory trigger = { FROM = { has_country_flag = strike_to_arms_factory } } }
	title = { text = resistance.4.t.industrial_complex trigger = { FROM = { has_country_flag = strike_to_industrial_complex } } }
	desc = { text = resistance.4.d.industrial_complex trigger = { FROM = { has_country_flag = strike_to_industrial_complex } } }
	title = { text = resistance.4.t.aviabase trigger = { FROM = { has_country_flag = strike_to_aviabase } } }
	desc = { text = resistance.4.d.aviabase trigger = { FROM = { has_country_flag = strike_to_aviabase } } }
	title = { text = resistance.4.t.nuclear trigger = { FROM = { has_country_flag = strike_to_nuclear } } }
	desc = { text = resistance.4.d.nuclear trigger = { FROM = { has_country_flag = strike_to_nuclear } } }
	title = { text = resistance.4.t.anti_air_building trigger = { FROM = { has_country_flag = strike_to_anti_air_building } } }
	desc = { text = resistance.4.d.anti_air_building trigger = { FROM = { has_country_flag = strike_to_anti_air_building } } }
	title = { text = resistance.4.t.synthetic_refinery trigger = { FROM = { has_country_flag = strike_to_synthetic_refinery } } }
	desc = { text = resistance.4.d.synthetic_refinery trigger = { FROM = { has_country_flag = strike_to_synthetic_refinery } } }
	title = { text = resistance.4.t.fuel_silo trigger = { FROM = { has_country_flag = strike_to_fuel_silo } } }
	desc = { text = resistance.4.d.fuel_silo trigger = { FROM = { has_country_flag = strike_to_fuel_silo } } }
	title = { text = resistance.4.t.radar_station trigger = { FROM = { has_country_flag = strike_to_radar_station } } }
	desc = { text = resistance.4.d.radar_station trigger = { FROM = { has_country_flag = strike_to_radar_station } } }
	title = { text = resistance.4.t.rocket_site trigger = { FROM = { has_country_flag = strike_to_rocket_site } } }
	desc = { text = resistance.4.d.rocket_site trigger = { FROM = { has_country_flag = strike_to_rocket_site } } }
	
	is_triggered_only = yes
	
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event resistance.4"
	}
	
	option = {
		name = resistance.4.a
		attack_to = yes
	}
}

# Расформирование дивизий
country_event = {
	id = resistance.5
	
	hidden = yes
	
	is_triggered_only = yes
	
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event resistance.5" 
		
		add_to_variable = { var = rebel_manpower@ROOT value = 6600 }
		add_to_variable = { var = rebel_infantry_equipment@ROOT value = 610 }
		add_to_variable = { var = rebel_support_equipment@ROOT value = 30 }
		add_to_variable = { var = rebel_artillery_equipment@ROOT value = 12 }
		
		add_to_variable = { var = num_division@ROOT value = -1 }
		if = {
			limit = { check_variable = { num_division@ROOT > 0 } }
			country_event = { id = resistance.5 }
		}
	}
}

# Расформирование малых дивизий
country_event = {
	id = resistance.6
	
	hidden = yes
	
	is_triggered_only = yes
	
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event resistance.6" 
		
		add_to_variable = { var = rebel_manpower@ROOT value = 4000 }
		add_to_variable = { var = rebel_infantry_equipment@ROOT value = 400 }
		
		add_to_variable = { var = num_small_division@ROOT value = -1 }
		if = {
			limit = { check_variable = { num_small_division@ROOT > 0 } }
			country_event = { id = resistance.6 }
		}
	}
}

# Расстановка дивизий
country_event = {
	id = resistance.7
	
	hidden = yes
	
	is_triggered_only = yes
	
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event resistance.7" 
		
		if = {
			limit = {
				original_tag = POL
				NOT = { has_country_flag = set_to_warszawa }
				10 = { is_owned_by = ROOT }
				10 = { NOT = { is_controlled_by = ROOT } }
			}
			10 = {
				set_state_flag = general_resistance
				ROOT = { set_state_controller = PREV }
			}
			if = {
				limit = { has_template = "Dywizja Armii Krajowej" }
				load_oob = "POL_AK_Warszawa"
			}
			else_if = {
				limit = {  has_template = "Dywizja Armii Ludowej" }
				load_oob = "POL_AL_Warszawa"
			}
			set_country_flag = set_to_warszawa
			else = {
				random_state = {
					limit = { 
						is_owned_by = ROOT
						is_core_of = ROOT
						NOT = { is_controlled_by = ROOT }
					}
					set_state_flag = general_resistance
					ROOT = { set_state_controller = PREV }
					if = {
						limit = { ROOT = { has_template = "Rebel Division" } }
						create_unit = {
							division = "name = \"Rebel Division\" division_template = \"Rebel Division\" start_experience_factor = 0.5"
							owner = ROOT
						}
					}
					else_if = {
						limit = { ROOT = { has_template = "Dywizja Armii Krajowej" } }
						create_unit = {
							division = "name = \"Dywizja Armii Krajowej\" division_template = \"Dywizja Armii Krajowej\" start_experience_factor = 0.5"
							owner = ROOT
						}
					}
					else_if = {
						limit = { ROOT = { has_template = "Dywizja Armii Ludowej" } }
						create_unit = {
							division = "name = \"Dywizja Armii Ludowej\" division_template = \"Dywizja Armii Ludowej\" start_experience_factor = 0.5"
							owner = ROOT
						}
					}
				}
			}
		}
		
		add_to_variable = { var = num_division@ROOT value = -1 }
		if = {
			limit = { check_variable = { num_division@ROOT > 0 } }
			country_event = { id = resistance.7 }
		}
	}
}

# Расстановка малых дивизий
country_event = {
	id = resistance.8
	
	hidden = yes
	
	is_triggered_only = yes
	
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event resistance.8" 
		
		random_state = {
			limit = { 
				is_owned_by = ROOT
				is_core_of = ROOT
				NOT = { is_controlled_by = ROOT }
			}
			set_state_flag = general_resistance
			ROOT = { set_state_controller = PREV }
			if = {
				limit = { ROOT = { has_template = "Light Rebel Division" } }
				create_unit = {
					division = "name = \"Light Rebel Division\" division_template = \"Light Rebel Division\" start_experience_factor = 0.5"
					owner = ROOT
				}
			}
			else_if = {
				limit = { ROOT = { has_template = "Lekka Dywizja Armii Krajowej" } }
				create_unit = {
					division = "name = \"Dywizja Armii Krajowej\" division_template = \"Lekka Dywizja Armii Krajowej\" start_experience_factor = 0.5"
					owner = ROOT
				}
			}
			else_if = {
				limit = { ROOT = { has_template = "Lekka Dywizja Armii Ludowej" } }
				create_unit = {
					division = "name = \"Lekka Dywizja Armii Ludowej\" division_template = \"Lekka Dywizja Armii Ludowej\" start_experience_factor = 0.5"
					owner = ROOT
				}
			}
		}
		
		add_to_variable = { var = num_small_division@ROOT value = -1 }
		if = {
			limit = { check_variable = { num_small_division@ROOT > 0 } }
			country_event = { id = resistance.8 }
		}
	}
}

# Восстание проиграно
country_event = {
	id = resistance.9
	title = resistance.9.t
	desc = resistance.9.d
	
	fire_only_once = yes

	mean_time_to_happen = {
		days = 7
	}
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.9" }
	
	trigger = {
		has_country_flag = baptized_in_fire
		NOT = {
			any_state = {
				has_state_flag = general_resistance
				is_owned_by = ROOT
				is_controlled_by = ROOT
			}
		}
	}
	
	option = {
		name = resistance.9.a
		
		add_political_power = -80
		add_legitimacy = -20
		add_timed_idea = {
			idea = resistance_failed
			days = 365
		}
		hidden_effect = {
			clr_country_flag = baptized_in_fire
			every_state = {
				limit = {
					has_state_flag = general_resistance
					is_owned_by = ROOT
				}
				clr_state_flag = general_resistance
			}
		}
		if = {
			limit = { original_tag = POL owns_state = 10 has_global_flag = POL_powstanie_warszawskie }
			news_event = { id = news.1946 days = 1 }
		}
	}
}

# Бонусы?
country_event = {
	id = resistance.10
	title = resistance.10.t
	desc = resistance.10.d
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.10" }
	
	option = {
		name = resistance.10.a
		ai_chance = { factor = 100 }
		
		add_political_power = -20
		add_tech_bonus = {
			bonus = 0.5
			uses = 1
			category = decryption_tech
		}
		hidden_effect = { FROM = { country_event = { id = resistance.11 } } }
	}
	
	option = {
		name = resistance.10.b
		ai_chance = { factor = 0 }
		
		add_political_power = 10
		hidden_effect = { FROM = { country_event = { id = resistance.12 } } }
	}
}

# Бонусы!
country_event = {
	id = resistance.11
	title = resistance.11.t
	desc = resistance.11.d
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.11" }
	
	option = {
		name = resistance.11.a
		
		add_tech_bonus = {
			bonus = 1.0
			uses = 1
			category = decryption_tech
		}				
	}
}

# Бонусов нет
country_event = {
	id = resistance.12
	title = resistance.12.t
	desc = resistance.12.d
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.12" }
	
	option = {
		name = resistance.12.a
		
		add_opinion_modifier = { target = FROM modifier = opinion_denied_us_the_exchange_of_technology }
	}
}
	
# Варшавское восстание!
country_event = {
	id = resistance.44
	title = resistance.44.t
	desc = resistance.44.d
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.44" }
	
	option = {
		name = resistance.44.a
		
		add_timed_idea = {
			idea = POL_czas_w
			days = 90
		}
		news_event = { id = news.1944 days = 1 }
		set_global_flag = POL_powstanie_warszawskie
		
	}
}

# Варшава пала!
country_event = {
	id = resistance.45
	title = resistance.45.t
	desc = resistance.45.d
	
	fire_only_once = yes

	mean_time_to_happen = {
		days = 7
	}
	
	trigger = {
		has_global_flag = POL_powstanie_warszawskie
		NOT = { has_country_flag = dayVinWarszawa }
		10 = {
			has_state_flag = general_resistance
			is_owned_by = ROOT
			NOT = { is_controlled_by = ROOT }
		}
	}
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.45" }
	
	option = {
		name = resistance.45.a
		
		# remove_ideas = POL_czas_w
		# news_event = { id = news.1945 days = 1 }
		add_stability = -0.1
		10 = {
			remove_building = {
				type = infrastructure
				level = 2
			}
			add_manpower = -68000
		}
		hidden_effect = { 
			10 = { controller = { set_country_flag = prawo_msci } }
		}
	}
}

# Восстановление Варшавы
country_event = {
	id = resistance.46
	title = resistance.46.t
	desc = resistance.46.d
	
	fire_only_once = yes

	mean_time_to_happen = {
		days = 7
	}
	
	trigger = {
		original_tag = POL
		10 = { is_fully_controlled_by = POL has_state_flag = fallen_city  }
	}
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.46" }
	
	# Yes, we can!
	option = {
		name = resistance.46.a
		ai_chance = { factor = 100 }
		
		activate_decision = rebuild_warszawa
		# custom_effect_tooltip = my_tooltip_tt
		country_event = { id = resistance.47 }
	}
	
	# No
	option = {
		name = resistance.46.b
		ai_chance = { factor = 0 }
		add_stability = -0.05
		country_event = { id = resistance.47 }
	}
}

# Выбор временной столицы (или нет...)
country_event = {
	id = resistance.47
	title = resistance.47.t
	desc = { text = resistance.47.d.1 trigger = { has_country_flag = POL_active_decision } }
	desc = { text = resistance.47.d.2 trigger = { NOT = { has_country_flag = POL_active_decision } } }
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.47" }
	
	# Лодзь!
	option = {
		name = resistance.47.lodz
		trigger = { 
			87 = { is_owned_by = POL }
		}
		ai_chance = { 
			factor = 10 
			modifier = {
				NOT = { controls_state = 87 }
				factor = 1
			}
			modifier = {
				is_historical_focus_on = yes
				factor = 100
			}
		}
		
		set_capital = 87
	}
	
	# Краков
	option = {
		name = resistance.47.krakow
		trigger = { 
			88 = { is_owned_by = POL }
		}
		ai_chance = { 
			factor = 10 
			modifier = {
				NOT = { controls_state = 88 }
				factor = 1
			}
		}
		
		set_capital = 88
	}
	
	# Люблин
	option = {
		name = resistance.47.lublin
		trigger = { 
			92 = { is_owned_by = POL }
		}
		ai_chance = { 
			factor = 10 
			modifier = {
				NOT = { controls_state = 92 }
				factor = 1
			}
		}
		
		set_capital = 92
	}
	
	# Плоцк
	option = {
		name = resistance.47.plock
		trigger = { 
			98 = { is_owned_by = POL }
		}
		ai_chance = { 
			factor = 10 
			modifier = {
				NOT = { controls_state = 98 }
				factor = 1
			}
		}
		
		set_capital = 98
	}
}

# Варшава восстановлена
country_event = {
	id = resistance.48
	title = resistance.48.t
	desc = resistance.48.d
	
	fire_only_once = yes

	mean_time_to_happen = {
		days = 7
	}
	
	trigger = {
		10 = { 
			has_state_flag = fallen_city 
			is_owned_and_controlled_by = ROOT
			infrastructure > 7
		}
	}
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event resistance.47" }
	
	option = {
		name = resistance.48.a
		
		10 = {
			clr_state_flag = fallen_city
			set_state_category = large_city
		}
		reset_province_name = 3544
	}
}
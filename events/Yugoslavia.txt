###########################
# Yugoslavian Events
###########################

add_namespace = yugoslavia
add_namespace = nw_yugoslavia

# Britain to Back Coup in Yugoslavia
country_event = {
	id = yugoslavia.1
	title = yugoslavia.1.t
	desc = yugoslavia.1.d
	picture = GFX_report_event_yugoslavian_king_peter
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.1" }
	
	fire_only_once = yes
	
	trigger = {
		tag = ENG
		NOT = {
			has_dlc = "Death or Dishonor"
		}
		YUG = {
			OR = {
				is_in_faction_with = GER
				gives_military_access_to = GER
			}
		}
		HUN = { owns_state = 76 }
		GER = {
			OR = {
				AND = { is_in_faction_with = ITA is_in_faction_with = HUN }
				AND = { is_in_faction_with = ITA is_in_faction_with = BUL }
				AND = { is_in_faction_with = HUN is_in_faction_with = BUL }
			}
		}
		ENG = { has_completed_focus = uk_balkan_strategy }
		ENG = { NOT = { is_in_faction_with = GER } }
	}

	immediate = {
		hidden_effect = { remove_ideas = anti_german_military }
	}

	mean_time_to_happen = {
		days = 14
	}
	
	option = {
		name = yugoslavia.1.a
		add_political_power = -50
		YUG = {
			country_event = { id = yugoslavia.2 }
		}
	}

	option = {
		name = yugoslavia.1.b
		ai_chance = { factor = 0 }
		YUG = { remove_opinion_modifier = { target = ENG modifier = balkan_strategy_good } }
	}
}

# Yugoslavian Coup
country_event = {
	id = yugoslavia.2
	title = yugoslavia.2.t
	desc = yugoslavia.2.d
	picture = GFX_report_event_yugoslavian_king_peter
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.2" }
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { remove_ideas = anti_german_military }
	}

	option = {
		name = yugoslavia.2.a
		retire_country_leader = yes
		create_country_leader = {
			name = "Peter II"
			desc = "POLITICS_PETER_II_DESC"
			picture = "Portrait_Yugoslavia_Peter_II.dds"
			expire = "1965.1.1"
			ideology = despotism
			traits = {
				#
			}
		}
		add_timed_idea = { idea = anti_nazi_coup days = 730 }
		add_opinion_modifier = { target = GER modifier = anti_german_coup }
		diplomatic_relation = {
			country = GER
			relation = non_aggression_pact
			active = no
		}
		if = {
			limit = { is_in_faction_with = GER }
			GER = { remove_from_faction = YUG }
		}
		if = {
			limit = { gives_military_access_to = GER }
			GER = {
				diplomatic_relation = {
					country = YUG
					relation = military_access
					active = no
				}
			}
		}
		news_event = { hours = 6 id = news.150 }
	}

	option = {
		name = yugoslavia.2.b
		ai_chance = { factor = 0 }
		start_civil_war = {
			ideology = democratic
			size = 0.4
		}
	}
}



# Yugoslavia (British and (possibly) French Support)
country_event = {
	id = yugoslavia.3
	title = yugoslavia.3.t
	desc = {
		text = yugoslavia.3.d 
		trigger = {
			NOT = { has_global_flag = FRA_abandoned_yugoslavia }
		}
	}
	desc = {
		text = yugoslavia.3.d_FRA_abandoned_yugoslavia
		trigger = {
			has_global_flag = FRA_abandoned_yugoslavia
		}
	}
	picture = GFX_report_event_chamberlain_announce
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.3" }
	
	is_triggered_only = yes
	
	option = {
		name = yugoslavia.3.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 }
				}
			}
		}
	}
}

# Yugoslavia (French Support)
country_event = {
	id = yugoslavia.4
	title = yugoslavia.3.t
	desc = yugoslavia.4.d
	picture = GFX_report_event_chamberlain_announce
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.4" }
	
	is_triggered_only = yes
	
	option = {
		name = yugoslavia.4.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 }
				}
			}
		}
	}
}

# Yugoslavia (Abandoned)
country_event = {
	id = yugoslavia.5
	title = yugoslavia.5.t
	desc = yugoslavia.5.d
	picture = GFX_report_event_hitler_croatia_handshake
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.5" }
	
	is_triggered_only = yes
	
	option = { # Surrender Slovenia
		name = yugoslavia.5.a
		ai_chance = {
			factor = 90
			modifier = { # Decrease chance YUG resists if AUS isn't taken first
				AUS = { exists = yes }
				factor = 0.5
			}
			modifier = { # If they stand a chance to hold the line they will fight
				factor = 0.1
				strength_ratio = {
					tag = GER
					ratio > 0.70
				}
			}
			modifier = { #decrease if in faction
				factor = 0.5
				is_in_faction = yes
			}
			modifier = { # Increase it again if other bordering nations are in Axis
				any_neighbor_country = {
					NOT = { tag = GER }
					is_in_faction_with = GER
				}
				factor = 2.0
			}
		}
		GER = { country_event = germany.94 } #Germany gets Slovenia
	}
	option = { # Refuse anyway
		name = yugoslavia.5.b
		ai_chance = { factor = 10 }
		GER = {
			country_event = germany.95 #Germany gains wargoal
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 }
				}
			}
		}
	}
}


# Yugoslavia (Italian Support)
country_event = {
	id = yugoslavia.6
	title = yugoslavia.3.t
	desc = yugoslavia.6.d
	picture = GFX_report_event_fascists_posing
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.6" }
	
	is_triggered_only = yes
	
	option = {
		name = yugoslavia.6.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 }
				}
			}
		}
	}
}

# Fate of Yugoslavia
country_event = {
	id = yugoslavia.7
	title = germany.98.t
	desc = {
		text = yugoslavia.7.d
	}
	picture = GFX_report_event_german_inspect_troops
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.7" }
	
	is_triggered_only = yes
	
	#Nope
	option = {
		name = yugoslavia.7.a
		ai_chance = { 
			factor = 5
		}

		GER = { country_event = { id = germany.111 days = 1 } 
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = YUG
				}
			}
		}
	}

	#Alrighty
	option = {
		name = yugoslavia.7.b
		ai_chance = { 
			factor = 10
			modifier = {
				factor = 0
				is_puppet = yes
			}
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					OR = {
						has_guaranteed = YUG
						is_in_faction_with = YUG
					}
				}
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
		GER = {

			add_political_power = -75		
			add_named_threat = { threat = 5 name = GER_fate_of_yugoslavia }
			annex_country = { target = YUG transfer_troops = no }

			hidden_effect = {
				set_global_flag = GER_fate_of_yugoslavia_annex_YUG
				news_event = { hours = 6 id = news.169 }
			}
		}
	}
}

# Fate of Yugoslavia
country_event = {
	id = yugoslavia.8
	title = germany.98.t
	desc = {
		text = yugoslavia.8.d
	}
	picture = GFX_report_event_german_inspect_troops
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.8" }
	
	is_triggered_only = yes
	
	#Fuck that
	option = {
		name = yugoslavia.8.a
		ai_chance = { 
			factor = 10
		}

		GER = { country_event = { id = germany.111 days = 1 } 
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = YUG
				}
			}
		}
	}

	#Sure thing
	option = {
		name = yugoslavia.8.b

		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					OR = {
						has_guaranteed = YUG
						is_in_faction_with = YUG
					}
				}
			}
			modifier = {
				factor = 0
				is_puppet = yes
			} 
		}

		trigger = { 
			YUG = { 
				OR = { 
					owns_state = 103
					owns_state = 109
					owns_state = 811
					owns_state = 816
					owns_state = 827
					owns_state = 828
					owns_state = 904
					owns_state = 905
					owns_state = 906
				} 
			} 
		}

		GER = {		
			add_political_power = -25
			add_named_threat = { threat = 3 name = GER_fate_of_yugoslavia }
			
			CRO = {
					if = {
						limit = { YUG = { owns_state = 103 } }
						transfer_state = 103
					}
					if = {
						limit = { YUG = { owns_state = 104 } }
						transfer_state = 104
					}
					if = {
						limit = { YUG = { owns_state = 109 } }
						transfer_state = 109
					}	
					if = {
						limit = { YUG = { owns_state = 811 } }
						transfer_state = 811
					}
					if = {
						limit = { YUG = { owns_state = 816 } }
						transfer_state = 816
					}
					if = {
						limit = { YUG = { owns_state = 817 } }
						transfer_state = 817
					}
					if = {
						limit = { YUG = { owns_state = 826 } }
						transfer_state = 826
					}
					if = {
						limit = { YUG = { owns_state = 827 } }
						transfer_state = 827
					}
					if = {
						limit = { YUG = { owns_state = 828 } }
						transfer_state = 828
					}
					if = {
						limit = { YUG = { owns_state = 904 } }
						transfer_state = 904
					}
					if = {
						limit = { YUG = { owns_state = 905 } }
						transfer_state = 905
					}
			}
			puppet = CRO
			annex_country = { target = YUG transfer_troops = no }

			hidden_effect = {
				set_global_flag = GER_fate_of_yugoslavia_puppet_CRO_annex_YUG
				news_event = { hours = 6 id = news.169 }
			}
		}
	}
}

# Fate of Yugoslavia
country_event = {
	id = yugoslavia.9
	title = germany.98.t
	desc = {
		text = yugoslavia.9.d
	}
	picture = GFX_report_event_german_inspect_troops
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.9" }
	
	is_triggered_only = yes
	
	#No way
	option = {
		name = yugoslavia.9.a
		ai_chance = { factor = 2 }

		GER = { country_event = { id = germany.111 days = 1 } 
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = YUG
				}
			}
		}
	}

	#Seems fair
	option = {
		name = yugoslavia.9.b
		ai_chance = { 
			factor = 10
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					OR = {
						has_guaranteed = YUG
						is_in_faction_with = YUG
					}
				}
			}
			modifier = {
				factor = 0
				is_puppet = yes
			} 
		}

		GER = {

			add_named_threat = { threat = 2 name = GER_fate_of_yugoslavia }
			
			CRO = {
					if = {
						limit = { YUG = { owns_state = 103 } }
						transfer_state = 103
					}
					if = {
						limit = { YUG = { owns_state = 104 } }
						transfer_state = 104
					}
					if = {
						limit = { YUG = { owns_state = 109 } }
						transfer_state = 109
					}	
					if = {
						limit = { YUG = { owns_state = 811 } }
						transfer_state = 811
					}
					if = {
						limit = { YUG = { owns_state = 816 } }
						transfer_state = 816
					}
					if = {
						limit = { YUG = { owns_state = 817 } }
						transfer_state = 817
					}
					if = {
						limit = { YUG = { owns_state = 826 } }
						transfer_state = 826
					}
					if = {
						limit = { YUG = { owns_state = 827 } }
						transfer_state = 827
					}
					if = {
						limit = { YUG = { owns_state = 828 } }
						transfer_state = 828
					}
					if = {
						limit = { YUG = { owns_state = 904 } }
						transfer_state = 904
					}
					if = {
						limit = { YUG = { owns_state = 905 } }
						transfer_state = 905
					}
			}
			puppet = CRO
			puppet = YUG


			hidden_effect = {
				set_global_flag = GER_fate_of_yugoslavia_puppet_CRO_YUG
				news_event = { hours = 6 id = news.169 }
			}
		}
	}
}

#
#
#
#
#
#
# Развал Югославии - восстание по нацдухам
country_event = {
	id = nw_yugoslavia.1
	title = nw_yugoslavia.1.t
	desc = { text = nw_yugoslavia.1.d }
	picture = GFX_report_event_chamberlain_announce
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event nw_yugoslavia.1" }
	
	immediate = {
		hidden_effect = {
			### Потеря территорий
			if = {
				limit = { has_war = yes }
				every_state = {
					limit = { is_owned_by = YUG NOT = { is_controlled_by = YUG } }
					CONTROLLER = { transfer_state = PREV }
					set_state_flag = YUG_annexed_territory
				}
			}
			### Выход из альянсов, заключение мира
			# every_country = {
			#	limit = { is_in_faction_with = YUG }
			#	set_country_flag = YUG_faction_ROOT
			# }
			leave_faction = yes
			every_country = {
				limit = { has_war_with = YUG }
				white_peace = YUG
			}
			
			### Интервенция Венгрии, Италии и Болгарии
			
			### Вопрос марионеток
			every_country = {
				limit = { is_subject_of = YUG }
				country_event = { id = nw_yugoslavia.11 hours = 12 }
			}
			
			### Словенский вопрос
			if = {
				limit = {
					NOT = { country_exists = SLV } 
					OR = {
						102 = { is_owned_and_controlled_by = YUG }
						736 = { is_owned_and_controlled_by = YUG }
						858 = { is_owned_and_controlled_by = YUG }
					}
				}
				if = {
					limit = { has_idea = YUG_idea_slovene_nationalism }
					release = SLV
					SLV = {
						take_division = yes
						take_division = yes
					}
				}
				else_if = {
					limit = { NOT = { has_idea = YUG_idea_slovene_nationalism } }
					random_state = {
						limit = { is_core_of = SLV is_owned_and_controlled_by = YUG }
						SLV = { transfer_state = PREV }
					}
				}
				SLV = { set_country_flag = SLV_YUG_revolt }
				SLV = {
					take_division = yes
					take_division = yes
				}
				YUG = { 
					declare_war_on = {
						target = SLV
						type = annex_everything
					}
				}
			}
			
			### Хорватский вопрос
			if = {
				limit = {
					NOT = { country_exists = CRO } 
					OR = {
						103 = { is_owned_and_controlled_by = YUG }
						109 = { is_owned_and_controlled_by = YUG }
						811 = { is_owned_and_controlled_by = YUG }
						816 = { is_owned_and_controlled_by = YUG }
						824 = { is_owned_and_controlled_by = YUG }
						827 = { is_owned_and_controlled_by = YUG }
						828 = { is_owned_and_controlled_by = YUG }
						904 = { is_owned_and_controlled_by = YUG }
						905 = { is_owned_and_controlled_by = YUG }
						906 = { is_owned_and_controlled_by = YUG }
					}
				}
				if = {
					limit = { has_idea = YUG_idea_croatian_opposition }
					release = CRO
					CRO = {
						take_division = yes
						take_division = yes
						take_division = yes
					}
				}
				else_if = {
					limit = { NOT = { has_idea = YUG_idea_croatian_opposition } }
					if = {
						limit = { 109 = { is_owned_and_controlled_by = YUG } }
						CRO = { transfer_state = 109 }
						else = {
							random_state = {
								limit = { is_core_of = CRO is_owned_and_controlled_by = YUG }
								CRO = { transfer_state = PREV }
							}
						}
					}
					if = {
						limit = { 811 = { is_owned_and_controlled_by = YUG } }
						CRO = { transfer_state = 811 }
						else = {
							random_state = {
								limit = { is_core_of = CRO is_owned_and_controlled_by = YUG }
								CRO = { transfer_state = PREV }
							}
						}
					}
					if = {
						limit = { 816 = { is_owned_and_controlled_by = YUG } }
						CRO = { transfer_state = 816 }
						else = {
							random_state = {
								limit = { is_core_of = CRO is_owned_and_controlled_by = YUG }
								CRO = { transfer_state = PREV }
							}
						}
					}
					if = {
						limit = { 904 = { is_owned_and_controlled_by = YUG } }
						CRO = { transfer_state = 904 }
						else = {
							random_state = {
								limit = { is_core_of = CRO is_owned_and_controlled_by = YUG }
								CRO = { transfer_state = PREV }
							}
						}
					}
					if = {
						limit = { 103 = { is_owned_and_controlled_by = YUG } }
						CRO = { transfer_state = 103 }
						else = {
							random_state = {
								limit = { is_core_of = CRO is_owned_and_controlled_by = YUG }
								CRO = { transfer_state = PREV }
							}
						}
					}
				}
				CRO = { set_country_flag = CRO_YUG_revolt }
				CRO = {
					take_division = yes
					take_division = yes
					take_division = yes
				}
				YUG = { 
					declare_war_on = {
						target = CRO
						type = annex_everything
					}
				}
			}
			
			### Македонский вопрос
			if = {
				limit = {
					NOT = { country_exists = MAC } 
					OR = {
						106 = { is_owned_and_controlled_by = YUG }
						825 = { is_owned_and_controlled_by = YUG }
						812 = { is_owned_and_controlled_by = YUG }
					}
				}
				if = {
					limit = { has_idea = YUG_idea_macedonian_opposition }
					release = MAC
					MAC = {
						take_division = yes
						take_division = yes
					}
				}
				else_if = {
					limit = { NOT = { has_idea = YUG_idea_macedonian_opposition } }
					if = {
						limit = { 106 = { is_owned_and_controlled_by = YUG } }
						MAC = { transfer_state = 106 }
						else = {
							random_state = {
								limit = { is_core_of = MAC is_owned_and_controlled_by = YUG }
								MAC = { transfer_state = PREV }
							}
						}
					}
					if = {
						limit = { 825 = { is_owned_and_controlled_by = YUG } }
						MAC = { transfer_state = 825 }
						else = {
							random_state = {
								limit = { is_core_of = MAC is_owned_and_controlled_by = YUG }
								MAC = { transfer_state = PREV }
							}
						}
					}
				}
				MAC = { set_country_flag = MAC_YUG_revolt }
				MAC = {
					take_division = yes
					take_division = yes
				}
				YUG = { 
					declare_war_on = {
						target = MAC
						type = annex_everything
					}
				}
			}
			
		}
	}
	
	is_triggered_only = yes
	
	option = { # Югославия провалилась
		name = nw_yugoslavia.1.a
		ai_chance = { factor = 50 }
		
		trigger = {
			OR = {
				SER = { exists = no }
				CRO = { exists = no }
				SLV = { exists = no }
				MAC = { exists = no }
			}
		}
		
		if = {
			limit = {
				SER = { exists = no }
				any_state = {
					is_owned_and_controlled_by = YUG
					is_core_of = SER
				}
			}
			random_state = {
				limit = {
					is_owned_and_controlled_by = YUG
					is_core_of = SER
				}
			}
			YUG = { release_all = yes }
			SER = {
				change_tag_from = YUG
				annex_country = { target = YUG }
			}
			
			else = {
				if = { 
					limit = { CRO = { has_country_flag = CRO_YUG_revolt } }
					CRO = { change_tag_from = YUG }
					YUG = { release_all = yes }
				}
				else_if = { 
					limit = { MAC = { has_country_flag = MAC_YUG_revolt } }
					MAC = { change_tag_from = YUG }
					YUG = { release_all = yes }
				}
				else_if = { 
					limit = { SLV = { has_country_flag = SLV_YUG_revolt } }
					SLV = { change_tag_from = YUG }
					YUG = { release_all = yes }
				}
				else = {
					YUG = { release_all = yes }
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = { CRO = { has_country_flag = CRO_YUG_revolt } }
				country_event = { id = nw_yugoslavia.9 hours = 3 }
			}
			if = {
				limit = { MAC = { has_country_flag = MAC_YUG_revolt } }
				country_event = { id = nw_yugoslavia.9 hours = 3 }
			}
			if = {
				limit = { SLV = { has_country_flag = SLV_YUG_revolt } }
				country_event = { id = nw_yugoslavia.9 hours = 3 }
			}
		}
	}
	
	option = { # Мы выстоим!
		name = nw_yugoslavia.1.b
		ai_chance = { factor = 50 }
		
		if = {
			limit = { NOT = { has_government = communism } num_of_controlled_states > 1 }
			start_civil_war = {
				ruling_party = communism
				ideology = ROOT
				size = 0.4
				only_own_territory = no
				capital = 107
			}
		}
		else_if = {
			limit = {
				has_government = communism num_of_controlled_states > 1
			}
			start_civil_war = {
				ruling_party = neutrality
				ideology = ROOT
				size = 0.4
				only_own_territory = no
				capital = 107
			}
		}
		
		hidden_effect = {
			if = { 
				limit = { CRO = { has_country_flag = CRO_YUG_revolt } }
				country_event = { id = nw_yugoslavia.10 hours = 3 }
			}
			if = { 
				limit = { MAC = { has_country_flag = MAC_YUG_revolt } }
				country_event = { id = nw_yugoslavia.10 hours = 3 }
			}
			if = { 
				limit = { SLV = { has_country_flag = SLV_YUG_revolt } }
				country_event = { id = nw_yugoslavia.10 hours = 3 }
			}
		}
	}
}

# Судьба аннексированных территорий - Словения
country_event = {
	id = nw_yugoslavia.2
	title = nw_yugoslavia.2.t
	desc = nw_yugoslavia.2.d
	picture = GFX_report_event_yugoslavian_king_peter
	
	fire_only_once = yes
	
	trigger = {
		any_state = {
			NOT = { is_owned_by = YUG }
			is_owned_by = ROOT
			is_core_of = SLV
			has_state_flag = YUG_annexed_territory
		}
	}

	immediate = { log = "[GetDateText]: [Root.GetName]: event nw_yugoslavia.2" }
	
	mean_time_to_happen = {
		days = 3
	}
	
	option = { ### Аннексия
		name = nw_yugoslavia.2.a
		ai_chance = { 
			factor = 20 
		}
		
		add_political_power = -60
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = SLV
				has_state_flag = YUG_annexed_territory
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Марионетка
		name = nw_yugoslavia.2.b
		trigger = {
			OR = { 
				SLV = { exists = no }
				SLV = { exists = yes is_subject_of = ROOT }
			}
		}
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 180
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = SLV
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = SLV
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			SLV = { transfer_state = PREV }
			if = {
				limit = { SLV = { NOT = { is_subject_of = ROOT } } }
				ROOT = { puppet = SLV }
			}
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Отдать союзнику
		name = nw_yugoslavia.2.c
		trigger = {
			SLV = { 
				OR = { 
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
			}
		}
		
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 100
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = SLV
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = SLV
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			SLV = { transfer_state = PREV add_opinion_modifier = { target = ROOT modifier = YUG_wroce_state } }
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
}

# Судьба аннексированных территорий - Хорватия
country_event = {
	id = nw_yugoslavia.3
	title = nw_yugoslavia.3.t
	desc = nw_yugoslavia.3.d
	picture = GFX_report_event_yugoslavian_king_peter
	
	fire_only_once = yes
	
	trigger = {
		any_state = {
			NOT = { is_owned_by = YUG }
			is_owned_by = ROOT
			is_core_of = CRO
			has_state_flag = YUG_annexed_territory
		}
	}

	immediate = { log = "[GetDateText]: [Root.GetName]: event nw_yugoslavia.3" }
	
	mean_time_to_happen = {
		days = 3
	}
	
	option = { ### Аннексия
		name = nw_yugoslavia.3.a
		ai_chance = { 
			factor = 20 
		}
		
		add_political_power = -60
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = CRO
				has_state_flag = YUG_annexed_territory
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Марионетка
		name = nw_yugoslavia.3.b
		trigger = {
			OR = { 
				CRO = { exists = no }
				CRO = { exists = yes is_subject_of = ROOT }
			}
		}
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 180
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = CRO
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = CRO
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			CRO = { transfer_state = PREV }
			if = {
				limit = { CRO = { NOT = { is_subject_of = ROOT } } }
				ROOT = { puppet = CRO }
			}
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Отдать союзнику
		name = nw_yugoslavia.3.c
		trigger = {
			CRO = { 
				OR = { 
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
			}
		}
		
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 100
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = CRO
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = CRO
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			CRO = { transfer_state = PREV add_opinion_modifier = { target = ROOT modifier = YUG_wroce_state } }
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
}

# Судьба аннексированных территорий - Македония
country_event = {
	id = nw_yugoslavia.4
	title = nw_yugoslavia.4.t
	desc = nw_yugoslavia.4.d
	picture = GFX_report_event_yugoslavian_king_peter
	
	fire_only_once = yes
	
	trigger = {
		any_state = {
			NOT = { is_owned_by = YUG }
			is_owned_by = ROOT
			is_core_of = MAC
			has_state_flag = YUG_annexed_territory
		}
	}

	immediate = { log = "[GetDateText]: [Root.GetName]: event nw_yugoslavia.4" }
	
	mean_time_to_happen = {
		days = 3
	}
	
	option = { ### Аннексия
		name = nw_yugoslavia.4.a
		ai_chance = { 
			factor = 20 
		}
		
		add_political_power = -60
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = MAC
				has_state_flag = YUG_annexed_territory
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Марионетка
		name = nw_yugoslavia.4.b
		trigger = {
			OR = { 
				MAC = { exists = no }
				MAC = { exists = yes is_subject_of = ROOT }
			}
		}
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 180
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = MAC
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = MAC
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			MAC = { transfer_state = PREV }
			if = {
				limit = { MAC = { NOT = { is_subject_of = ROOT } } }
				ROOT = { puppet = MAC }
			}
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Отдать союзнику
		name = nw_yugoslavia.4.c
		trigger = {
			MAC = { 
				OR = { 
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
			}
		}
		
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 100
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = MAC
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = MAC
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			MAC = { transfer_state = PREV add_opinion_modifier = { target = ROOT modifier = YUG_wroce_state } }
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
}

# Судьба аннексированных территорий - Босния
country_event = {
	id = nw_yugoslavia.5
	title = nw_yugoslavia.5.t
	desc = nw_yugoslavia.5.d
	picture = GFX_report_event_yugoslavian_king_peter
	
	fire_only_once = yes
	
	trigger = {
		any_state = {
			NOT = { is_owned_by = YUG }
			is_owned_by = ROOT
			is_core_of = BOS
			has_state_flag = YUG_annexed_territory
		}
	}

	immediate = { log = "[GetDateText]: [Root.GetName]: event nw_yugoslavia.5" }
	
	mean_time_to_happen = {
		days = 3
	}
	
	option = { ### Аннексия
		name = nw_yugoslavia.5.a
		ai_chance = { 
			factor = 20 
		}
		
		add_political_power = -60
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = BOS
				has_state_flag = YUG_annexed_territory
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Марионетка
		name = nw_yugoslavia.5.b
		trigger = {
			OR = { 
				BOS = { exists = no }
				BOS = { exists = yes is_subject_of = ROOT }
			}
		}
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 180
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = BOS
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = BOS
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			BOS = { transfer_state = PREV }
			if = {
				limit = { BOS = { NOT = { is_subject_of = ROOT } } }
				ROOT = { puppet = BOS }
			}
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Отдать союзнику
		name = nw_yugoslavia.5.c
		trigger = {
			BOS = { 
				OR = { 
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
			}
		}
		
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 100
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = BOS
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = BOS
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			BOS = { transfer_state = PREV add_opinion_modifier = { target = ROOT modifier = YUG_wroce_state } }
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
}

# Судьба аннексированных территорий - Черногория
country_event = {
	id = nw_yugoslavia.6
	title = nw_yugoslavia.6.t
	desc = nw_yugoslavia.6.d
	picture = GFX_report_event_yugoslavian_king_peter
	
	fire_only_once = yes
	
	trigger = {
		any_state = {
			NOT = { is_owned_by = YUG }
			is_owned_by = ROOT
			is_core_of = MNT
			has_state_flag = YUG_annexed_territory
		}
	}

	immediate = { log = "[GetDateText]: [Root.GetName]: event nw_yugoslavia.6" }
	
	mean_time_to_happen = {
		days = 3
	}
	
	option = { ### Аннексия
		name = nw_yugoslavia.6.a
		ai_chance = { 
			factor = 20 
		}
		
		add_political_power = -60
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = MNT
				has_state_flag = YUG_annexed_territory
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Марионетка
		name = nw_yugoslavia.6.b
		trigger = {
			OR = { 
				MNT = { exists = no }
				MNT = { exists = yes is_subject_of = ROOT }
			}
		}
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 180
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = MNT
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = MNT
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			MNT = { transfer_state = PREV }
			if = {
				limit = { MNT = { NOT = { is_subject_of = ROOT } } }
				ROOT = { puppet = MNT }
			}
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Отдать союзнику
		name = nw_yugoslavia.6.c
		trigger = {
			MNT = { 
				OR = { 
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
			}
		}
		
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 100
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = MNT
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = MNT
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			MNT = { transfer_state = PREV add_opinion_modifier = { target = ROOT modifier = YUG_wroce_state } }
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
}

# Судьба аннексированных территорий - Воеводина
country_event = {
	id = nw_yugoslavia.7
	title = nw_yugoslavia.7.t
	desc = nw_yugoslavia.7.d
	picture = GFX_report_event_yugoslavian_king_peter
	
	fire_only_once = yes
	
	trigger = {
		any_state = {
			NOT = { is_owned_by = YUG }
			is_owned_by = ROOT
			is_core_of = VOJ
			has_state_flag = YUG_annexed_territory
		}
	}

	immediate = { log = "[GetDateText]: [Root.GetName]: event nw_yugoslavia.7" }
	
	mean_time_to_happen = {
		days = 3
	}
	
	option = { ### Аннексия
		name = nw_yugoslavia.7.a
		ai_chance = { 
			factor = 20 
		}
		
		add_political_power = -60
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = VOJ
				has_state_flag = YUG_annexed_territory
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Марионетка
		name = nw_yugoslavia.7.b
		trigger = {
			OR = { 
				VOJ = { exists = no }
				VOJ = { exists = yes is_subject_of = ROOT }
			}
		}
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 180
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = VOJ
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = VOJ
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			VOJ = { transfer_state = PREV }
			if = {
				limit = { VOJ = { NOT = { is_subject_of = ROOT } } }
				ROOT = { puppet = VOJ }
			}
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Отдать союзнику
		name = nw_yugoslavia.7.c
		trigger = {
			VOJ = { 
				OR = { 
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
			}
		}
		
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 100
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = VOJ
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = VOJ
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			VOJ = { transfer_state = PREV add_opinion_modifier = { target = ROOT modifier = YUG_wroce_state } }
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
}

# Судьба аннексированных территорий - Сербия
country_event = {
	id = nw_yugoslavia.8
	title = nw_yugoslavia.8.t
	desc = nw_yugoslavia.8.d
	picture = GFX_report_event_yugoslavian_king_peter
	
	fire_only_once = yes
	
	trigger = {
		any_state = {
			NOT = { is_owned_by = YUG }
			is_owned_by = ROOT
			is_core_of = SER
			has_state_flag = YUG_annexed_territory
		}
	}

	immediate = { log = "[GetDateText]: [Root.GetName]: event nw_yugoslavia.8" }
	
	mean_time_to_happen = {
		days = 3
	}
	
	option = { ### Аннексия
		name = nw_yugoslavia.8.a
		ai_chance = { 
			factor = 20 
		}
		
		add_political_power = -60
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = SER
				has_state_flag = YUG_annexed_territory
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Марионетка
		name = nw_yugoslavia.8.b
		trigger = {
			OR = { 
				SER = { exists = no }
				SER = { exists = yes is_subject_of = ROOT }
			}
		}
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 180
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = SER
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = SER
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			SER = { transfer_state = PREV }
			if = {
				limit = { SER = { NOT = { is_subject_of = ROOT } } }
				ROOT = { puppet = SER }
			}
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
	
	option = { ### Отдать союзнику
		name = nw_yugoslavia.8.c
		trigger = {
			SER = { 
				OR = { 
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
			}
		}
		
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 100
				has_government = democratic
			}
			modifier = {
				factor = 0
				any_state = {
					is_owned_by = ROOT
					OR = { is_core_of = ROOT is_claimed_by = ROOT }
					is_core_of = SER
					has_state_flag = YUG_annexed_territory
				}
			}
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_core_of = SER
				has_state_flag = YUG_annexed_territory
				NOT = { is_core_of = ROOT }
			}
			SER = { transfer_state = PREV add_opinion_modifier = { target = ROOT modifier = YUG_wroce_state } }
			clr_state_flag = YUG_annexed_territory
		}
		
		every_state = {
			limit = {
				is_owned_by = ROOT
				has_state_flag = YUG_annexed_territory
				is_core_of = ROOT
			}
			clr_state_flag = YUG_annexed_territory
		}
	}
}

# Югославия распадается!
country_event = {
	id = nw_yugoslavia.11
	title = nw_yugoslavia.11.t
	desc = {
		text = nw_yugoslavia.11.d
	}
	picture = GFX_report_event_german_inspect_troops
	immediate = { log = "[GetDateText]: [Root.GetName]: event yugoslavia.11" }
	
	is_triggered_only = yes
	
	#Nope
	option = {
		name = yugoslavia.11.a
		ai_chance = { 
			factor = 5
		}

		
	}
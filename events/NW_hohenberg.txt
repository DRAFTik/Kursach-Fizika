###########################
# Ветка Гогенбергов
###########################

add_namespace = NWhohenberg

#Судьба законодательной власти // Габс
country_event = {
	id = NWhohenberg.1
	title = NWhohenberg.1.t
	desc = NWhohenberg.1.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event NWhohenberg.1" }
	
	option = {
		name = NWhohenberg.1.a
		ai_chance = {
			factor = 20
		}
		add_political_power = 20
		add_popularity = { ideology = democratic popularity = 0.03 }
		add_popularity = { ideology = monarchy popularity = 0.03 }
		custom_effect_tooltip = HHNBRG_error_for_opposition_tt
		hidden_effect = {
			country_event = { id = NWhohenberg.2 days = 10 }
			country_event = { id = NWhohenberg.6 days = 25 }
		}
	}
	
	option = {
		name = NWhohenberg.1.b
		ai_chance = {
			factor = 10
		}
		add_political_power = 60
		custom_effect_tooltip = HHNBRG_block_demo_tree_tt
		set_country_flag = HHNBRG_block_demo_tree
	}
}

#Депутаты парламента // Габс
country_event = {
	id = NWhohenberg.2
	title = NWhohenberg.2.t
	desc = NWhohenberg.2.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event NWhohenberg.2"
	}
	
	option = {
		name = NWhohenberg.2.a
		ai_chance = {
			factor = 10
		}
		add_popularity = { ideology = communism popularity = -0.03 }
		random_owned_controlled_state = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		hidden_effect = {
			if = {
				limit = {
					owns_state = 9
					owns_state = 849
					owns_state = 43
				}
				country_event = { id = NWhohenberg.3 days = 1 }
			}
		}
	}
	
	option = {
		name = NWhohenberg.2.b
		ai_chance = {
			factor = 10
		}
		add_popularity = { ideology = democratic popularity = -0.03 }
		random_owned_controlled_state = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		add_ideas = HHNBRG_support_capitalists
		if = {
			limit = {
				NOT = {
					owns_state = 9
					owns_state = 849
				}
			}
			custom_effect_tooltip = nobles_conflict_capitalists_tt
		}
		hidden_effect = {
			if = {
				limit = {
					owns_state = 9
					owns_state = 849
					owns_state = 43
				}
				country_event = { id = NWhohenberg.3 days = 1 }
			}
			if = {
				limit = {
					owns_state = 4
					owns_state = 152
				}
				country_event = { id = NWhohenberg.4 days = 2 }
			}
			if = {
				limit = { NOT = { has_government = neutrality } }
				country_event = { id = NWhohenberg.5 days = 15 }
			}
		}
	}
	
	option = {
		name = NWhohenberg.2.c
		ai_chance = {
			factor = 10
		}
		add_popularity = { ideology = fascism popularity = 0.03 }
		add_ideas = HHNBRG_support_aristocrats
	}
}

#Дворянство недовольно нашим решением // Габс
country_event = {
	id = NWhohenberg.3
	title = NWhohenberg.3.t
	desc = NWhohenberg.3.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event NWhohenberg.3"
	}
	
	option = {
		name = NWhohenberg.3.a
		ai_chance = {
			factor = 10
		}
		add_political_power = -20
		add_popularity = { ideology = fascism popularity = 0.04 }
		custom_effect_tooltip = HHNBRG_concessions_made_reactionaries_tt
		set_country_flag = HHNBRG_concessions_made_reactionaries
	}
	
	option = {
		name = NWhohenberg.3.b
		ai_chance = {
			factor = 10
		}
		add_political_power = -100
	}
}

#Австрийская оппозиция требует избавиться от Отто // Габс
country_event = {
	id = NWhohenberg.4
	title = NWhohenberg.4.t
	desc = NWhohenberg.4.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event NWhohenberg.4" }
	
	option = {
		name = NWhohenberg.4.a
		ai_chance = {
			factor = 10
		}
		if = {
			limit = { NOT = { country_exists = AUS } }
			every_state = {
				limit = {
					is_core_of = AUS
				}
				AUS = { transfer_state = PREV }
			}
			AUS = {
				load_oob = "AUS_1936"
			}
		}
		AUS = {
			save_global_event_target_as = NW_hhnbrg_scope
			set_country_flag = hhnbrg_flag
			add_popularity = { ideology = neutrality popularity = 0.4 }
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			create_country_leader = {
				name = "Sophie von Hohenberg"
				desc = "POLITICS_SOPHIE_VON_HOHENBERG_DESC"
				picture = "gfx/leaders/AUS/Portrait_Sophie_von_Hohenberg.dds"
				expire = "1965.1.1"
				ideology = moderatism
				traits = {
					popular_figurehead2
				}
			}
			set_major = yes
			set_cosmetic_tag = HOHENBERG
			load_focus_tree = hohenberg_focus
		}
		if = {
			limit = { NOT = { has_country_flag = hbbrg_flag } }
			declare_war_on = {
				target = event_target:NW_hbbrg_scope
				type = civil_war
			}
		}
		else = {
			effect_tooltip = {
				start_civil_war = {
					ideology = neutrality
					size = 0.49
				}
			}
			hidden_effect = {
				set_capital = 153
				start_civil_war = {
					ideology = fascism
					size = 0.49
					states = { 4 152 810 840 }
					#states = { 845 153 839 841 }
				}
				set_country_flag = same_ideology_civil_war_flag
				every_country = { clr_country_flag = hbbrg_flag }
				random_other_country = {
					limit = {
						original_tag = AUS
						has_government = fascism
					}
					set_country_flag = same_ideology_civil_war_flag
					add_popularity = { ideology = neutrality popularity = 0.4 }
					add_popularity = { ideology = fascism popularity = -1 }
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
					set_country_flag = hbbrg_flag
					load_focus_tree = hbbrg_focus
					set_cosmetic_tag = HABSBURGS
					set_major = yes
					create_country_leader = {
						name = "Otto von Habsburg"
						desc = "POLITICS_OTTO_VON_HABSBURG_DESC"
						picture = GFX_Portrait_hungary_otto_von_hapsburg
						expire = "1965.1.1"
						ideology = monarchy_ideology
						traits = {
						}
					}
					add_ideas = HUN_habsburg_restored
					set_party_name = { ideology = democratic long_name = habsburg_democratic_party name = habsburg_democratic_party }
					set_party_name = { ideology = communism long_name = habsburg_communism_party name = habsburg_communism_party }
					set_party_name = { ideology = fascism long_name = habsburg_fascism_party name = habsburg_fascism_party }
					set_party_name = { ideology = monarchy long_name = habsburg_monarchy_party name = habsburg_monarchy_party }
					add_country_leader_trait = kingAUS
					set_country_flag = kingAUS_flag
				}
			}
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					OR = {
						state = 69
						state = 847
						is_core_of = SLO
					}
				}
				AUS = { transfer_state = PREV }
			}
		}
	}
	
	option = {
		name = NWhohenberg.4.b
		ai_chance = {
			factor = 10
		}
		add_political_power = -100
		custom_effect_tooltip = HHNBRG_load_new_focus_tt
		hidden_effect = {
			save_global_event_target_as = NW_hhnbrg_scope
			set_country_flag = hhnbrg_flag
			add_popularity = { ideology = neutrality popularity = 0.4 }
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			create_country_leader = {
				name = "Sophie von Hohenberg"
				desc = "POLITICS_SOPHIE_VON_HOHENBERG_DESC"
				picture = "gfx/leaders/AUS/Portrait_Sophie_von_Hohenberg.dds"
				expire = "1965.1.1"
				ideology = moderatism
				traits = {
					popular_figurehead2
				}
			}
			set_major = yes
			set_cosmetic_tag = HOHENBERG
			load_focus_tree = hohenberg_focus
		}
	}
}

#Куденхове-Калерги предлагает свою кандидатуру министра // Габс
country_event = {
	id = NWhohenberg.5
	title = NWhohenberg.5.t
	desc = NWhohenberg.5.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event NWhohenberg.5"
	}
	
	option = {
		name = NWhohenberg.5.a
		ai_chance = {
			factor = 10
		}
		add_political_power = 30
		custom_effect_tooltip = HHNBRG_block_demo_tree_tt
		set_country_flag = HHNBRG_block_demo_tree_2
	}
	
	option = {
		name = NWhohenberg.5.b
		ai_chance = {
			factor = 10
		}
		add_political_power = -100
		add_ideas = HHNBRG_philosopher_in_government
		custom_effect_tooltip = HHNBRG_block_fash_tree_tt
		set_country_flag = HHNBRG_block_fash_tree
	}
}

#Пульсар премьер-министр Империи // Габс
country_event = {
	id = NWhohenberg.6
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event NWhohenberg.6"
	}
	
	option = {
		if = {
			limit = {
				NOT = {
					has_war_with = event_target:NW_hbbrg_scope
					has_war_with = event_target:NW_hhnbrg_scope
				}
			}
			event_target:NW_hbbrg_scope = { country_event = { id = NWhohenberg.7 } }
		}
	}
}

#Премьер-министр Империи // Габс
country_event = {
	id = NWhohenberg.7
	title = NWhohenberg.7.t
	desc = NWhohenberg.7.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event NWhohenberg.7"
	}
	
	option = {
		name = NWhohenberg.7.a
		ai_chance = {
			factor = 10
		}
		add_popularity = { ideology = democratic popularity = 0.3 }
		if = {
			limit = { has_country_flag = HHNBRG_block_fash_tree }
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
		}
		create_country_leader = {
			name = "Richard Nikolaus Coudenhove-Kalergi"
			desc = "POLITICS_COUDENHOVE_KALERGI_DESC"
			picture = "gfx/leaders/AUS/Portrait_Coudenhove_Kalergi.dds"
			expire = "1965.1.1"
			ideology = socialism
			traits = {
				father_of_europe
			}
		}
		hidden_effect = {
			if = {
				limit = {
					SPA = { has_completed_focus = SPA_invite_otto_von_habsburg }
					owns_state = 4
					owns_state = 152
				}
			}
			country_event = { id = NWhohenberg.8 days = 10 }
		}
	}
	
	option = {
		name = NWhohenberg.7.b
		ai_chance = {
			factor = 10
		}
		add_political_power = 60
	}
	
	option = {
		name = NWhohenberg.7.c
		ai_chance = {
			factor = 10
		}
		add_popularity = { ideology = fascism popularity = 0.3 }
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
		}
	}
}

#София Гогенберг представляет премьер-министру проект новой монархии // Габс
country_event = {
	id = NWhohenberg.8
	title = NWhohenberg.8.t
	desc = NWhohenberg.8.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event NWhohenberg.8"
	}
	
	option = {
		name = NWhohenberg.8.a
		ai_chance = {
			factor = 20
		}
		create_country_leader = {
			name = "Sophie von Hohenberg"
			desc = "POLITICS_SOPHIE_VON_HOHENBERG_DESC"
			picture = "gfx/leaders/AUS/Portrait_Sophie_von_Hohenberg.dds"
			expire = "1965.1.1"
			ideology = monarchy_ideology
			traits = {
				popular_figurehead2
			}
		}
		hidden_effect = {
			save_global_event_target_as = NW_hhnbrg_scope
			set_country_flag = hhnbrg_flag
			add_popularity = { ideology = monarchy popularity = 0.4 }
			set_politics = {
				ruling_party = monarchy
				elections_allowed = no
			}
			create_country_leader = {
				name = "Sophie von Hohenberg"
				desc = "POLITICS_SOPHIE_VON_HOHENBERG_DESC"
				picture = "gfx/leaders/AUS/Portrait_Sophie_von_Hohenberg.dds"
				expire = "1965.1.1"
				ideology = anarcho_monarchism
				traits = {
					popular_figurehead2
				}
			}
			set_major = yes
			set_cosmetic_tag = HOHENBERG
		}
		load_focus_tree = hohenberg_focus
	}
	
	option = {
		name = NWhohenberg.8.b
		ai_chance = {
			factor = 10
		}
	}
}






#Государство Империя Гогенбергов хочет образовать с нами «Антигабсбургский альянс» // SWI
country_event = {
	id = NWhohenberg.10
	title = NWhohenberg.10.t
	desc = NWhohenberg.10.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event NWhohenberg.10"
	}
	
	option = {
		name = NWhohenberg.10.a
		ai_chance = {
			factor = 90
		}
		add_ai_strategy = {
			type = alliance
			id = FROM
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = FROM
			value = 200
		}
		FROM = {
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = ROOT
				value = 200
			}
			set_rule = { can_create_factions = yes }
			create_faction = HHNBRG_anti_hbbrg_ally
			add_to_faction = ROOT
		}
		hidden_effect = {
			add_to_war = { targeted_alliance = FROM enemy = event_target:NW_hbbrg_scope hostility_reason = asked_to_join }
		}
	}
	
	option = {
		name = NWhohenberg.10.b
		ai_chance = {
			factor = 10
		}
	}
}

#Наемники
country_event = {
	id = NWhohenberg.11
	title = NWhohenberg.11.t
	desc = NWhohenberg.11.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	hidden = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event NWhohenberg.11" }
	
	option = {
		name = NWhohenberg.11.a
		hidden_effect = {
			if = {
				limit = { NOT = { has_template = "Crews Legion" } }
				division_template = {
					name = "Crews Legion"
					is_locked = yes
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 0 y = 3 }
					}
					support = {
						engineer = { x = 0 y = 0 }
						artillery = { x = 0 y = 1 }
					}
				}
			}
		}
		839 = {
			create_unit = {
				division = "name = \"Crews Legion\" division_template = \"Crews Legion\" start_experience_factor = 1.0" 
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Crews Legion\" division_template = \"Crews Legion\" start_experience_factor = 1.0" 
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Crews Legion\" division_template = \"Crews Legion\" start_experience_factor = 1.0" 
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Crews Legion\" division_template = \"Crews Legion\" start_experience_factor = 1.0" 
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Crews Legion\" division_template = \"Crews Legion\" start_experience_factor = 1.0" 
				owner = ROOT
			}
		}
		add_ideas = HHNBRG_hired_crews_idea
	}
}





#Самостоятельный приход
#Дворяне недовольны либерализмом Отто
country_event = {
	id = NWhohenberg.100
	title = NWhohenberg.100.t
	desc = NWhohenberg.100.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event NWhohenberg.100" }
	
	option = {
		name = NWhohenberg.100.a
		ai_chance = {
			factor = 30
		}
		set_country_flag = nobles_imposed_restrictions_on_otto
		custom_effect_tooltip = nobles_imposed_restrictions_on_otto_tt
	}
	
	option = {
		name = NWhohenberg.100.b
		ai_chance = {
			factor = 70
		}
		add_political_power = -20
	}
}

#Дворяне недовольны нашей политикой
country_event = {
	id = NWhohenberg.101
	title = NWhohenberg.101.t
	desc = NWhohenberg.101.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName]: event NWhohenberg.101" }
	
	option = {
		name = NWhohenberg.101.a
		trigger = { is_ai = no }
		set_country_flag = same_ideology_civil_war_flag
		effect_tooltip = {
			start_civil_war = {
				ideology = neutrality
				size = 0.5
			}
		}
		hidden_effect = {
			save_global_event_target_as = NW_hbbrg_scope
			start_civil_war = {
				ideology = fascism
				size = 0.49
			}
			random_other_country = {
				limit = {
					original_tag = AUS
					has_government = fascism
				}
				set_country_flag = same_ideology_civil_war_flag
				add_popularity = { ideology = neutrality popularity = 0.4 }
				add_popularity = { ideology = fascism popularity = -1 }
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				save_global_event_target_as = NW_hhnbrg_scope
				set_major = yes
				set_country_flag = hhnbrg_flag
				set_cosmetic_tag = HOHENBERG
				load_focus_tree = hohenberg_focus
				create_country_leader = {
					name = "Sophie von Hohenberg"
					desc = "POLITICS_SOPHIE_VON_HOHENBERG_DESC"
					picture = "gfx/leaders/AUS/Portrait_Sophie_von_Hohenberg.dds"
					expire = "1965.1.1"
					ideology = moderatism
					traits = {
						popular_figurehead2
					}
				}
				add_ideas = HUN_habsburg_restored
				set_party_name = { ideology = democratic long_name = habsburg_democratic_party name = habsburg_democratic_party }
				set_party_name = { ideology = communism long_name = habsburg_communism_party name = habsburg_communism_party }
				set_party_name = { ideology = fascism long_name = habsburg_fascism_party name = habsburg_fascism_party }
				set_party_name = { ideology = monarchy long_name = habsburg_monarchy_party name = habsburg_monarchy_party }
				add_country_leader_trait = kingAUS
				set_country_flag = kingAUS_flag
			}
		}
	}
	
	option = {
		name = NWhohenberg.101.b
		set_country_flag = same_ideology_civil_war_flag
		add_political_power = -100
		effect_tooltip = {
			start_civil_war = {
				ideology = neutrality
				size = 0.5
			}
		}
		hidden_effect = {
			start_civil_war = {
				ideology = fascism
				size = 0.49
			}
			random_other_country = {
				limit = {
					original_tag = AUS
					has_government = fascism
				}
				save_global_event_target_as = NW_hbbrg_scope
				set_country_flag = same_ideology_civil_war_flag
				add_popularity = { ideology = neutrality popularity = 0.4 }
				add_popularity = { ideology = fascism popularity = -1 }
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
			}
			save_global_event_target_as = NW_hhnbrg_scope
			set_major = yes
			set_country_flag = hhnbrg_flag
			set_cosmetic_tag = HOHENBERG
			load_focus_tree = hohenberg_focus
			create_country_leader = {
				name = "Sophie von Hohenberg"
				desc = "POLITICS_SOPHIE_VON_HOHENBERG_DESC"
				picture = "gfx/leaders/AUS/Portrait_Sophie_von_Hohenberg.dds"
				expire = "1965.1.1"
				ideology = moderatism
				traits = {
					popular_figurehead2
				}
			}
			add_ideas = HUN_habsburg_restored
			set_party_name = { ideology = democratic long_name = habsburg_democratic_party name = habsburg_democratic_party }
			set_party_name = { ideology = communism long_name = habsburg_communism_party name = habsburg_communism_party }
			set_party_name = { ideology = fascism long_name = habsburg_fascism_party name = habsburg_fascism_party }
			set_party_name = { ideology = monarchy long_name = habsburg_monarchy_party name = habsburg_monarchy_party }
			add_country_leader_trait = kingAUS
			set_country_flag = kingAUS_flag
		}
	}
}




#TEST
country_event = {
	id = NWhohenberg.999
	title = TEST
	desc = TEST
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event NWhohenberg.999"
	}
	
	option = {
		name = NW_SPANW_HHNBRG
		set_global_flag = NW_SPANW_HHNBRG
	}
}


###########################
# Ветка Ирана
###########################

add_namespace = NWpersian

#Иран национализировал нефтяную промышленность // ENG
country_event = {
	id = NWpersian.1
	title = NWpersian.1.t
	desc = NWpersian.1.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.1" }
	
	option = {
		name = NWpersian.1.a
		ai_chance = {
			factor = 50
		}
		if = {
			limit = { threat > 0.4 }
			create_wargoal = {
				type = annex_everything
				target = FROM
			}
			add_ai_strategy = {
				type = antagonize
				id = FROM
				value = 200
			}
			add_ai_strategy = {
				type = conquer
				id = FROM
				value = 200
			}
		}
		effect_tooltip = {
			add_opinion_modifier = { target = FROM modifier = PER_nationalize_oil_industry_op }
			FROM = { add_opinion_modifier = { target = ENG modifier = PER_nationalize_oil_industry_op } }
			remove_resource_rights = 411
			remove_resource_rights = 412
			remove_resource_rights = 413
		}
		add_state_claim = 411
		add_state_claim = 412
		add_state_claim = 413
	}
}

#Митинги исламистов // PER
country_event = {
	id = NWpersian.2
	title = NWpersian.2.t
	desc = NWpersian.2.desc
	picture = GFX_report_event_generic_rally_3
	fire_only_once = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.2" }
	
	mean_time_to_happen = { days = 5 }
	
	trigger = {
		tag = PER
		OR = {
			has_completed_focus = PER_prohibit_schools_attached_mosques
			has_completed_focus = PER_translate_persian_into_latin
			has_completed_focus = PER_prohibit_wearing_hijabs
		}
		NOT = { has_completed_focus = PER_weakening_influence_clergy }
	}
	
	option = {
		name = NWpersian.2.a
		add_stability = -0.02
		hidden_effect = {
			if = {
				limit = { has_completed_focus = PER_primacy_of_army }
				ENG = { country_event = { id = NWpersian.3 days = 1 } }
			}
			else_if = {
				limit = { has_completed_focus = PER_involvement_german_advisers }
				GER = { country_event = { id = NWpersian.4 days = 1 } }
			}
		}
	}
}

#Беспорядки в Иране // ENG
country_event = {
	id = NWpersian.3
	title = NWpersian.3.t
	desc = NWpersian.3.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.3" }
	
	option = {
		name = NWpersian.3.a
		ai_chance = {
			factor = 50
		}
		add_political_power = -50
		FROM = { set_country_flag = PER_NWpersian_3a_flag }
		custom_effect_tooltip = PER_NWpersian_3a_tt
	}
	
	option = {
		name = NWpersian.3.b
		ai_chance = {
			factor = 50
		}
		
	}
}

#Беспорядки в Иране // GER
country_event = {
	id = NWpersian.4
	title = NWpersian.3.t
	desc = NWpersian.4.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.4" }
	
	option = {
		name = NWpersian.3.a
		ai_chance = {
			factor = 80
		}
		add_political_power = -50
		FROM = { set_country_flag = PER_NWpersian_4a_flag }
		custom_effect_tooltip = PER_NWpersian_3a_tt
	}
	
	option = {
		name = NWpersian.3.b
		ai_chance = {
			factor = 20
		}
	}
}

#Шиитское духовенство создаёт своё правительство // PER
country_event = {
	id = NWpersian.5
	title = NWpersian.5.t
	desc = NWpersian.5.desc
	picture = GFX_report_event_generic_rally_3
	fire_only_once = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.5" }
	
	mean_time_to_happen = { days = 5 }
	
	trigger = {
		tag = PER
		count_triggers = {
			amount = 2
			has_completed_focus = PER_prohibit_schools_attached_mosques
			has_completed_focus = PER_translate_persian_into_latin
			has_completed_focus = PER_prohibit_wearing_hijabs
		}
	}
	
	option = {
		name = NWpersian.5.a
		ai_chance = {
			factor = 50
		}
		add_stability = -0.1
		start_civil_war = {
			ideology = fascism
			size = 0.5
			states = { 416 410 414 }
		}
		hidden_effect = {
			if = {
				limit = { NOT = { has_completed_focus = PER_weakening_influence_clergy } }
				random_other_country = {
					limit = {
						original_tag = ROOT
						has_government = fascism
					}
					transfer_state = 411
				}
			}
			if = {
				limit = { NOT = { has_completed_focus = PER_weakening_influence_aristocracy } }
				random_other_country = {
					limit = {
						original_tag = ROOT
						has_government = fascism
					}
					transfer_state = 412
				}
			}
			if = {
				limit = { has_country_flag = PER_NWpersian_3a_flag }
				country_event = { id = NWpersian.6 days = 10 }
			}
			if = {
				limit = { has_country_flag = PER_NWpersian_4a_flag }
				country_event = { id = NWpersian.7 days = 10 }
			}
			if = {
				limit = { has_completed_focus = PER_trial_communists }
				country_event = { id = NWpersian.9 days = 14 }
			}
		}
		set_country_flag = PER_last_blow_to_confessors_flag
		effect_tooltip = { unlock_national_focus = PER_last_blow_to_confessors }
	}
	
	option = {
		name = NWpersian.5.b
		ai_chance = {
			factor = 50
		}
		add_popularity = {
			ideology = fascism
			popularity = 0.3
		}
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
		}
		if = {
			limit = { has_country_flag = PER_NWpersian_3a_flag }
			start_civil_war = {
				ideology = neutrality
				size = 0.5
				states = { 416 410 414 }
			}
			random_other_country = {
				limit = {
					original_tag = ROOT
					NOT = { tag = ROOT }
				}
				ENG = {
					set_autonomy = {
						target = PREV
						autonomy_state = autonomy_colony
					}
				}
			}
		}
		else = {
			start_civil_war = {
				ideology = monarchy
				size = 0.5
				states = { 416 410 414 }
			}
		}
		hidden_effect = {
			if = {
				limit = { NOT = { has_completed_focus = PER_weakening_influence_clergy } }
				random_other_country = {
					limit = {
						original_tag = ROOT
						NOT = { tag = ROOT }
					}
					transfer_state = 411
				}
			}
			if = {
				limit = { NOT = { has_completed_focus = PER_weakening_influence_aristocracy } }
				random_other_country = {
					limit = {
						original_tag = ROOT
						NOT = { tag = ROOT }
					}
					transfer_state = 412
				}
			}
			if = {
				limit = { has_completed_focus = PER_trial_communists }
				country_event = { id = NWpersian.9 days = 14 }
			}
		}
		set_country_flag = PER_islamic_revolution_flag
		effect_tooltip = { unlock_national_focus = PER_islamic_revolution }
	}
}

#Военные устраивают государственный переворот! // от ENG PER
country_event = {
	id = NWpersian.6
	title = NWpersian.6.t
	desc = NWpersian.6.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.6" }
	
	option = {
		name = NWpersian.6.a
		complete_national_focus = PER_revolution_probritish_officers
		effect_tooltip = {
			ENG = {
				set_autonomy = {
					target = ROOT
					autonomy_state = autonomy_colony
				}
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.2
			}
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
		}
	}
}

#Военные устраивают государственный переворот! // от GER PER
country_event = {
	id = NWpersian.7
	title = NWpersian.6.t
	desc = NWpersian.7.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.7" }
	
	option = {
		name = NWpersian.6.a
		complete_national_focus = PER_coup_progerman_officers
		effect_tooltip = {
			GER = {
				set_autonomy = {
					target = ROOT
					autonomy_state = autonomy_colony
				}
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.2
			}
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
		}
		set_party_name = { ideology = neutrality long_name = PER_neutrality_german_generals_party name = PER_neutrality_german_generals_party }
		create_country_leader = {
			name = "Ali Mansur"
			desc = ""
			picture = "gfx/leaders/PER/Portrait_Ali_Mansur.dds"
			expire = "1965.1.1"
			ideology = centrism
			traits = {
			}
		}
		hidden_effect = { set_cosmetic_tag = PER_german }
	}
}


#Осквернение Ватикана // решение
country_event = {
	id = NWpersian.8
	title = NWpersian.8.t
	desc = NWpersian.8.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.8" }
	
	option = {
		name = NWpersian.8.a
		add_timed_idea = { idea = PER_desecrate_vatican_op days = 365 }
	}
}

#Коммунисты основали Народную партию Ирана // PER
country_event = {
	id = NWpersian.9
	title = NWpersian.9.t
	desc = NWpersian.9.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.9" }
	
	option = {
		name = NWpersian.9.a
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		set_party_name = { ideology = communism long_name = PER_communism_people_party name = PER_communism_people_party }
	}
}

#Либералы разочаровались в нас // PER
country_event = {
	id = NWpersian.10
	title = NWpersian.10.t
	desc = NWpersian.10.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.10" }
	
	option = {
		name = NWpersian.10.a
		add_popularity = {
			ideology = monarchy
			popularity = -0.2
		}
		add_popularity = {
			ideology = democratic
			popularity = 0.2
		}
	}
}

#Коммунисты безуспешно вносят нестабильность // PER
country_event = {
	id = NWpersian.11
	title = NWpersian.11.t
	desc = NWpersian.11.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.11" }
	
	option = {
		name = NWpersian.11.a
		add_stability = -0.03
	}
}

#Коммунисты собирают под знамёна разочаровавшихся людей // PER
country_event = {
	id = NWpersian.12
	title = NWpersian.12.t
	desc = NWpersian.12.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.12" }
	
	option = {
		name = NWpersian.12.a
		add_timed_idea = { idea = PER_growing_popularity_of_npi days = 365 }
	}
}

#Рост популярности коммунистов в Иране // SOV
country_event = {
	id = NWpersian.13
	title = NWpersian.13.t
	desc = NWpersian.13.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.13" }
	
	option = {
		name = NWpersian.13.a
		ai_chance = {
			factor = 50
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = -500
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment
			amount = -250
		}
		FROM = {
			set_country_flag = PER_NWpersian_13a_flag
			add_popularity = {
				ideology = communism
				popularity = 0.03
			}
		}
	}
	
	option = {
		name = NWpersian.13.b
		ai_chance = {
			factor = 50
		}
	}
}

#Коммунисты пытаются устроить государственный переворот // PER
country_event = {
	id = NWpersian.14
	title = NWpersian.14.t
	desc = NWpersian.14.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.14" }
	
	option = {
		name = NWpersian.14.a
		ai_chance = {
			factor = 50
		}
		start_civil_war = {
			ideology = communism
			size = 0.5
			states = { 419 963 421 420 416 418 }
		}
		hidden_effect = {
			if = {
				limit = { has_country_flag = PER_NWpersian_13a_flag }
				random_other_country = {
					limit = {
						original_tag = ROOT
						has_government = communism
					}
					country_event = { id = NWpersian.15 hours = 3 }
				}
				clr_country_flag = PER_NWpersian_13a_flag
			}
		}
	}
	
	option = {
		name = NWpersian.14.b
		ai_chance = {
			factor = 50
		}
		complete_national_focus = PER_coup_of_peoples_party_iran
		start_civil_war = {
			ideology = monarchy
			size = 0.5
			states = { 410 414 412 411 413 }
		}
		hidden_effect = {
			if = {
				limit = { has_country_flag = PER_NWpersian_13a_flag }
				country_event = { id = NWpersian.15 hours = 3 }
				clr_country_flag = PER_NWpersian_13a_flag
			}
		}
	}
}

#Советская поддержка // SOV
country_event = {
	id = NWpersian.15
	title = NWpersian.15.t
	desc = NWpersian.15.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.15" }
	
	option = {
		name = NWpersian.15.a
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 500
			producer = SOV
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment
			amount = 250
			producer = SOV
		}
		add_opinion_modifier = { target = SOV modifier = PER_soviet_support }
		SOV = { add_opinion_modifier = { target = ROOT modifier = PER_soviet_support } }
	}
}

#Иран требует поставить во главе нашей страны компетентное руководство // AFG
country_event = {
	id = NWpersian.16
	title = NWpersian.16.t
	desc = NWpersian.16.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.16" }
	
	option = {
		name = NWpersian.16.a
		ai_chance = {
			factor = 50
		}
		add_popularity = {
			ideology = communism
			popularity = 0.35
		}
		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		FROM = { puppet = ROOT }
	}
	
	option = {
		name = NWpersian.16.b
		ai_chance = {
			factor = 50
		}
		hidden_effect = {
			FROM = { country_event = { id = NWpersian.17 days = 1 } }
		}
	}
}

#Пора вводить войска в Афганистан // PER
country_event = {
	id = NWpersian.17
	title = NWpersian.17.t
	desc = NWpersian.17.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.17" }
	
	option = {
		name = NWpersian.17.a
		create_wargoal = {
			type = annex_everything
			target = FROM
		}
		add_ai_strategy = {
			type = antagonize
			id = FROM
			value = 200
		}
		add_ai_strategy = {
			type = conquer
			id = FROM
			value = 200
		}
	}
}

#Тегеран призывает к объединению Ирана и Таджикистана // SOV
country_event = {
	id = NWpersian.18
	title = NWpersian.18.t
	desc = NWpersian.18.desc
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NWpersian.18" }
	
	option = {
		name = NWpersian.18.a
		ai_chance = {
			factor = 50
		}
		
	}
	
	option = {
		name = NWpersian.18.b
		ai_chance = {
			factor = 50
		}
		
	}
}

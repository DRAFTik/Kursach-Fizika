GER_banks_brazil = {

	GER_banks_brazil_support = {

		icon = generic_construction

		visible = {
			NOT = { has_country_flag = BRA_no_german_banks }
		}

		fire_only_once = no
		
		modifier = {
			stability_weekly = 0.005
			consumer_goods_factor = -0.05
		}

		days_remove = 180
		days_re_enable = 300

		cost = 100

		available = {
			NOT = { has_country_flag = BRA_no_german_banks }
			GER = { has_opinion = { target = ROOT value > 49 } }
			NOT = { has_war_with = GER }
        }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_banks_brazil_support"
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				has_stability < 0.6
			}
		}
	}
	
	GER_banks_brazil_close = {

		icon = generic_construction

		fire_only_once = yes

		available = {
		
        }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_banks_brazil_close"
			
			add_political_power = 200
			hidden_effect = {
				set_country_flag = BRA_no_german_banks
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				has_stability < 0.6
			}
		}
	}
}

spain_civil_war_category = {
	GER_support_SPA_infantry_weapons = {

		icon = generic_prepare_civil_war
		
		allowed = {
			original_tag = GER
		}

		available = {
			has_equipment = { infantry_equipment > 1000 }
		}
	
		cost = 50
		days_re_enable = 60
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_support_SPA_infantry_weapons"
			
			send_equipment = {
				equipment = infantry_equipment
				amount = 1000
				target = SPA
			}
		}
		
		ai_will_do = {
			factor = 20
		}
	}
	GER_support_SPA_air_light_fighter = {

		icon = generic_air
		
		allowed = {
			original_tag = GER
		}

		available = {
			has_equipment = { fighter_equipment > 500 }
		}

		cost = 100
		days_re_enable = 90
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_support_SPA_air_light_fighter"
			
			send_equipment = {
				equipment = fighter_equipment
				amount = 500
				target = SPA
			}
		}
		
		ai_will_do = {
			factor = 10
		}
	}
	GER_support_SPA_light_tanks = {

		icon = generic_tank
		
		allowed = {
			original_tag = GER
		}

		available = {
			has_equipment = { light_tank_chassis > 250 }
		}

		cost = 100
		days_re_enable = 90
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_support_SPA_light_tanks"
			
			send_equipment = {
				equipment = light_tank_chassis
				amount = 250
				target = SPA
			}
		}
		
		ai_will_do = {
			factor = 15
		}
	}
	GER_support_SPA_motorized = {

		icon = generic_industry
		
		allowed = {
			original_tag = GER
		}

		available = {
			has_equipment = { motorized_equipment > 500 }
		}

		cost = 50
		days_re_enable = 60
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_support_SPA_motorized"
			
			send_equipment = {
				equipment = motorized_equipment
				amount = 500
				target = SPA
			}
		}
		
		ai_will_do = {
			factor = 20
		}
	}
}

ger_greece_war_category = {
	ger_greece_spawn = {

		icon = decision_ger_reichskommissariats

		available = {
			ITA = { NOT = { is_in_faction_with = GER } }
			OR = {
				AND = {
					GER = { has_war_with = GRE }
					any_of_scopes = {
						array = global.majors
						tooltip = is_major_tt
						has_war_together_with = GRE
						has_capitulated = no
					}
				}
				AND = {
					GER = { has_war_with = CRE }
					any_of_scopes = {
						array = global.majors
						tooltip = is_major_tt
						has_war_together_with = CRE
						has_capitulated = no
					}
				}
			}
		}

		visible = {
			tag = GER
			has_government = fascism
			OR = {
				has_war_with = GRE
				has_war_with = CRE
			}
		}
		
		fire_only_once = yes
		cost = 50
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision ger_greece_spawn"
			
			set_global_flag = ger_form_hel_flag
		}
		
		ai_will_do = {
			factor = 200
		}
	}
}

GER_fighting_remnants_of_nazis_category = {
	GER_spend_sweep_of_cities = {
		icon = decision_eng_install_government
		cancel_trigger = {
			check_variable = { var_nazi_resistance < 1 }
		}
		custom_cost_trigger = {
			set_temp_variable = { var_has_manpower_temp = 500 }
			set_temp_variable = { var_infantry_equipment_temp = 300 }
			has_manpower > var_has_manpower_temp
			has_equipment = { infantry_equipment > var_infantry_equipment_temp }
		}
		custom_cost_text = infantry_equipment_and_manpower_cost
		days_remove = 30
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): remove decision GER_spend_sweep_of_cities"
			set_temp_variable = { var_nazi_resistance_temp = -7 }
			add_to_variable = { var_nazi_resistance = var_nazi_resistance_temp }
			custom_effect_tooltip = GER_var_nazi_resistance_tt
			force_update_dynamic_modifier = yes
			hidden_effect = {
				if = {
					limit = {
						check_variable = { var_nazi_resistance < 1 }
					}
					country_event = { id = NWgermany.34 hours = 4 }
				}
			}
		}
		complete_effect = {
			hidden_effect = {
				add_manpower = -500
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -300
				}
			}
		}
		ai_will_do = {
			factor = 200
		}
	}
	
	GER_arrange_raids_in_rural_areas = {
		icon = decision_generic_scorched_earth
		cancel_trigger = {
			check_variable = { var_nazi_resistance < 1 }
		}
		custom_cost_trigger = {
			set_temp_variable = { var_has_manpower_temp = 750 }
			set_temp_variable = { var_infantry_equipment_temp = 250 }
			has_manpower > var_has_manpower_temp
			has_equipment = { infantry_equipment > var_infantry_equipment_temp }
		}
		custom_cost_text = infantry_equipment_and_manpower_cost
		days_remove = 50
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): remove decision GER_arrange_raids_in_rural_areas"
			set_temp_variable = { var_nazi_resistance_temp = -5 }
			add_to_variable = { var_nazi_resistance = var_nazi_resistance_temp }
			custom_effect_tooltip = GER_var_nazi_resistance_tt
			force_update_dynamic_modifier = yes
			hidden_effect = {
				if = {
					limit = {
						check_variable = { var_nazi_resistance < 1 }
					}
					country_event = { id = NWgermany.34 hours = 4 }
				}
			}
		}
		complete_effect = {
			hidden_effect = {
				add_manpower = -750
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -250
				}
			}
		}
		ai_will_do = {
			factor = 200
		}
	}
	
	GER_spread_anti_nazi_agitation = {
		icon = decision_generic_police_action
		cancel_trigger = {
			check_variable = { var_nazi_resistance < 1 }
		}
		cost = 25
		days_remove = 15
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): remove decision GER_spread_anti_nazi_agitation"
			set_temp_variable = { var_nazi_resistance_temp = -3 }
			add_to_variable = { var_nazi_resistance = var_nazi_resistance_temp }
			custom_effect_tooltip = GER_var_nazi_resistance_tt
			force_update_dynamic_modifier = yes
			hidden_effect = {
				if = {
					limit = {
						check_variable = { var_nazi_resistance < 1 }
					}
					country_event = { id = NWgermany.34 hours = 4 }
				}
			}
		}
		ai_will_do = {
			factor = 35
		}
	}
}

GER_popular_front_category = {
	GER_raise_black_crowds_in_rhineland = {
		icon = POL_looming_peasants_strike
		highlight_states = { highlight_state_targets = { state = 829 } }
		fire_only_once = yes
		
		available = {
			communism > 0.02
		}
		
		cost = 40
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_raise_black_crowds_in_rhineland"
			add_popularity = { ideology = communism popularity = -0.02 }
			add_popularity = { ideology = anarchism popularity = 0.04 }
			var:global.province_controllers^9482 = {
				if = {
					limit = { NOT = { tag = ROOT } }
					add_popularity = { ideology = anarchism popularity = 0.02 }
				}
			}
			var:global.province_controllers^6570 = {
				if = {
					limit = { NOT = { tag = ROOT } }
					add_popularity = { ideology = anarchism popularity = 0.02 }
				}
			}
			effect_tooltip = {
				829 = {
					create_unit = {
						division = "name = \"Rote Miliz\" division_template = \"Rote Miliz\" start_experience_factor = 0.3"
						owner = ROOT
						count = 2
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			hidden_effect = {
				set_province_controller = 9482
				set_province_controller = 6570
				if = {
					limit = { NOT = { has_template = "Black Crowds" } }
					division_template = {
						name = "Black Crowds"
						is_locked = yes

						division_names_group = GER_Inf_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
				load_oob = GER_black_crowds_in_rhineland
			}
		}
		ai_will_do = {
			factor = 50
		}
	}
	GER_raise_black_crowds_in_saxony = {
		icon = POL_looming_peasants_strike
		highlight_states = { highlight_state_targets = { state = 65 } }
		fire_only_once = yes
		
		available = {
			communism > 0.02
		}
		
		cost = 40
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_raise_black_crowds_in_saxony"
			add_popularity = { ideology = communism popularity = -0.02 }
			add_popularity = { ideology = anarchism popularity = 0.04 }
			var:global.province_controllers^9471 = {
				if = {
					limit = { NOT = { tag = ROOT } }
					add_popularity = { ideology = anarchism popularity = 0.02 }
				}
			}
			var:global.province_controllers^13779 = {
				if = {
					limit = { NOT = { tag = ROOT } }
					add_popularity = { ideology = anarchism popularity = 0.02 }
				}
			}
			effect_tooltip = {
				65 = {
					create_unit = {
						division = "name = \"Rote Miliz\" division_template = \"Rote Miliz\" start_experience_factor = 0.3"
						owner = ROOT
						count = 2
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			hidden_effect = {
				set_province_controller = 9471
				set_province_controller = 13779
				if = {
					limit = { NOT = { has_template = "Black Crowds" } }
					division_template = {
						name = "Black Crowds"
						is_locked = yes

						division_names_group = GER_Inf_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
				load_oob = GER_black_crowds_in_saxony
			}
		}
		ai_will_do = {
			factor = 30
		}
	}
	GER_raise_black_crowds_in_berlin = {
		icon = POL_looming_peasants_strike
		highlight_states = { highlight_state_targets = { state = 64 } }
		fire_only_once = yes
		
		available = {
			communism > 0.01
		}
		
		cost = 25
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_raise_black_crowds_in_berlin"
			add_popularity = { ideology = communism popularity = -0.01 }
			add_popularity = { ideology = anarchism popularity = 0.02 }
			var:global.province_controllers^13790 = {
				if = {
					limit = { NOT = { tag = ROOT } }
					add_popularity = { ideology = anarchism popularity = 0.02 }
				}
			}
			effect_tooltip = {
				64 = {
					create_unit = {
						division = "name = \"Rote Miliz\" division_template = \"Rote Miliz\" start_experience_factor = 0.3"
						owner = ROOT
						count = 1
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			hidden_effect = {
				set_province_controller = 13790
				if = {
					limit = { NOT = { has_template = "Black Crowds" } }
					division_template = {
						name = "Black Crowds"
						is_locked = yes

						division_names_group = GER_Inf_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
				load_oob = GER_black_crowds_in_berlin
			}
		}
		ai_will_do = {
			factor = 75
		}
	}
	GER_contact_social_democratic_underground_of_berlin = {
		icon = generic_political_discourse
		highlight_states = { highlight_state_targets = { state = 64 } }
		fire_only_once = yes
		
		available = {
			communism > 0.01
		}
		
		cost = 25
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_contact_social_democratic_underground_of_berlin"
			add_popularity = { ideology = communism popularity = -0.01 }
			add_popularity = { ideology = democratic popularity = 0.02 }
			var:global.province_controllers^13788 = {
				if = {
					limit = { NOT = { tag = ROOT } }
					add_popularity = { ideology = democratic popularity = 0.02 }
				}
			}
			effect_tooltip = {
				64 = {
					create_unit = {
						division = "name = \"Rote Miliz\" division_template = \"Rote Miliz\" start_experience_factor = 0.3"
						owner = ROOT
						count = 1
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			hidden_effect = {
				set_province_controller = 13788
				if = {
					limit = { NOT = { has_template = "Social Democratic Militia" } }
					division_template = {
						name = "Social Democratic Militia"
						is_locked = yes

						division_names_group = GER_Inf_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
				load_oob = GER_social_democratic_underground_of_berlin
			}
		}
		ai_will_do = {
			factor = 75
		}
	}
	GER_contact_social_democratic_underground_of_rhineland = {
		icon = generic_political_discourse
		highlight_states = { highlight_state_targets = { state = 809 } }
		fire_only_once = yes
		
		available = {
			communism > 0.02
		}
		
		cost = 40
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_contact_social_democratic_underground_of_rhineland"
			add_popularity = { ideology = communism popularity = -0.02 }
			add_popularity = { ideology = democratic popularity = 0.04 }
			var:global.province_controllers^11531 = {
				if = {
					limit = { NOT = { tag = ROOT } }
					add_popularity = { ideology = democratic popularity = 0.04 }
				}
			}
			effect_tooltip = {
				809 = {
					create_unit = {
						division = "name = \"Rote Miliz\" division_template = \"Rote Miliz\" start_experience_factor = 0.3"
						owner = ROOT
						count = 2
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			hidden_effect = {
				set_province_controller = 11531
				if = {
					limit = { NOT = { has_template = "Social Democratic Militia" } }
					division_template = {
						name = "Social Democratic Militia"
						is_locked = yes

						division_names_group = GER_Inf_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
				load_oob = GER_social_democratic_underground_of_rhineland
			}
		}
		ai_will_do = {
			factor = 150
		}
	}
	GER_form_social_democratic_militia = {
		icon = generic_political_discourse
		highlight_states = { highlight_state_targets = { state = 59 } }
		fire_only_once = yes
		
		available = {
			communism > 0.01
		}
		
		cost = 25
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): complete decision GER_form_social_democratic_militia"
			add_popularity = { ideology = communism popularity = -0.01 }
			add_popularity = { ideology = democratic popularity = 0.02 }
			var:global.province_controllers^6349 = {
				if = {
					limit = { NOT = { tag = ROOT } }
					add_popularity = { ideology = democratic popularity = 0.02 }
				}
			}
			effect_tooltip = {
				59 = {
					create_unit = {
						division = "name = \"Rote Miliz\" division_template = \"Rote Miliz\" start_experience_factor = 0.3"
						owner = ROOT
						count = 1
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			hidden_effect = {
				set_province_controller = 6349
				if = {
					limit = { NOT = { has_template = "Social Democratic Militia" } }
					division_template = {
						name = "Social Democratic Militia"
						is_locked = yes

						division_names_group = GER_Inf_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
				load_oob = GER_social_democratic_militia
			}
		}
		ai_will_do = {
			factor = 300
		}
	}
}

GER_guerrilla_tactics_category = {
	GER_form_headquarters_of_partisan_movement = {
		icon = generic_army_support
		fire_only_once = yes
		
		days_remove = 20
		
		custom_cost_trigger = {
			set_temp_variable = { command_power_temp_cost = 20 }
			command_power > command_power_temp_cost
		}
		custom_cost_text = command_power_cost
		
		complete_effect = {
			hidden_effect = {
				add_command_power = -20
			}
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): remove decision GER_form_headquarters_of_partisan_movement"
			swap_ideas = {
				remove_idea = GER_guerrilla_tactics
				add_idea = GER_guerrilla_tactics2
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	GER_coordinate_actions_of_militia_with_headquarters = {
		icon = POL_looming_peasants_strike
		fire_only_once = yes
		
		days_remove = 25
		
		available = {
			NOT = { has_idea = GER_absence_of_staff_command }
			has_idea = GER_guerrilla_tactics2
		}
		
		custom_cost_trigger = {
			set_temp_variable = { command_power_temp_cost = 20 }
			command_power > command_power_temp_cost
		}
		custom_cost_text = command_power_cost
		
		complete_effect = {
			hidden_effect = {
				add_command_power = -20
			}
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): remove decision GER_coordinate_actions_of_militia_with_headquarters"
			swap_ideas = {
				remove_idea = GER_guerrilla_tactics2
				add_idea = GER_guerrilla_tactics3
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	GER_improve_our_tactics = {
		icon = generic_operation
		fire_only_once = yes
		
		days_remove = 30
		
		available = {
			has_idea = GER_guerrilla_tactics3
		}
		
		custom_cost_trigger = {
			set_temp_variable = { army_experience_temp_cost = 25 }
			has_army_experience > army_experience_temp_cost
		}
		custom_cost_text = army_experience_cost
		
		complete_effect = {
			hidden_effect = {
				army_experience = -25
			}
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): remove decision GER_improve_our_tactics"
			swap_ideas = {
				remove_idea = GER_guerrilla_tactics3
				add_idea = GER_guerrilla_tactics4
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
}
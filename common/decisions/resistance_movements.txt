@THE_TIME_TO_DIE = 5

resistance_movements = {
	form_a_rebel_army = {

		icon = generic_civil_support

		allowed = {
			always = yes
		}
		
		ai_will_do = {
			factor = 10
		}
		
		available = {
			is_subject = no
		}

		days_remove = 1

		cost = 50

		fire_only_once = no

		visible = {
			has_capitulated = yes
			NOT = { has_country_flag = Form_rebel_army }
		}

		modifier = {
		}

		complete_effect = {
		}

		remove_effect = {
			add_legitimacy = 10
			set_country_flag = Form_rebel_army
			custom_effect_tooltip = formed_rebel_army_tt
			hidden_effect = {
				if = {
					limit = {
						NOT = { check_variable = { var = rebel_infantry_equipment@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = rebel_infantry_equipment@ROOT value = 750 }
				}
				if = {
					limit = {
						NOT = { check_variable = { var = rebel_support_equipment@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = rebel_support_equipment@ROOT value = 100 }
				}
				if = {
					limit = {
						NOT = { check_variable = { var = rebel_artillery_equipment@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = rebel_artillery_equipment@ROOT value = 45 }
				}
				if = {
					limit = {
						NOT = { check_variable = { var = rebel_manpower@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = rebel_manpower@ROOT value = 150 }
					add_var_manpower = yes
					add_to_variable = { var = rebel_manpower@ROOT value = var_statistic@ROOT }
				}
				if = {
					limit = {
						NOT = { check_variable = { var = num_division@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = num_division@ROOT value = 0 }
				}
				if = {
					limit = {
						NOT = { check_variable = { var = num_small_division@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = num_small_division@ROOT value = 0 }
				}
				if = {
					limit = {
						NOT = { check_variable = { var = num_division_trained_1@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = num_division_trained_1@ROOT value = 0 }
				}
				if = {
					limit = {
						NOT = { check_variable = { var = num_division_trained_2@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = num_division_trained_2@ROOT value = 0 }
				}
				if = {
					limit = {
						NOT = { check_variable = { var = num_small_division_trained_1@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = num_small_division_trained_1@ROOT value = 0 }
				}
				if = {
					limit = {
						NOT = { check_variable = { var = num_small_division_trained_2@ROOT value = 0 compare = greater_than } }
					}
					set_variable = { var = num_small_division_trained_2@ROOT value = 0 }
				}
				if = {
					limit = { NOT = { original_tag = POL has_template = "Rebel Division" } }
					division_template = {
						name = "Rebel Division"
						is_locked = yes
						
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
						}
						support = { 
							engineer = { x = 0 y = 0 }
							artillery = { x = 0 y = 1 }
						} 
					}	
					division_template = {
						name = "Light Rebel Division"
						is_locked = yes
						
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
				else_if = {
					limit = { original_tag = POL NOT = { has_template = "Dywizja Armii Krajowej" } NOT = { has_government = communism } }
					division_template = {
						name = "Dywizja Armii Krajowej"
						is_locked = yes
						
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
						}
						support = { 
							engineer = { x = 0 y = 0 }
							artillery = { x = 0 y = 1 }
						} 
					}	
					division_template = {
						name = "Lekka Dywizja Armii Krajowej"
						is_locked = yes
						
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
				else_if = {
					limit = { original_tag = POL NOT = { has_template = "Dywizja Armii Ludowej" } has_government = communism }
					division_template = {
						name = "Dywizja Armii Ludowej"
						is_locked = yes
						
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
						}
						support = { 
							engineer = { x = 0 y = 0 }
							artillery = { x = 0 y = 1 }
						} 
					}	
					division_template = {
						name = "Lekka Dywizja Armii Ludowej"
						is_locked = yes
						
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
				every_country = {
					limit = {
						any_state = {
							is_owned_by = ROOT 
							is_controlled_by = PREV
						}
					}
					country_event = { id = resistance.1 }
				}
				if = {
					limit = { difficulty < 1 }
					add_ideas = resistance_defficulty_0
				}
				else_if = {
					limit = { difficulty < 2 }
					add_ideas = resistance_defficulty_1
				}
				random_army_leader = {
					add_unit_leader_trait = resistance_leader
				}
			}
		}
	}
	
	
	czas_w = {

		icon = generic_civil_support

		allowed = {
			always = yes
		}

		available = {
			 custom_trigger_tooltip = {
				tooltip = czas_w_level_tt	
				OR = {
					NOT = { original_tag = POL }
					AND = { check_variable = { num_division_trained_2@ROOT > 0 } original_tag = POL }
				}
				NOT = { has_idea = resistance_failed }
			 }
		}

		cost = 50

		fire_only_once = no

		visible = {
			 has_country_flag = Form_rebel_army
			 OR = { 
				check_variable = { num_division@ROOT > 0 }
				check_variable = { num_division_trained_1@ROOT > 0 }
				check_variable = { num_division_trained_2@ROOT > 0 }
				check_variable = { num_small_division@ROOT > 0 }
				check_variable = { num_small_division_trained_1@ROOT > 0 }
				check_variable = { num_small_division_trained_2@ROOT > 0 }
			 }
			 any_state = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
			NOT = { has_country_flag = baptized_in_fire }
		}

		complete_effect = {
			custom_effect_tooltip = czas_w_tt
			if = {
				limit = { 
					original_tag = POL
					owns_state = 10
					NOT = { controls_state = 10 }   
					NOT = { has_global_flag = POL_powstanie_warszawskie }
				}
				ROOT = { country_event = { id = resistance.44 } } ### Puk-puk, dzieÅ„ dobry, kurwo 
			}
			hidden_effect = {
				set_country_flag = baptized_in_fire
				
				if = {
					limit = { 
						OR = {
							check_variable = { num_division@ROOT > 0 } 
							check_variable = { num_division_trained_1@ROOT > 0 } 
							check_variable = { num_division_trained_2@ROOT > 0 } 
						}
					}
					country_event = { id = resistance.7 }
				}
				if = {
					limit = { 
						OR = {
							check_variable = { num_small_division@ROOT > 0 } 
							check_variable = { num_small_division_trained_1@ROOT > 0 }
							check_variable = { num_small_division_trained_2@ROOT > 0 }
						}	
					}
					country_event = { id = resistance.8 }
				}
			}
		}

	}
	
	open_magazyn = {

		icon = generic_civil_support

		allowed = {
			always = yes
		}

		fire_only_once = no

		visible = {
			has_country_flag = baptized_in_fire
		}

		complete_effect = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = rebel_infantry_equipment@ROOT
			}
			set_variable = { var = rebel_infantry_equipment@ROOT value = 0 }
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = rebel_support_equipment@ROOT
			}
			set_variable = { var = rebel_support_equipment@ROOT value = 0 }
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = rebel_artillery_equipment@ROOT
			}
			set_variable = { var = rebel_artillery_equipment@ROOT value = 0 }
			add_manpower = rebel_manpower@ROOT
			set_variable = { var = rebel_manpower@ROOT value = 0 }
		}

	}
	
	transfer_light_weapons_to_the_partisans = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			has_equipment = {
				infantry_equipment > 299
			}
		}

		days_remove = 20

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon

		fire_only_once = no

		visible = {
			has_capitulated = yes
			has_country_flag = Form_rebel_army
		}

		modifier = { 
			
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -300
				}
			}
		}

		remove_effect = {
			custom_effect_tooltip = bedzie_dodano_bron_powstancam_tt
			add_to_variable = { var = rebel_infantry_equipment@ROOT value = 300 }
		}
	}
	
	transfer_additional_equipment_to_the_partisans = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			has_equipment = {
				support_equipment_1 > 39
			}
		}

		days_remove = 20

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon

		fire_only_once = no

		visible = {
			has_capitulated = yes
			has_country_flag = Form_rebel_army
		}

		modifier = { 
			
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = support_equipment_1
					amount = -40
				}
			}
		}

		remove_effect = {
			custom_effect_tooltip = bedzie_dodano_support_equipment_powstancam_tt
			add_to_variable = { var = rebel_support_equipment@ROOT value = 40 }
		}
	}
	
	transfer_heavy_weapons_to_the_partisans = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			has_equipment = {
				artillery_equipment > 19
			}
		}

		days_remove = 20

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon

		fire_only_once = no

		visible = {
			has_capitulated = yes
			has_country_flag = Form_rebel_army
		}

		modifier = { 
			
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = -20
				}
			}
		}

		remove_effect = {
			custom_effect_tooltip = bedzie_dodano_rebel_artillery_equipment_powstancam_tt
			add_to_variable = { var = rebel_artillery_equipment@ROOT value = 20 }
		}
	}
	
	recruit_to_the_rebel_army = {

		icon = eng_blackshirt_march

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				is_core_of = ROOT
				NOT = { is_controlled_by = ROOT }
			}
		}

		days_remove = 40

		custom_cost_trigger = {
			NOT = { command_power < 15 }
		}
		custom_cost_text = 15_command_power_texticon

		fire_only_once = no

		visible = {
			has_capitulated = yes
			has_country_flag = Form_rebel_army
		}

		modifier = { 
		}

		complete_effect = {
			add_command_power = -15
		}

		remove_effect = {
			if = {
				limit = {
					check_variable = { var_statistic@ROOT > 0 } 
				}
				custom_effect_tooltip = bedzie_dodano_powstancow_cis_tt
				else = { custom_effect_tooltip = bedzie_dodano_powstancow_tt }
			}
			hidden_effect = {
				add_var_manpower = yes
				add_to_variable = { var = rebel_manpower@ROOT value = var_statistic@ROOT }
			}
		}
	}
	
	attack_on_an_enemy_officer = {

		icon = generic_ignite_civil_war

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
		}
		
		cancel_trigger = {
			NOT = {
				any_state = {
					is_owned_by = ROOT
					NOT = { is_controlled_by = ROOT }
				}
			}
		}
		
		days_remove = 1

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon

		fire_only_once = no
		
		fixed_random_seed = no
		
		visible = {
			has_country_flag = Form_rebel_army
		}

		complete_effect = {
			add_command_power = -10
		}

		remove_effect = {
			custom_effect_tooltip = attack_on_an_enemy_officer_tt
			hidden_effect = {
				
				ITS_TIME_TO_DIE = yes
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
					}
					controller = { ITS_TIME_TO_DIE = yes save_event_target_as = GoalCrush }
				}
				
				event_target:GoalCrush = {
					subtract_from_variable = { ROOT.var_second = THIS.var_second }
					
					log = "[Root.GetName]: [?var_second@ROOT]"
					log = "[This.GetName]: [?var_second@THIS]"
					
					if = {
						limit = { check_variable = { var_second@ROOT = -6 } }
						random_list = {
							95 = { country_event = { id = resistance.13 } }
							5 = { country_event = { id = resistance.14 } }
							0 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = -5 } }
						random_list = {
							95 = { country_event = { id = resistance.13 } }
							5 = { country_event = { id = resistance.14 } }
							0 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = -4 } }
						random_list = {
							90 = { country_event = { id = resistance.13 } }
							5 = { country_event = { id = resistance.14 } }
							5 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = -3 } }
						random_list = {
							85 = { country_event = { id = resistance.13 } }
							10 = { country_event = { id = resistance.14 } }
							5 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = -2 } }
						random_list = {
							75 = { country_event = { id = resistance.13 } }
							15 = { country_event = { id = resistance.14 } }
							10 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = -1 } }
						random_list = {
							60 = { country_event = { id = resistance.13 } }
							30 = { country_event = { id = resistance.14 } }
							10 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = 0 } }
						random_list = {
							60 = { country_event = { id = resistance.13 } }
							20 = { country_event = { id = resistance.14 } }
							20 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = 1 } }
						random_list = {
							50 = { country_event = { id = resistance.13 } }
							30 = { country_event = { id = resistance.14 } }
							20 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = 2 } }
						random_list = {
							35 = { country_event = { id = resistance.13 } }
							40 = { country_event = { id = resistance.14 } }
							25 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = 3 } }
						random_list = {
							25 = { country_event = { id = resistance.13 } }
							40 = { country_event = { id = resistance.14 } }
							35 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = 4 } }
						random_list = {
							20 = { country_event = { id = resistance.13 } }
							30 = { country_event = { id = resistance.14 } }
							50 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = 5 } }
						random_list = {
							5 = { country_event = { id = resistance.13 } }
							25 = { country_event = { id = resistance.14 } }
							70 = { country_event = { id = resistance.15 } }
						}
					}
					else_if = {
						limit = { check_variable = { var_second@ROOT = 6 } }
						random_list = {
							5 = { country_event = { id = resistance.13 } }
							10 = { country_event = { id = resistance.14 } }
							85 = { country_event = { id = resistance.15 } }
						}
					}
				}
			}
		}
	}
	
	capture_warehouse = {

		icon = generic_scorched_earth

		allowed = {
			always = yes
		}

		days_remove = 40

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon

		fire_only_once = no

		visible = {
			has_capitulated = yes
			has_country_flag = Form_rebel_army
		}

		modifier = { 
			
		}

		complete_effect = {
			add_command_power = -10
		}

		remove_effect = {
			
		}
	}
	
	undermining_the_industrial_complex = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					check_variable = { THIS.resistance > 0.1 }
				}
				industrial_complex > 0
			}
		}

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_industrial_complex }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				industrial_complex > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						industrial_complex > 0
					}
					set_state_flag = undermining_the_industrial_complex_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_industrial_complex
		}
	}
	
	resist_undermining_the_industrial_complex = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_industrial_complex_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					industrial_complex > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_industrial_complex_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						industrial_complex < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_industrial_complex_flag 
					}
					clr_state_flag = undermining_the_industrial_complex_flag
					# controller = { remove_mission = contr_undermining_the_industrial_complex }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_industrial_complex_flag 
					}
					# controller = { remove_mission = contr_undermining_the_industrial_complex }
					clr_state_flag = undermining_the_industrial_complex_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_industrial_complex_tt
			hidden_effect = {
				set_country_flag = strike_to_industrial_complex
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_industrial_complex_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_industrial_complex
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_arms_factory = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
				arms_factory > 0
			}
		}
		
		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_arms_factory }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				arms_factory > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						arms_factory > 0
					}
					set_state_flag = undermining_the_arms_factory_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_arms_factory
		}
	}
	
	resist_undermining_the_arms_factory = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_arms_factory_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					arms_factory > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_arms_factory_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						arms_factory < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_arms_factory_flag 
					}
					clr_state_flag = undermining_the_arms_factory_flag
					# controller = { remove_mission = contr_undermining_the_arms_factory }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_arms_factory_flag 
					}
					# controller = { remove_mission = contr_undermining_the_arms_factory }
					clr_state_flag = undermining_the_arms_factory_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_arms_factory_tt
			hidden_effect = {
				set_country_flag = strike_to_arms_factory
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_arms_factory_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_arms_factory
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_dockyard = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
				dockyard > 0
			}
		}

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_dockyard }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				dockyard > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						dockyard > 0
					}
					set_state_flag = undermining_the_dockyard_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_dockyard
		}
	}
	
	resist_undermining_the_dockyard = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_dockyard_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					dockyard > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_dockyard_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						dockyard < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_dockyard_flag 
					}
					clr_state_flag = undermining_the_dockyard_flag
					# controller = { remove_mission = contr_undermining_the_dockyard }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_dockyard_flag 
					}
					# controller = { remove_mission = contr_undermining_the_dockyard }
					clr_state_flag = undermining_the_dockyard_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_dockyard_tt
			hidden_effect = {
				set_country_flag = strike_to_dockyard
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_dockyard_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_dockyard
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_infrastructure = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
			}
		}
		
		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_infrastructure }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
		}
		
		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						is_core_of = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
					}
					set_state_flag = undermining_the_infrastructure_flag
					# controller = { activate_mission = contr_undermining_the_infrastructure }
				}
			}
			activate_mission = resist_undermining_the_infrastructure
		}
	}
	
	resist_undermining_the_infrastructure = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_infrastructure_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_infrastructure_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_infrastructure_flag 
					}
					clr_state_flag = undermining_the_infrastructure_flag
					# controller = { remove_mission = contr_undermining_the_infrastructure }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_infrastructure_flag 
					}
					clr_state_flag = undermining_the_infrastructure_flag
					# controller = { remove_mission = contr_undermining_the_infrastructure }
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_infrastructure_tt
			hidden_effect = {
				set_country_flag = strike_to_infrastructure
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_infrastructure_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_infrastructure
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_aviabase = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
				air_base > 0
			}
		}

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_aviabase }
			any_state = {
				is_owned_by = ROOT
				is_core_of = ROOT
				NOT = { is_controlled_by = ROOT }
				air_base > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						is_core_of = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						air_base > 0
					}
					set_state_flag = undermining_the_aviabase_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_aviabase
		}
	}
	
	resist_undermining_the_aviabase = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_aviabase_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					air_base > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_aviabase_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						air_base < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_aviabase_flag 
					}
					clr_state_flag = undermining_the_aviabase_flag
					# controller = { remove_mission = contr_undermining_the_aviabase }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_aviabase_flag 
					}
					# controller = { remove_mission = contr_undermining_the_aviabase }
					clr_state_flag = undermining_the_aviabase_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_aviabase_tt
			hidden_effect = {
				set_country_flag = strike_to_aviabase
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_aviabase_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_aviabase
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_nuclear = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
				nuclear_reactor > 0
			}
		}

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_nuclear }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				nuclear_reactor > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						nuclear_reactor > 0
					}
					set_state_flag = undermining_the_nuclear_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_nuclear
		}
		
	}
	
	resist_undermining_the_nuclear = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_nuclear_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					nuclear_reactor > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_nuclear_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						nuclear_reactor < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_nuclear_flag 
					}
					clr_state_flag = undermining_the_nuclear_flag
					# controller = { remove_mission = contr_undermining_the_nuclear }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_nuclear_flag 
					}
					# controller = { remove_mission = contr_undermining_the_nuclear }
					clr_state_flag = undermining_the_nuclear_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_nuclear_tt
			hidden_effect = {
				set_country_flag = strike_to_nuclear
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_nuclear_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_nuclear
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_anti_air_building = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
				anti_air_building > 0
			}
		}

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_anti_air_building }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				anti_air_building > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						anti_air_building > 0
					}
					set_state_flag = undermining_the_anti_air_building_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_anti_air_building
		}
		
	}
	
	resist_undermining_the_anti_air_building = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_anti_air_building_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					anti_air_building > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_anti_air_building_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						anti_air_building < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_anti_air_building_flag 
					}
					clr_state_flag = undermining_the_anti_air_building_flag
					# controller = { remove_mission = contr_undermining_the_anti_air_building }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_anti_air_building_flag 
					}
					# controller = { remove_mission = contr_undermining_the_anti_air_building }
					clr_state_flag = undermining_the_anti_air_building_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_anti_air_building_tt
			hidden_effect = {
				set_country_flag = strike_to_anti_air_building
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_anti_air_building_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_anti_air_building
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_synthetic_refinery = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
				synthetic_refinery > 0
			}
		}
		
		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_synthetic_refinery }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				synthetic_refinery > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						synthetic_refinery > 0
					}
					set_state_flag = undermining_the_synthetic_refinery_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_synthetic_refinery
		}
		
	}
	
	resist_undermining_the_synthetic_refinery = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_synthetic_refinery_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					synthetic_refinery > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_synthetic_refinery_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						synthetic_refinery < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_synthetic_refinery_flag 
					}
					clr_state_flag = undermining_the_synthetic_refinery_flag
					# controller = { remove_mission = contr_undermining_the_synthetic_refinery }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_synthetic_refinery_flag 
					}
					# controller = { remove_mission = contr_undermining_the_synthetic_refinery }
					clr_state_flag = undermining_the_synthetic_refinery_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_synthetic_refinery_tt
			hidden_effect = {
				set_country_flag = strike_to_synthetic_refinery
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_synthetic_refinery_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_synthetic_refinery
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_fuel_silo = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
				fuel_silo > 0
			}
		}

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_fuel_silo }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				fuel_silo > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						fuel_silo > 0
					}
					set_state_flag = undermining_the_fuel_silo_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_fuel_silo
		}
		
	}
	
	resist_undermining_the_fuel_silo = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_fuel_silo_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					fuel_silo > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_fuel_silo_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						fuel_silo < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_fuel_silo_flag 
					}
					clr_state_flag = undermining_the_fuel_silo_flag
					# controller = { remove_mission = contr_undermining_the_fuel_silo }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_fuel_silo_flag 
					}
					# controller = { remove_mission = contr_undermining_the_fuel_silo }
					clr_state_flag = undermining_the_fuel_silo_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_fuel_silo_tt
			hidden_effect = {
				set_country_flag = strike_to_fuel_silo
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_fuel_silo_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_fuel_silo
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_radar_station = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
				radar_station > 0
			}
		}
		
		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_radar_station }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				radar_station > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						radar_station > 0
					}
					set_state_flag = undermining_the_radar_station_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_radar_station
		}
		
	}
	
	resist_undermining_the_radar_station = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_radar_station_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					radar_station > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_radar_station_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						radar_station < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_radar_station_flag 
					}
					clr_state_flag = undermining_the_radar_station_flag
					# controller = { remove_mission = contr_undermining_the_radar_station }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_radar_station_flag 
					}
					# controller = { remove_mission = contr_undermining_the_radar_station }
					clr_state_flag = undermining_the_radar_station_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_radar_station_tt
			hidden_effect = {
				set_country_flag = strike_to_radar_station
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_radar_station_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_radar_station
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	undermining_the_rocket_site = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				custom_trigger_tooltip = {
					tooltip = necessary_resistance_level_tt	
					 check_variable = { THIS.resistance > 0.1 }
				}
				rocket_site > 0
			}
		}

		custom_cost_trigger = {
			NOT = { command_power < 10 }
		}
		custom_cost_text = command_power_texticon
		
		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			NOT = { has_active_mission = resist_undermining_the_rocket_site }
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
				rocket_site > 0
			}
		}

		complete_effect = {
			add_command_power = -10
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						 check_variable = { THIS.resistance > 0.1 }
						rocket_site > 0
					}
					set_state_flag = undermining_the_rocket_site_flag
					# controller = { ITS_TIME_TO_DIE = yes }
				}
			}
			activate_mission = resist_undermining_the_rocket_site
		}
		
	}
	
	resist_undermining_the_rocket_site = {

		allowed = { always = no }

		icon = generic_ignite_civil_war

		available = {
			custom_trigger_tooltip = {
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_rocket_site_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
					}
					rocket_site > 0
				}
			}
		}

		selectable_mission = no
		days_mission_timeout = @THE_TIME_TO_DIE
		is_good = yes

		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = undermining_will_be_canceled_tt	
				any_state = {
					is_owned_by = ROOT
					has_state_flag = undermining_the_rocket_site_flag
					OR = {
						custom_trigger_tooltip = {
							tooltip = minimal_resistance_level_tt	
							check_variable = { THIS.resistance = 0 }
						}
						is_controlled_by = ROOT
						rocket_site < 1
					}
				}
			}
		}
		
		remove_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_rocket_site_flag 
					}
					clr_state_flag = undermining_the_rocket_site_flag
					# controller = { remove_mission = contr_undermining_the_rocket_site }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = { 
						is_owned_by = ROOT
						has_state_flag = undermining_the_rocket_site_flag 
					}
					# controller = { remove_mission = contr_undermining_the_rocket_site }
					clr_state_flag = undermining_the_rocket_site_flag
				}
			}
		}

		timeout_effect = {
			custom_effect_tooltip = strike_to_rocket_site_tt
			hidden_effect = {
				set_country_flag = strike_to_rocket_site
				random_state = {
					limit = {
						is_owned_by = ROOT
						NOT = { is_controlled_by = ROOT }
						has_state_flag = undermining_the_rocket_site_flag
					}
					controller = { 
						GENERAL_STRIKE = yes	
						# remove_mission = contr_undermining_the_rocket_site
					}
				}
			}
		}
		
		fixed_random_seed = no
	}
	
	sabotage_in_fortifications = {
		icon = generic_ignite_civil_war

		allowed = {
			always = yes
		}

		available = {
			NOT = { command_power < 10 }
			has_country_flag = dont_worry_be_happy
		}

		days_remove = 40

		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			any_state = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
		}

		modifier = { 
			
		}

		complete_effect = {
			add_command_power = -10
		}

		remove_effect = {
			
		}
	}
	
	airborne_special_forces_on_the_occupied_territory = {
		icon = eng_puppet_usa

		allowed = {
			always = yes
		}

		available = {
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
			has_tech = paratroopers
		}
		
		cancel_trigger = {
			NOT = {
				any_state = {
					is_owned_by = ROOT
					NOT = { is_controlled_by = ROOT }
				}
			}
		}
		
		days_remove = 60

		custom_cost_trigger = {
			NOT = { command_power < 10 }
			NOT = { has_air_experience < 10 }
		}
		custom_cost_text = avia_command_power_texticon

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			any_state = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
		}

		modifier = {
			encryption_factor = 0.2
			decryption_factor = 0.2
			partisan_effect = 0.5
		}

		complete_effect = {
			add_command_power = -10
			air_experience = -10
		}

		remove_effect = {
			
		}
	}
	
	reserve_division = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = reserve_division_tt	
				check_variable = { rebel_infantry_equipment@ROOT > 609 } 
				check_variable = { rebel_support_equipment@ROOT > 29 } 
				check_variable = { rebel_artillery_equipment@ROOT > 11 } 
				check_variable = { rebel_manpower@ROOT > 6599 } 
			}
		}

		cost = 0

		fire_only_once = no
		
		custom_cost_trigger = {
			NOT = { has_army_experience < 5 }
		}
		custom_cost_text = 5_army_experience_texticon
		
		visible = {
			has_country_flag = Form_rebel_army
			any_state = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
		}

		complete_effect = {
			army_experience = -5
			add_to_variable = { var = rebel_infantry_equipment@ROOT value = -610 }
			add_to_variable = { var = rebel_support_equipment@ROOT value = -30 }
			add_to_variable = { var = rebel_artillery_equipment@ROOT value = -12 }
			add_to_variable = { var = rebel_manpower@ROOT value = -6600 }
			
			add_to_variable = { var = num_division@ROOT value = 1 }
		}
	}
	
	reserve_small_division = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = reserve_small_division_tt	
				check_variable = { rebel_infantry_equipment@ROOT > 399 }
				check_variable = { rebel_manpower@ROOT > 3999 } 
			}
		}

		cost = 0

		fire_only_once = no

		custom_cost_trigger = {
			NOT = { has_army_experience < 5 }
		}
		custom_cost_text = 5_army_experience_texticon
		
		visible = {
			has_country_flag = Form_rebel_army
			any_state = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
		}

		complete_effect = {
			army_experience = -5
			add_to_variable = { var = rebel_infantry_equipment@ROOT value = -400 }
			add_to_variable = { var = rebel_manpower@ROOT value = -4000 }
			
			add_to_variable = { var = num_small_division@ROOT value = 1 }
		}
	}
	
	train_division_1 = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = num_division_tt	
				check_variable = { num_division@ROOT > 0 } 
			}
		}

		cost = 0
		
		days_remove = 60
		
		fire_only_once = no
		
		custom_cost_trigger = {
			NOT = { has_army_experience < 5 }
		}
		custom_cost_text = 5_army_experience_texticon
		
		visible = {
			has_country_flag = Form_rebel_army
			any_state = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
			check_variable = { num_division@ROOT > 0 } 
		}

		complete_effect = {
			army_experience = -5
		}
		
		remove_effect = {
			add_to_variable = { var = num_division@ROOT value = -1 }
			add_to_variable = { var = num_division_trained_1@ROOT value = 1 }
		}
	}
	
	train_division_2 = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = num_add_division_tt	
				check_variable = { num_division_trained_1@ROOT > 0 } 
			}
		}

		cost = 0
		
		days_remove = 60
		
		fire_only_once = no
		
		custom_cost_trigger = {
			NOT = { has_army_experience < 10 }
		}
		custom_cost_text = 10_army_experience_texticon
		
		visible = {
			has_country_flag = Form_rebel_army
			any_state = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
			check_variable = { num_division_trained_1@ROOT > 0 } 
		}

		complete_effect = {
			army_experience = -10
		}
		
		remove_effect = {
			add_to_variable = { var = num_division_trained_1@ROOT value = -1 }
			add_to_variable = { var = num_division_trained_2@ROOT value = 1 }
		}
	}
	
	train_small_division_1 = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = num_small_division_tt	
				check_variable = { num_small_division@ROOT > 0 } 
			}
		}

		cost = 0
		
		days_remove = 60
		
		fire_only_once = no
		
		custom_cost_trigger = {
			NOT = { has_army_experience < 5 }
		}
		custom_cost_text = 5_army_experience_texticon
		
		visible = {
			has_country_flag = Form_rebel_army
			any_state = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
			check_variable = { num_small_division@ROOT > 0 } 
		}

		complete_effect = {
			army_experience = -5
		}
		
		remove_effect = {
			add_to_variable = { var = num_small_division@ROOT value = -1 }
			add_to_variable = { var = num_small_division_trained_1@ROOT value = 1 }
		}
	}
	
	train_small_division_2 = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = num_add_small_division_tt	
				check_variable = { num_small_division_trained_1@ROOT > 0 } 
			}
		}

		cost = 0
		
		days_remove = 60
		
		fire_only_once = no
		
		custom_cost_trigger = {
			NOT = { has_army_experience < 5 }
		}
		custom_cost_text = 5_army_experience_texticon
		
		visible = {
			has_country_flag = Form_rebel_army
			any_state = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
			check_variable = { num_small_division_trained_1@ROOT > 0 } 
		}

		complete_effect = {
			army_experience = -5
		}
		
		remove_effect = {
			add_to_variable = { var = num_small_division_trained_1@ROOT value = -1 }
			add_to_variable = { var = num_small_division_trained_2@ROOT value = 1 }
		}
	}
	
	the_return_home = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			NOT = {
				any_state = {
					is_core_of = ROOT
					is_owned_by = ROOT
					NOT = { is_controlled_by = ROOT }
				}
			}
		}

		cost = 0

		fire_only_once = no

		visible = {
			has_country_flag = Form_rebel_army
			has_capitulated = no
		}

		complete_effect = {
			if = {
				limit = {
					original_tag = POL
					has_global_flag = POL_powstanie_warszawskie
				}
				set_country_flag = dayVinWarszawa
			}
			hidden_effect = {
				if = {
					limit = { 
						OR = { 
							check_variable = { num_division@ROOT > 0 } 
							check_variable = { num_division_trained_1@ROOT > 0 } 
							check_variable = { num_division_trained_2@ROOT > 0 } 
						}
					}
					country_event = { id = resistance.5 }
				}
				if = {
					limit = {
						OR = {
							check_variable = { num_small_division@ROOT > 0 } 
							check_variable = { num_small_division_trained_1@ROOT > 0 } 
							check_variable = { num_small_division_trained_2@ROOT > 0 } 
						}
					}
					country_event = { id = resistance.6 }
				}
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = rebel_infantry_equipment@ROOT
			}
			set_variable = { var = rebel_infantry_equipment@ROOT value = 0 }
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = rebel_support_equipment@ROOT
			}
			set_variable = { var = rebel_support_equipment@ROOT value = 0 }
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = rebel_artillery_equipment@ROOT
			}
			set_variable = { var = rebel_artillery_equipment@ROOT value = 0 }
			add_manpower = rebel_manpower@ROOT
			set_variable = { var = rebel_manpower@ROOT value = 0 }
			
			custom_effect_tooltip = disbanding_divisions_tt
			hidden_effect = {
				random_army_leader = {
					limit = { has_trait = resistance_leader }
					remove_unit_leader_trait = resistance_leader
				}
				if = {
					limit = { has_idea = resistance_defficulty_0 }
					remove_ideas = resistance_defficulty_0
				}
				if = {
					limit = { has_idea = resistance_defficulty_1 }
					remove_ideas = resistance_defficulty_1
				}
				if = {
					limit = { has_idea = resistance_failed }
					remove_ideas = resistance_failed
				}
				if = {
					limit = { has_idea = resistance_failed }
					remove_ideas = resistance_failed
				}
				clr_country_flag = Form_rebel_army
				
				if = {
					limit = { has_template = "Dywizja Armii Krajowej" }
					set_division_template_lock = { division_template = "Dywizja Armii Krajowej" is_locked = no }
				}
				if = {
					limit = { has_template = "Lekka Dywizja Armii Krajowej" }
					set_division_template_lock = { division_template = "Lekka Dywizja Armii Krajowej" is_locked = no }
				}
				if = {
					limit = { has_template = "Dywizja Armii Ludowej" }
					set_division_template_lock = { division_template = "Dywizja Armii Ludowej" is_locked = no }
				}
				if = {
					limit = { has_template = "Lekka Dywizja Armii Ludowej" }
					set_division_template_lock = { division_template = "Lekka Dywizja Armii Ludowej" is_locked = no }
				}
				if = {
					limit = { has_template = "Rebel Division" }
					set_division_template_lock = { division_template = "Rebel Division" is_locked = no }
				}
				if = {
					limit = { has_template = "Light Rebel Division" }
					set_division_template_lock = { division_template = "Light Rebel Division" is_locked = no }
				}
				every_state = {
					limit = {
						has_state_flag = general_resistance
						is_owned_by = ROOT
					}
					clr_state_flag = general_resistance
				}
				if = {
					limit = { original_tag = POL }
					news_event = { id = news.1945 days = 1 }
				}
			}
			add_political_power = 120
		}
	}
}

country_in_exiled_dec = {
	propaganda = {

		icon = hol_radio_oranje

		allowed = {
			always = yes
		}

		available = {
			has_legitimacy > 40
			any_state = {
				is_owned_by = ROOT
				NOT = { is_controlled_by = ROOT }
			}
		}

		days_remove = 90

		cost = 50

		fire_only_once = no

		visible = {
			has_capitulated = yes
			NOT = { has_completed_focus = HOL_request_allied_favors }
		}

		modifier = {
			war_support_weekly = 0.01
			partisan_effect = 0.5
		}

		complete_effect = {
		}

		remove_effect = {
		}
	}

	obtain_dockyard_access = {

		icon = generic_naval

		allowed = {
			always = yes
		}

		available = {
			has_legitimacy > 40
		}

		days_remove = 30

		cost = 75

		fire_only_once = no

		visible = {
			has_capitulated = yes
			check_variable = { var = obtain_dockyard_counter@ROOT value = 3 compare = less_than }
			NOT = { has_completed_focus = HOL_request_allied_favors }
		}

		modifier = {
		}

		complete_effect = {
		}

		remove_effect = {
			add_offsite_building = { type = dockyard level = 2 }
			if = {
				limit = {
					NOT = { check_variable = { var = obtain_dockyard_counter@ROOT value = 0 compare = greater_than } }
				}
				set_variable = { var = obtain_dockyard_counter@ROOT value = 0 }
			}
			add_to_variable = { var = obtain_dockyard_counter@ROOT value = 1 }
			
			if = {
				limit = {
					NOT = {
						any_state = {
							is_controlled_by = ROOT
							free_building_slots = {
								building = naval_base
								size < 10
							}
						}
					}
				}
				custom_effect_tooltip = no_naval_base_tt
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					any_state = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = naval_base
							size < 10
						}
					}
				}
			}
		}
	}

	assemble_air_squadron = {

		icon = generic_air

		allowed = {
			always = yes
		}

		available = {
			has_legitimacy > 40
		}

		days_remove = 45

		cost = 50

		fire_only_once = no

		visible = {
			has_capitulated = yes
			NOT = { has_completed_focus = HOL_request_allied_favors }
		}

		modifier = {
		}

		complete_effect = {
		}

		remove_effect = {
			custom_effect_tooltip = bedzie_dodano_samolot_tt
			hidden_effect = {
				random_country = {
					limit = { is_in_faction_with = ROOT is_faction_leader = yes } 
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 50
					}
					send_equipment = {
						equipment = fighter_equipment
						amount = 50
						target = ROOT
					}
				}
			}
		}

	}

	request_infantry_equipment = {

		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			has_legitimacy > 40
		}

		days_remove = 60

		cost = 50

		fire_only_once = no

		visible = {
			has_capitulated = yes
			NOT = { has_completed_focus = HOL_request_allied_favors }
		}

		modifier = {
		}

		complete_effect = {
		}

		remove_effect = {
			custom_effect_tooltip = bedzie_dodano_bron_tt
			hidden_effect = {
				random_country = {
					limit = { is_in_faction_with = ROOT is_faction_leader = yes } 
				
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2400
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
					send_equipment = {
						equipment = infantry_equipment
						amount = 2400
						target = ROOT
					}
					send_equipment = {
						equipment = support_equipment
						amount = 300
						target = ROOT
					}
					send_equipment = {
						equipment = artillery_equipment
						amount = 100
						target = ROOT
					}
				}
			}
		}

	}

	pull_strings_with_british_industrialists = {

		icon = generic_industry

		allowed = {
			always = yes
		}

		available = {
			has_legitimacy > 40
		}

		days_remove = 60

		cost = 75

		fire_only_once = no

		visible = {
			has_capitulated = yes
			check_variable = { var = industrialists_counter@ROOT value = 3 compare = less_than }
			NOT = { has_completed_focus = HOL_request_allied_favors }
		}

		modifier = {
		}

		complete_effect = {
		}

		remove_effect = {
			add_offsite_building = { type = arms_factory level = 1 }
			add_offsite_building = { type = industrial_complex level = 1 }
			if = {
				limit = {
					NOT = { check_variable = { var = industrialists_counter@ROOT value = 0 compare = greater_than } }
				}
				set_variable = { var = industrialists_counter@ROOT value = 0 }
			}
			add_to_variable = { var = industrialists_counter@ROOT value = 1 }
		}

	}

	request_aid_for_the_engelandvaarders = {

		icon = eng_propaganda_campaigns

		allowed = {
			always = yes
		}

		available = {
			has_legitimacy > 40
		}

		days_remove = 60

		cost = 50

		fire_only_once = no

		visible = {
			has_capitulated = yes
			NOT = { has_completed_focus = HOL_request_allied_favors }
		}

		modifier = {
		}
		
		complete_effect = {
			hidden_effect = {
				set_variable = { add_mans_weekly@ROOT = 0 }
				every_state = {
					limit = {
						is_owned_by = ROOT
						is_core_of = ROOT
					}
					ROOT = { add_to_variable = { add_mans_weekly@ROOT = 150 } }
				}
				clamp_variable = {
					var = add_mans_weekly@ROOT
					min = 750
					max = 16500
				}
			}
		}

		remove_effect = {
			if = {
				limit = { check_variable = { add_mans_weekly@ROOT = 0 } }
				custom_effect_tooltip = bedzie_dodano_manpower_tt
				else = {
					custom_effect_tooltip = bedzie_dodano_pewny_manpower_tt
				}
			}
			hidden_effect = {
				add_manpower = add_mans_weekly@ROOT
			}
		}

	}
	
	purchase_of_convoys = {

		icon = eng_trade_unions_support

		allowed = {
			always = yes
		}

		available = {
			has_legitimacy > 40
		}

		days_remove = 90

		cost = 50

		fire_only_once = no

		visible = {
			has_capitulated = yes
			NOT = { has_completed_focus = HOL_request_allied_favors }
		}

		modifier = {
		}

		complete_effect = {
		}

		remove_effect = {
			custom_effect_tooltip = bedzie_dodano_konwoj_tt
			hidden_effect = {
				random_country = {
					limit = { is_in_faction_with = ROOT is_faction_leader = yes }
					add_equipment_to_stockpile = {
						type = convoy
						amount = 40
					}
					send_equipment = {
						equipment = convoy
						amount = 40
						target = ROOT
					}
				}
			}
		}
		
		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 5
				has_equipment = {
					convoy < 50
				}
			}
			modifier = {
				factor = 0
				any_country = {
					has_war_with = ROOT
					NOT = { 
						any_state = {
							is_controlled_by = PREV
							is_coastal = yes
						}
					}
				}
			}
		}
	}
	
	decryption_technology_exchange = {

		icon = generic_research

		allowed = {
			always = yes
		}

		available = {
			has_legitimacy > 40
		}

		cost = 50

		fire_only_once = yes

		visible = {
			has_country_flag = Form_rebel_army
			is_faction_leader = no
		}

		complete_effect = {
			effect_tooltip = {
				add_tech_bonus = {
					bonus = 1.0
					uses = 1
					category = decryption_tech
				}
			}
			custom_effect_tooltip = leader_must_approve_bonuses
			hidden_effect = { 
				random_country = {
					limit = {
						is_in_faction_with = ROOT
						is_faction_leader = yes
					}
					country_event = { id = resistance.10 hours = 6 }
				}
			}
		}

		remove_effect = {
			
		}
		
		ai_will_do = {
			factor = 1
		}
	}
}

political_actions = {
	crush_warszawa = {

		allowed = {
			always = yes
		}

		available = {
			OR = {
				has_government = fascism
				has_government = communism
				has_government = trozkism
			}
			divisions_in_state = {
				size > 0
				state = 10
			}
		}
		
		fire_only_once = no
		
		days_remove = 7
		
		cost = 0
		
		visible = {
			has_country_flag = prawo_msci
			NOT = { owns_state = 10 }
			controls_state = 10
			NOT = { has_government = democratic }
			10 = { infrastructure > 2 }
		}
		
		cancel_trigger = {
			OR = {
				owns_state = 10
				NOT = { controls_state = 10 }
				NOT = { has_country_flag = prawo_msci }
			}
		}
		
		remove_effect = {
			10 = {
				remove_building = {
					type = infrastructure
					level = 2
				}
				add_manpower = -186000
			}
			if = {
				limit = { 10 = { infrastructure < 4 } }
				set_province_name = { id = 3544 name = THE_FALLEN_WARSZAWA }
				10 = { set_state_flag = fallen_city set_state_category = rural }
			}
		}

		ai_will_do = {
			factor = 10
		}
	}
	
	rebuild_warszawa = {

		allowed = {
			original_tag = POL
		}
		
		fire_only_once = no
		
		days_remove = 210
		
		cost = 0
		
		visible = {
			10 = { 
				has_state_flag = fallen_city 
				is_owned_and_controlled_by = ROOT
			}
			num_of_civilian_factories > 2
		}
		
		modifier = {
			civilian_factory_use = 3
		}
		
		cancel_trigger = {
			10 = { 
				NOT = { has_state_flag = fallen_city }
				NOT = { is_owned_and_controlled_by = ROOT }
			}
			NOT = { num_of_civilian_factories > 2 }
		}
		
		complete_effect = {
			hidden_effect = { set_country_flag = POL_active_decision }
		}
		
		remove_effect = {
			10 = {
				set_building_level = {
					type = infrastructure
					level = 8
					instant_build = yes
				}
				clr_state_flag = fallen_city
				set_state_category = large_city
			}
			reset_province_name = 3544
			clr_country_flag = POL_active_decision
		}

		ai_will_do = {
			factor = 1000
		}
	}
}
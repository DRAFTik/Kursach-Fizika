focus_tree = {
	id = persian_focus

	country = {
		factor = 0
		
		modifier = {
			add = 20
			tag = PER
		}
	}
	
	default = no
	
	continuous_focus_position = { x = 3000 y = 50 }
	
	shared_focus = PER_cut_ties_with_europe
	shared_focus = PER_modernization_at_expense_of_great_powers
	shared_focus = PER_policy_westernization
	shared_focus = PER_fleet_development
	shared_focus = PER_create_air_fleet
	shared_focus = PER_coup_progerman_officers
	shared_focus = PER_primacy_of_army
	shared_focus = PER_weakening_of_warlords
	shared_focus = PER_continue_construction_of_transiranian_road
	
	
	focus = {
		id = PER_study_turkish_experience
		icon = GFX_z_goal_expansion_turkey
		#prerequisite = { focus = PER_right_free_nomination_delegate }
		x = 40
		y = 6
		#relative_position_id = PER_right_free_nomination_delegate

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
			has_completed_focus = PER_right_free_nomination_delegate
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
		}
		bypass = {
			
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_study_turkish_experience"
			add_ideas = PER_study_turkish_experience_idea
			add_timed_idea = { idea = PER_study_turkish_experience_idea2 days = 180 }
			add_opinion_modifier = { target = TUR modifier = PER_study_turkish_experience_op }
			TUR = { add_opinion_modifier = { target = ROOT modifier = PER_study_turkish_experience_op } }
			every_other_country = {
				limit = { has_government = democratic }
				add_opinion_modifier = { target = ROOT modifier = PER_study_turkish_experience_op2 }
				ROOT = { add_opinion_modifier = { target = PREV modifier = PER_study_turkish_experience_op2 } }
			}
		}
	}
	
	focus = {
		id = PER_economic_integration_with_afghanistan
		icon = GFX_z_goal_economic_integration_with_afghanistan
		prerequisite = { focus = PER_study_turkish_experience }
		x = -3
		y = 1
		relative_position_id = PER_study_turkish_experience

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = AFG
			AFG = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = AFG }
				AFG = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_economic_integration_with_afghanistan"
			custom_effect_tooltip = PER_economic_integration_tt
			AFG = { country_event = { id = NWpersian.20 days = 1 } }
		}
	}
	
	focus = {
		id = PER_economic_integration_with_iraq
		icon = GFX_z_goal_economic_integration_with_iraq
		prerequisite = { focus = PER_study_turkish_experience }
		x = -1
		y = 1
		relative_position_id = PER_study_turkish_experience

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = IRQ
			IRQ = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = IRQ }
				IRQ = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_economic_integration_with_iraq"
			custom_effect_tooltip = PER_economic_integration_tt
			IRQ = { country_event = { id = NWpersian.20 days = 1 } }
		}
	}
	
	focus = {
		id = PER_economic_integration_with_turkey
		icon = GFX_z_goal_economic_integration_with_turkey
		prerequisite = { focus = PER_study_turkish_experience }
		x = 1
		y = 1
		relative_position_id = PER_study_turkish_experience

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = TUR
			TUR = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = TUR }
				TUR = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_economic_integration_with_turkey"
			custom_effect_tooltip = PER_economic_integration_tt
			TUR = { country_event = { id = NWpersian.20 days = 1 } }
		}
	}
	
	focus = {
		id = PER_economic_integration_with_egypt
		icon = GFX_z_goal_economic_integration_with_egypt
		prerequisite = { focus = PER_study_turkish_experience }
		x = 3
		y = 1
		relative_position_id = PER_study_turkish_experience

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = EGY
			EGY = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = EGY }
				EGY = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_economic_integration_with_egypt"
			custom_effect_tooltip = PER_economic_integration_tt
			EGY = { country_event = { id = NWpersian.20 days = 1 } }
		}
	}
	
	focus = {
		id = PER_establishment_of_middle_east_economic_union
		icon = GFX_z_goal_establishment_of_middle_east_economic_union
		prerequisite = { focus = PER_economic_integration_with_afghanistan }
		prerequisite = { focus = PER_economic_integration_with_iraq }
		prerequisite = { focus = PER_economic_integration_with_turkey }
		prerequisite = { focus = PER_economic_integration_with_egypt }
		x = 0
		y = 2
		relative_position_id = PER_study_turkish_experience

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 20
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			any_other_country = {
				has_country_flag = PER_economic_integration_flag
			}
		}
		bypass = {
			
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_establishment_of_middle_east_economic_union"
			add_to_tech_sharing_group = PER_middle_east_economic_union_group
			if = {
				limit = { focus_progress = { focus = PER_establishment_of_middle_east_economic_union progress < 0.01 } }
				custom_effect_tooltip = PER_establishment_of_middle_east_economic_union_tt
			}
			else = {
				subtract_from_variable = { economic_integration_var = 1 }
				clamp_variable = {
					var = economic_integration_var
					min = 1
					max = 999
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = economic_integration_var
					add_building_construction = {
						type = industrial_complex
						level = economic_integration_var
						instant_build = yes
					}
				}
				every_other_country = {
					limit = { has_country_flag = PER_economic_integration_flag }
					add_to_tech_sharing_group = PER_middle_east_economic_union_group
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = industrial_complex
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = economic_integration_var
						add_building_construction = {
							type = industrial_complex
							level = economic_integration_var
							instant_build = yes
						}
					}
				}
				clear_variable = economic_integration_var
			}
		}
	}
	
	focus = {
		id = PER_full_confederation
		icon = GFX_z_goal_full_confederation
		prerequisite = { focus = PER_establishment_of_middle_east_economic_union }
		x = 0
		y = 1
		relative_position_id = PER_establishment_of_middle_east_economic_union

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 20
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			any_other_country = {
				has_country_flag = PER_economic_integration_flag
			}
		}
		bypass = {
			
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_full_confederation"
			if = {
				limit = { NOT = { any_other_country = { has_country_flag = PER_economic_integration_flag } } }
				custom_effect_tooltip = PER_full_confederation_tt
			}
			every_other_country = {
				limit = { has_country_flag = PER_economic_integration_flag }
				ROOT = {
					set_autonomy = {
						target = PREV
						autonomy_state = autonomy_dominion
					}
				}
			}
		}
	}
	
}

focus_tree = {
	id = persian_technocratic_focus

	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = PER
			has_country_flag = persian_technocratic_focus_flag
		}
	}
	
	default = no
	
	continuous_focus_position = { x = 3050 y = 50 }
	
	shared_focus = PER_cut_ties_with_europe
	shared_focus = PER_modernization_at_expense_of_great_powers
	shared_focus = PER_policy_westernization
	shared_focus = PER_fleet_development
	shared_focus = PER_create_air_fleet
	shared_focus = PER_coup_progerman_officers
	shared_focus = PER_primacy_of_army
	shared_focus = PER_weakening_of_warlords
	shared_focus = PER_continue_construction_of_transiranian_road
	
	
	focus = {
		id = PER_unique_experience_of_iranian_technocracy
		icon = GFX_goal_generic_production2
		prerequisite = { focus = PER_right_free_nomination_delegate }
		x = 40
		y = 6
		#relative_position_id = PER_right_free_nomination_delegate

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			has_country_flag = persian_technocratic_focus_flag
		}
		available = {
			has_completed_focus = PER_right_free_nomination_delegate
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
		}
		bypass = {
			
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_unique_experience_of_iranian_technocracy"
			add_timed_idea = { idea = PER_promotion_technocracy days = 365 }
			add_ideas = PER_unique_experience_of_iranian_technocracy
		}
	}
	
	focus = {
		id = PER_coerce_afghanistan
		icon = GFX_z_goal_expansion_afgan
		prerequisite = { focus = PER_unique_experience_of_iranian_technocracy }
		x = -3
		y = 1
		relative_position_id = PER_unique_experience_of_iranian_technocracy

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2
				AFG = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.9
					}
				}
			}
			modifier = {
				add = 2
				AFG = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.8
					}
				}
			}
			modifier = {
				add = 2
				AFG = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.7
					}
				}
			}
			modifier = {
				add = 2
				AFG = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.6
					}
				}
			}
			modifier = {
				add = 5
				AFG = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.5
					}
				}
			}
			modifier = {
				add = 5
				AFG = { has_war = yes }
			}
			modifier = {
				add = 15
				AFG = { has_government = ROOT }
			}
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = AFG
			AFG = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = AFG }
				AFG = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_coerce_afghanistan"
			add_named_threat = { 
				threat = 2
				name = PER_coerce_afghanistan
			}
			AFG = { country_event = { id = NWpersian.79 days = 1 } }
			custom_effect_tooltip = needs_dominance_tt
		}
	}
	
	focus = {
		id = PER_coerce_iraq
		icon = GFX_z_goal_expansion_iraq
		prerequisite = { focus = PER_unique_experience_of_iranian_technocracy }
		x = -1
		y = 1
		relative_position_id = PER_unique_experience_of_iranian_technocracy

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2
				IRQ = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.9
					}
				}
			}
			modifier = {
				add = 2
				IRQ = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.8
					}
				}
			}
			modifier = {
				add = 2
				IRQ = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.7
					}
				}
			}
			modifier = {
				add = 2
				IRQ = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.6
					}
				}
			}
			modifier = {
				add = 5
				IRQ = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.5
					}
				}
			}
			modifier = {
				add = 5
				IRQ = { has_war = yes }
			}
			modifier = {
				add = 15
				IRQ = { has_government = ROOT }
			}
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = IRQ
			IRQ = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = IRQ }
				IRQ = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_coerce_iraq"
			add_named_threat = { 
				threat = 2
				name = PER_coerce_iraq
			}
			IRQ = { country_event = { id = NWpersian.79 days = 1 } }
			custom_effect_tooltip = needs_dominance_tt
		}
	}
	
	focus = {
		id = PER_coerce_turkey
		icon = GFX_z_goal_expansion_turkey
		prerequisite = { focus = PER_unique_experience_of_iranian_technocracy }
		x = 1
		y = 1
		relative_position_id = PER_unique_experience_of_iranian_technocracy

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2
				TUR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.9
					}
				}
			}
			modifier = {
				add = 2
				TUR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.8
					}
				}
			}
			modifier = {
				add = 2
				TUR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.7
					}
				}
			}
			modifier = {
				add = 2
				TUR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.6
					}
				}
			}
			modifier = {
				add = 5
				TUR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.5
					}
				}
			}
			modifier = {
				add = 5
				TUR = { has_war = yes }
			}
			modifier = {
				add = 15
				TUR = { has_government = ROOT }
			}
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = TUR
			TUR = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = TUR }
				TUR = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_coerce_turkey"
			add_named_threat = { 
				threat = 2
				name = PER_coerce_turkey
			}
			TUR = { country_event = { id = NWpersian.79 days = 1 } }
			custom_effect_tooltip = needs_dominance_tt
		}
	}
	
	focus = {
		id = PER_coerce_arab_peninsula
		icon = GFX_z_goal_expansion_arab_peninsula
		prerequisite = { focus = PER_unique_experience_of_iranian_technocracy }
		x = 3
		y = 1
		relative_position_id = PER_unique_experience_of_iranian_technocracy

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2
				SAU = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.9
					}
				}
			}
			modifier = {
				add = 2
				SAU = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.8
					}
				}
			}
			modifier = {
				add = 2
				SAU = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.7
					}
				}
			}
			modifier = {
				add = 2
				SAU = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.6
					}
				}
			}
			modifier = {
				add = 5
				SAU = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.5
					}
				}
			}
			modifier = {
				add = 5
				SAU = { has_war = yes }
			}
			modifier = {
				add = 15
				SAU = { has_government = ROOT }
			}
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = SAU
			SAU = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = SAU }
				SAU = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_coerce_arab_peninsula"
			add_named_threat = { 
				threat = 2
				name = PER_coerce_arab_peninsula
			}
			SAU = { country_event = { id = NWpersian.79 days = 1 } }
			custom_effect_tooltip = needs_dominance_tt
		}
	}
	
	focus = {
		id = PER_coerce_yeman
		icon = GFX_z_goal_expansion_yeman
		prerequisite = { focus = PER_coerce_afghanistan }
		prerequisite = { focus = PER_coerce_iraq }
		x = 1
		y = 1
		relative_position_id = PER_coerce_afghanistan

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2
				YEM = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.9
					}
				}
			}
			modifier = {
				add = 2
				YEM = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.8
					}
				}
			}
			modifier = {
				add = 2
				YEM = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.7
					}
				}
			}
			modifier = {
				add = 2
				YEM = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.6
					}
				}
			}
			modifier = {
				add = 5
				YEM = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.5
					}
				}
			}
			modifier = {
				add = 5
				YEM = { has_war = yes }
			}
			modifier = {
				add = 15
				YEM = { has_government = ROOT }
			}
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = YEM
			YEM = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = YEM }
				YEM = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_coerce_yeman"
			add_named_threat = { 
				threat = 2
				name = PER_coerce_yeman
			}
			YEM = { country_event = { id = NWpersian.79 days = 1 } }
			custom_effect_tooltip = needs_dominance_tt
		}
	}
	
	focus = {
		id = PER_coerce_syria
		icon = GFX_z_goal_expansion_syria
		prerequisite = { focus = PER_coerce_iraq }
		prerequisite = { focus = PER_coerce_turkey }
		x = 1
		y = 1
		relative_position_id = PER_coerce_iraq

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2
				SYR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.9
					}
				}
			}
			modifier = {
				add = 2
				SYR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.8
					}
				}
			}
			modifier = {
				add = 2
				SYR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.7
					}
				}
			}
			modifier = {
				add = 2
				SYR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.6
					}
				}
			}
			modifier = {
				add = 5
				SYR = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.5
					}
				}
			}
			modifier = {
				add = 5
				SYR = { has_war = yes }
			}
			modifier = {
				add = 15
				SYR = { has_government = ROOT }
			}
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = SYR
			SYR = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = SYR }
				SYR = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_coerce_syria"
			add_named_threat = { 
				threat = 2
				name = PER_coerce_syria
			}
			SYR = { country_event = { id = NWpersian.79 days = 1 } }
			custom_effect_tooltip = needs_dominance_tt
		}
	}
	
	focus = {
		id = PER_coerce_egypt
		icon = GFX_z_goal_expansion_egypt
		prerequisite = { focus = PER_coerce_turkey }
		prerequisite = { focus = PER_coerce_arab_peninsula }
		x = 1
		y = 1
		relative_position_id = PER_coerce_turkey

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2
				EGY = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.9
					}
				}
			}
			modifier = {
				add = 2
				EGY = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.8
					}
				}
			}
			modifier = {
				add = 2
				EGY = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.7
					}
				}
			}
			modifier = {
				add = 2
				EGY = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.6
					}
				}
			}
			modifier = {
				add = 5
				EGY = {
					strength_ratio = {
						tag = ROOT
						ratio < 0.5
					}
				}
			}
			modifier = {
				add = 5
				EGY = { has_war = yes }
			}
			modifier = {
				add = 15
				EGY = { has_government = ROOT }
			}
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			country_exists = EGY
			EGY = {
				NOT = { has_war_with = ROOT }
				OR = {
					is_subject = no
					has_autonomy_state = autonomy_dominion
					has_autonomy_state = autonomy_satellite
					has_autonomy_state = autonomy_condominium
				}
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = EGY }
				EGY = {
					OR = {
						has_war_with = ROOT
						is_puppet = yes
						is_subject_of = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_coerce_egypt"
			add_named_threat = { 
				threat = 2
				name = PER_coerce_egypt
			}
			EGY = { country_event = { id = NWpersian.79 days = 1 } }
			custom_effect_tooltip = needs_dominance_tt
		}
	}
	
	focus = {
		id = PER_middle_east_technate
		icon = GFX_z_goal_government_engineers
		prerequisite = { focus = PER_coerce_yeman }
		prerequisite = { focus = PER_coerce_syria }
		prerequisite = { focus = PER_coerce_egypt }
		x = 0
		y = 1
		relative_position_id = PER_coerce_syria

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 20
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
			any_other_country = {
				has_country_flag = PER_middle_east_technate_flag
			}
		}
		bypass = {
			
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_middle_east_technate"
			add_to_tech_sharing_group = PER_middle_east_technate_group
			every_other_country = {
				limit = { is_subject_of = ROOT }
				add_to_tech_sharing_group = PER_middle_east_technate_group
			}
			every_other_country = {
				limit = {
					is_subject_of = ROOT
					NOT = {
						tag = TUR
						tag = AFG
						tag = IRQ
						tag = SYR
					}
				}
				add_timed_idea = { idea = PER_middle_east_technate_idea days = 200 }
			}
			if = {
				limit = { TUR = { is_subject_of = ROOT } }
				TUR = { add_timed_idea = { idea = PER_middle_east_technate_idea_tur days = 200 } }
			}
			every_other_country = {
				limit = {
					is_subject_of = ROOT
					OR = {
						tag = AFG
						tag = IRQ
						tag = SYR
					}
				}
				add_timed_idea = { idea = PER_middle_east_technate_idea_afg_irq days = 200 }
			}
			set_rule = { can_create_factions = yes }
			create_faction = PER_middle_east_technate_faction
			set_cosmetic_tag = PER_technat
		}
	}
	
	focus = {
		id = PER_show_world_power_of_iranian_thought
		icon = GFX_z_goal_generic_fire_of_war
		prerequisite = { focus = PER_middle_east_technate }
		x = 0
		y = 1
		relative_position_id = PER_middle_east_technate

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 20
		}
		available = {
			NOT = { has_country_flag = PER_form_prosoviet_government_flag has_country_flag = PER_concessions_for_germanophiles_flag }
		}
		bypass = {
			
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus PER_show_world_power_of_iranian_thought"
			add_ideas = PER_show_world_power_of_iranian_thought_idea
			add_ideas = PER_science_based_iranian_nationalism
			every_other_country = {
				limit = {
					NOT = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
				add_opinion_modifier = { target = ROOT modifier = PER_science_based_iranian_nationalism }
				ROOT = { add_opinion_modifier = { target = PREV modifier = PER_science_based_iranian_nationalism } }
			}
		}
	}
	
}

on_actions = {
	on_capitulation = {
		effect = {
			if = {
				limit = {
					original_tag = POL
					NOT = { has_country_flag = warszawa_porazka }
					NOT = { has_country_flag = warszawa_victory }
					has_civil_war = no
				}
				country_event = { id = poland.exile.1 days = 1 }
			}
		}
	}
	on_puppet = {
		effect = {
			if = {
				limit = {
					original_tag = POL
					BLR = {
						is_puppet_of = POL
					}
				}
				every_unit_leader = {
					limit = {
						OR = {
							has_id = 19822
							has_id = 19828
						}
					}
					set_nationality = BLR
				}
			}
		}
	}
	on_government_change = {
		effect = {			
			if = {
				limit = {
					original_tag = POL
					OR = {
						has_government = communism
						has_government = trozkism
					}
				}
				every_unit_leader = {
					limit = {
						OR = {
							has_id = 19827
							has_id = 19829
						}
					}
					set_nationality = POL
				}
			}
			if = {
				limit = {
					original_tag = POL
					NOT = { has_government = communism }
					NOT = { has_government = trozkism }
				}
				every_unit_leader = {
					limit = {
						OR = {
							has_id = 19827
							has_id = 19829
						}
					}
					set_nationality = SAI
				}
			}
			if = {
				limit = {
					original_tag = POL
					has_government = fascism
					has_completed_focus = POL_victory_in_the_civil_war
				}
				every_army_leader = {
					limit = {
						has_unit_leader_flag = fascists_leader
						has_unit_leader_flag = POL_escape
					}
					set_nationality = POL
					clr_unit_leader_flag = POL_escape
				}
			}
			if = {
				limit = {
					original_tag = POL
					NOT = { has_government = fascism }
					has_completed_focus = POL_victory_in_the_civil_war
				}
                every_army_leader = {
					limit = {
						has_unit_leader_flag = fascists_leader
					}
					set_nationality = SAI
					set_unit_leader_flag = POL_escape
				}
			}
			if = {
				limit = {
					original_tag = POL
					has_government = democratic
					has_completed_focus = POL_new_rzeczpospolita
				}
				every_army_leader = {
					limit = {
						has_unit_leader_flag = democratics_leader
						has_unit_leader_flag = POL_escape
					}
					set_nationality = POL
					clr_unit_leader_flag = POL_escape
				}
			}
			if = {
				limit = {
					original_tag = POL
					NOT = { has_government = democratic }
					has_completed_focus = POL_new_rzeczpospolita
				}
                every_army_leader = {
					limit = {
						has_unit_leader_flag = democratics_leader
					}
					set_nationality = SAI
					set_unit_leader_flag = POL_escape
				}
			}
		}
	}
	on_state_control_changed = {
		effect = { ### Victory in Poland
			if = { ### Warszawa
				limit = {
					tag = POL
					10 = {
						is_controlled_by = ROOT
					}
					NOT = {
						has_country_flag = warszawa_miasto_porazka
					}
				}
				10 = {
					set_state_flag = wyzwolona_ziemia
				}
			}
			if = { ### Gdynia
				limit = {
					tag = POL
					85 = {
						is_controlled_by = ROOT
					}
					NOT = {
						has_country_flag = gdynia_miasto_porazka
					}
				}
				85 = {
					set_state_flag = wyzwolona_ziemia
				}
			}
			if = { ### Krakow
				limit = {
					tag = POL
					88 = {
						is_controlled_by = ROOT
					}
					NOT = {
						has_country_flag = krakow_miasto_porazka
					}
				}
				88 = {
					set_state_flag = wyzwolona_ziemia
				}
			}
			if = { ### Lodz
				limit = {
					tag = POL
					87 = {
						is_controlled_by = ROOT
					}
					NOT = {
						has_country_flag = lodz_miasto_porazka
					}
				}
				87 = {
					set_state_flag = wyzwolona_ziemia
				}
			}
			if = { ### Poznan
				limit = {
					tag = POL
					86 = {
						is_controlled_by = ROOT
					}
					NOT = {
						has_country_flag = poznan_miasto_porazka
					}
				}
				86 = {
					set_state_flag = wyzwolona_ziemia
				}
			}
			if = { ### Belostok
				limit = {
					tag = POL
					774 = {
						is_controlled_by = ROOT
					}
					NOT = {
						has_country_flag = belostok_miasto_porazka
					}
				}
				774 = {
					set_state_flag = wyzwolona_ziemia
				}
			}
		}
	}
	on_civil_war_end = {
		effect = { 
			if = { ### Победа фашистов
				limit = {
					original_tag = POL
					has_government = fascism
					FROM = {
						original_tag = POL
						OR = {
							has_government = communism
							has_government = democratic
						}
					}
				}
				country_event = { id = poland.28 days = 1 }
			}
			if = { ### Победа коммунистов
				limit = {
					FROM = {
						original_tag = POL
						has_government = fascism
					}
					original_tag = POL
					has_government = communism
				}
				country_event = { id = poland.28 days = 1 }
			}
			if = { ### Победа демократов
				limit = {
					FROM = {
						original_tag = POL
						has_government = fascism
					}
					original_tag = POL
					has_government = democratic
				}
				country_event = { id = poland.28 days = 1 }
			}
		}
	}
}


#	THIS FILE IS FOR on_actions SPECIFICALLY FOR THE chinese TAGs

on_actions = { # Общекитайские мехи
	
	# ROOT is new controller, FROM is old controller, FROM.FROM is state ID. 
	on_state_control_changed = { # china_integrate_province
		effect = {
			if = {
				limit = { is_in_array = { global.chinese_state = FROM.FROM } }
				ROOT = { 
					if = {
						limit = { FROM.FROM = { NOT = { is_core_of = PREV } } }
						activate_targeted_decision = { target = FROM.FROM.china_capital_of_province decision = china_integrate_province }
						if = {
							limit = { NOT = { is_in_array = { chinese_integrate_province_state_map = FROM.FROM:china_capital_of_province.id } } }
							for_each_loop = {
								array = FROM.FROM.china_capital_of_province:chinese_province
								value = state
								
								add_to_array = { chinese_integrate_province_state_map = state }
							}
						}
					}
				}
				FROM = {
					if = {
						limit = { 
							all_of = {
								array = FROM.FROM.chinese_province
								value = state
								
								NOT = { controls_state = var:state }
							} 
						}
						remove_targeted_decision = { target = FROM.FROM.china_capital_of_province decision = china_integrate_province }
						if = {
							limit = { is_in_array = { chinese_integrate_province_state_map = FROM.FROM:china_capital_of_province.id } }
							for_each_loop = {
								array = FROM.FROM.china_capital_of_province:chinese_province
								value = state
								
								remove_from_array = { chinese_integrate_province_state_map = state }
							}
						}
					}
				}
				log = "[GetDateText]: [FROM.FROM.GetName] [FROM.FROM.GetID]: check china_integrate_province decision trigger (ROOT: [ROOT.GetTag] FROM: [FROM.GetTag])"
			}
		}
	}
	
	# ROOT is attacker, FROM is defender
	on_war_relation_added = { # attack_against_communists
		effect = {
			if = {
				limit = {
					check_variable = { NW_attack_against_communists > 0 }
					FROM = { has_government = communism }
				}
				set_temp_variable = { enemy = FROM }
				set_attack_against_communists_bonus = yes
			}
			else_if = {
				limit = {
					FROM = { check_variable = { NW_attack_against_communists > 0 } }
					has_government = communism
				}
				FROM = {
					set_temp_variable = { enemy = ROOT }
					set_attack_against_communists_bonus = yes
				}
			}
		}
	}
}

on_actions = { # Китайские страны, с небольшим кол-вом экшонов

	### NGX ###
	
	on_monthly_NGX = {
		effect = {
			if = {
				limit = {
					has_completed_focus = NGX_birth_of_a_new_nation
					NOT = { has_country_flag = NGX_hui_nation_formed }
				}
				if = {
					limit = {
						NOT = { check_variable = { modifier@hui_nationalism_gain = 0 } }
					}
					add_to_variable = { NGX_hui_nationalism = modifier@hui_nationalism_gain }
					clamp_variable = {
						var = NGX_hui_nationalism
						max = 100
						min = 0
					}
				}
				if = {
					limit = {
						check_variable = { NGX_hui_nationalism < 20 }
					}
					remove_ideas = {
						NGX_very_weak_hui_nationalism
						NGX_weak_hui_nationalism
						NGX_growing_hui_nationalism
						NGX_strong_hui_nationalism
					}
					add_ideas = NGX_no_hui_nationalism
					add_ideas = very_low_legitimacy
				}
				if = {
					limit = {
						AND = {
							check_variable = { NGX_hui_nationalism > 20 }
							check_variable = { NGX_hui_nationalism < 41 }
						}
					}
					remove_ideas = {
						NGX_no_hui_nationalism
						NGX_weak_hui_nationalism
						NGX_growing_hui_nationalism
						NGX_strong_hui_nationalism
					}
					add_ideas = NGX_very_weak_hui_nationalism
					add_ideas = low_legitimacy
				}
				if = {
					limit = {
						AND = {
							check_variable = { NGX_hui_nationalism > 40 }
							check_variable = { NGX_hui_nationalism < 61 }
						}
					}
					remove_ideas = {
						NGX_no_hui_nationalism
						NGX_very_weak_hui_nationalism
						NGX_growing_hui_nationalism
						NGX_strong_hui_nationalism
					}
					add_ideas = NGX_weak_hui_nationalism
					add_ideas = normal_legitimacy
				}
				if = {
					limit = {
						AND = {
							check_variable = { NGX_hui_nationalism > 60 }
							check_variable = { NGX_hui_nationalism < 81 }
						}
					}
					remove_ideas = {
						NGX_no_hui_nationalism
						NGX_very_weak_hui_nationalism
						NGX_weak_hui_nationalism
						NGX_strong_hui_nationalism
					}
					add_ideas = NGX_growing_hui_nationalism
				}
				if = {
					limit = {
						check_variable = { NGX_hui_nationalism > 80 }
					}
					remove_ideas = {
						NGX_no_hui_nationalism
						NGX_very_weak_hui_nationalism
						NGX_weak_hui_nationalism
						NGX_growing_hui_nationalism
					}
					add_ideas = NGX_strong_hui_nationalism
				}
			}
		}
	}
	
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					FROM.FROM = {
						has_state_flag = NGX_resistance_to_hui_nationalism_flag
					}
				}
				if = {
					limit = { ROOT = { NOT = { original_tag = NGX } } }
					FROM.FROM = {
						remove_dynamic_modifier = {
							modifier = NGX_resistance_to_hui_nationalism
						}
					}
					add_to_variable = {
						var = NGX.resisting_states
						value = 1
					}
				}
				else_if = {
					limit = {
						ROOT = {
							original_tag = NGX
							has_completed_focus = NGX_birth_of_a_new_nation
							OR = {
								has_idea = NGX_no_hui_nationalism
								has_idea = NGX_very_weak_hui_nationalism
								has_idea = NGX_weak_hui_nationalism
								has_idea = NGX_growing_hui_nationalism
								has_idea = NGX_strong_hui_nationalism
							}
						}
					}
					FROM.FROM = {
						add_dynamic_modifier = {
							modifier = NGX_resistance_to_hui_nationalism
						}
					}
					add_to_variable = {
						var = NGX.resisting_states
						value = -1
					}
				}					
			}
			if = {
				limit = {
					FROM.FROM = { state = 1125 }
				}
				if = {
					limit = { ROOT = { NOT = { original_tag = NGX } } }
					FROM.FROM = {
						remove_dynamic_modifier = {
							modifier = NGX_gansu_autonomy
						}
					}
				}
				else_if = {
					limit = {
						ROOT = {
							original_tag = NGX
							has_character = NGX_ma_hongbin
						}
					}
					FROM.FROM = {
						add_dynamic_modifier = {
							modifier = NGX_gansu_autonomy
						}
					}
				}					
			}
		}
	}
	
	### CSR ###
	
	on_daily_CSR = {
		effect = {
			### УГОЛЬ
			if = {
				limit = {
					NOT = { check_variable = { modifier@coal_gain = 0 } }
				}
				add_to_variable = { coal_var_total = modifier@coal_gain }
			}
		}
	}
	
	### EHB ###
	
	on_startup = {
		effect = {
			if = {
				limit = {
					has_start_date < 1936.01.02
				}
				EHB = {
					country_event = { id = hebei.4 days = 2 }
					country_event = { id = hebei.5 days = 192 }
				}
			}
		}	
	}
	
	### KUM ###
	
	on_startup = {
		effect = {
			#Кумуль стартпак
			if = {
				limit = {
					has_start_date < 1936.1.2
				}
				KUM = {
					country_event = { id = NWkumul.12 days = 5 }		#Исторические очерки
					country_event = { id = NWkumul.13221 days = 638 }	#Прибытие колонны КПК
					country_event = { id = NWkumul.01121 days = 211 }	#Чек дынь. Ежегодный пульсар
				}
				SIK = {
					country_event = { id = NWkumul.13221 days = 638 }	#Прибытие колонны КПК
				}
			}
			if = {
				limit = { # ?
					has_start_date > 1936.1.2
					has_start_date < 1939.9.1
				}
				KUM = {
					country_event = { id = NWkumul.01121 days = 352 }	#Чек дынь. Ежегодный пульсар 
					country_event = { id = NWkumul.1150 days = 1 }		#Урожай середины августа. Пульсар
				}
			}
		}
	}
	
	### TNG ###
	
	on_startup = {
		effect = {
			#Тунганистан стартпак
			if = {
				limit = {
					has_start_date < 1936.1.2
				}
				TNG = {
					country_event = { id = NWtunganistan.0 days = 166 }	#Новости с Тартарии: путешествие из Пекина в Кашмир
					country_event = { id = NWtunganistan.300 days = 486 }	#Терпение кончилось 1 мая 1937
				}
			}
		}
	}
	
	on_daily_TNG = {
		effect = {
			#Опиумная зависимость армии
			if = {
				limit = { num_divisions < 6 }
				set_variable = { opium_var_daily = -4 }
				else_if = {
					limit = { num_divisions < 11 }
					set_variable = { opium_var_daily = -4 }
				}
				else_if = {
					limit = { num_divisions < 25 }
					set_variable = { opium_var_daily = -8 }
				}
				else_if = {
					limit = { num_divisions < 51 }
					set_variable = { opium_var_daily = -16 }
				}
				else_if = {
					limit = { num_divisions > 50 }
					set_variable = { opium_var_daily = -32 }
				}
			}
			if = {
				limit = {
					check_variable = { TNG_opium_total = 0 }
					NOT = { has_idea = TNG_lack_of_opium_for_the_army }
				}
				add_ideas = TNG_lack_of_opium_for_the_army
			}
			if = {
				limit = {
					check_variable = { TNG_opium_total > 0 }
					NOT = { has_dynamic_modifier = { modifier = TNG_army_opium_addiction_dyn } }
				}
				add_dynamic_modifier = { modifier = TNG_army_opium_addiction_dyn }
			}
			if = {
				limit = {
					has_dynamic_modifier = { modifier = TNG_army_opium_addiction_dyn }
					NOT = { check_variable = { modifier@opium_bonus = 0 } }
				}
				add_to_variable = { TNG_opium_total = modifier@opium_bonus }
				clamp_variable = { var = TNG_opium_total min = 0 max = 99999 }
			}
		}
	}
	
	#ROOT = country that joined a war
	on_war = {
		effect = {
			if = {
				limit = {
					tag = TNG
					has_war_with = SIK
					NOT = { has_country_flag = TNG_patience_is_over_flag }
					has_country_leader = { character = TNG_ma_hushan ruling_only = yes }
				}
				country_event = { id = NWtunganistan.3 }
			}
		}
	}
	
	#ROOT is winner #FROM is loser
	on_peaceconference_ended = {
		effect = {
			if = {
				limit = {
					FROM = { tag = SIK }
					ROOT = {
						tag = TNG
						has_completed_focus = TNG_smash_the_traitor_shitsai
					}
				}
				ROOT = {
					set_capital = { state = 617 }
					set_cosmetic_tag = SIK
				}
			}
		}
	}
	
	### XIK ###
	
	on_startup = {
		effect = {
			if = {
				limit = {
					has_start_date < 1936.01.02
				}
				XIK = {
					country_event = { id = NWxikan.1 days = 2 }
				}
			}
		}	
	}
	
	### NEA ###
	
	on_startup = {
		effect = {
			if = {
				limit = {
					has_start_date < 1936.01.02
				}
				NEA = {
					country_event = { id = northeasternarmy.1 days = 4 }
					country_event = { id = northeasternarmy.2 days = 19 }
					activate_mission = NEA_patience_chiang_kai_shek
					if = {
						limit = { is_historical_focus_on = yes } # ??
						country_event = {
							id = northeasternarmy.9
							days = 346						
						}
					}
				}
			}
		}
	}
	
	on_state_control_changed = {
		effect = {
			if = {
				limit = { 
					FROM.FROM = { 
						state = 744 
						is_owned_by = NEA
						NOT = { has_state_flag = CHI_fall_of_xian_flag }
					}
					ROOT = { 
						original_tag = CHI 
						has_war_with = NEA 
						has_country_flag = CHI_the_silence_of_the_young_marshal_flag
					}
				}
				ROOT = { country_event = northeasternarmy.80 }
				FROM.FROM = { set_state_flag = CHI_fall_of_xian_flag }
			}
		}
	}
	
	### KAS ###
	
	on_startup = {
		effect = {
			if = {
				limit = {
					has_start_date < 1936.01.02
				}
				KAS = {
					country_event = { id = NW_KAS.0 days = 138 }
					country_event = { id = NW_KAS.21 days = 2956 }
					country_event = { id = NW_KAS.30 days = 197 }
				}
				SOV = {
					country_event = { id = NW_KAS.31 days = 197 }
				}				
			}
		}
	}
	on_weekly_KAS = {
		effect = {
			if = {
				limit = { has_dynamic_modifier = { modifier = KAS_development_of_infrastructure_for_tourism_modifier } }
				if = {
					limit = { threat > 0.6 }
					set_variable = { KAS_industrial_factory_donations_var = 1 }
				}
				else_if = {
					limit = { threat > 0.3 }
					set_variable = { KAS_industrial_factory_donations_var = 2 }
				}
				else = {
					set_variable = { KAS_industrial_factory_donations_var = 3 }
				}
				force_update_dynamic_modifier = yes
			}
		}
	}
	
	### DZH ###
	
	on_startup = {
		effect = {
			if = {
				limit = {
					has_start_date < 1936.01.02
				}
				DZH = {
					country_event = NW_DZH.27
					country_event = { id = NW_DZH.32 days = 360 }
				}
			}
		}
	}
	on_monthly_DZH = {
		effect = {
			if = {
				limit = { check_variable = { modifier@DZH_kazakh_nationalism_modifier > 0 } }
				add_to_variable = { DZH_kazakh_nationalism_var = modifier@DZH_kazakh_nationalism_modifier }
				DZH_kazakh_nationalism_effect = yes
			}
			if = {
				limit = { has_idea = DZH_transfer_of_ammunition_and_equipment_idea }
				add_equipment_to_stockpile = { type = infantry_equipment amount = 150 producer = USA }
				add_equipment_to_stockpile = { type = support_equipment amount = 90 producer = USA }
			}
			if = {
				limit = { has_idea = DZH_weapons_from_the_kuomintang_idea }
				add_equipment_to_stockpile = { type = infantry_equipment amount = 200 producer = CHI }
			}
			if = {
				limit = { has_idea = DZH_maintaining_our_existence_idea }
				add_equipment_to_stockpile = { type = infantry_equipment amount = 40 producer = MON }
			}
		}
	}
	on_declare_war = {
		effect = {
			if = {
				limit = {
					ROOT = {
						original_tag = DZH
						UYG = { has_character = UYG_Dalelhan_Sugurbaev }
						NOT = { has_country_flag = NW_DZH_events_BLOCK_flag }
					}
				}
				ROOT = {
					set_country_flag = NW_DZH_events_BLOCK_flag
					country_event = { id = NW_DZH.24 days = 1 }
				}
				MON = {
					if = {
						limit = { exists = yes }
						country_event = { id = NW_DZH.26 days = 1 }
					}
				}
			}
		}
	}
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					FROM.FROM = { OR = { state = 654 state = 954 state = 588 } }
					ROOT = {
						original_tag = DZH
						has_completed_focus = DZH_restore_control_over_altai
						has_country_leader = { character = DZH_ospan_batyr ruling_only = yes }
						NOT = { has_country_flag = DZH_restore_control_over_altai_mission_BLOCK_mission_flag }
						OR = {
							has_war_with = 654.owner
							has_war_with = 954.owner
							has_war_with = 588.owner
						}
						OR = {
							AND = {
								controls_state = 654
								controls_state = 954
							}
							AND = {
								controls_state = 654
								controls_state = 588
							}
							AND = {
								controls_state = 954
								controls_state = 588
							}
						}
					}
				}
				ROOT = { activate_mission = DZH_restore_control_over_altai_mission }
			}
		}
	}
	
	### SHX ###
	
	on_startup = {
		effect = {
			if = {
				limit = {
					has_start_date < 1936.01.02
				}
				SHX = {
					country_event = { id = shanxi.1 days = 5 }
				}
			}
		}
	}
	on_declare_war = {
		effect = {
			if = {
				limit = {
					OR = {
						AND = {
							original_tag = SHX
							FROM = { original_tag = JAP }
						}
						AND = {
							original_tag = JAP
							FROM = { original_tag = SHX }
						}
					}
				}
				SHX = {
					country_event = shanxi.14
				}
			}
		}
	}
	
	### GXC ###
	
	on_startup = {
		effect = {
			if = {
				limit = {
					has_start_date < 1936.01.02
				}
				GXC = {
					country_event = { id = guangxi.3 days = 1391 }
				}
			}
		}
	}
	on_declare_war = {
		effect = {
			if = {
				limit = {
					tag = GXC
					FROM = { tag = CHI }
				}
				random_country_with_original_tag = {
					original_tag_to_check = GXC
					country_event = guangxi.1
				}
			}
		}
	}
	on_unit_leader_created = {
		effect = {
			if = {
				limit = {
					FROM = { has_completed_focus = GXC_small_army_groups }
				}
				add_unit_leader_trait = small_army
			}
		}
	}
	
	### YUN ###
	
	on_startup = {
		effect = {
			if = {
				limit = {
					has_start_date < 1936.01.02
				}
				YUN = {
					country_event = { id = yunnan.1 days = 3 }
					country_event = { id = yunnan.2 days = 334 }
				}
			}
		}
	}
	
	### CHI ###
	
	on_weekly_CHI = {
		effect = {
			if = {
				limit = { check_variable = { var = modifier@CHI_unity_of_the_party_modifier_def value = 0 compare = not_equals } }
				add_to_variable = { CHI_unity_of_the_party_var = modifier@CHI_unity_of_the_party_modifier_def }
				CHI_unity_of_the_party_effect = yes
			}
		}
	}
	on_declare_war = {
		effect = {
			if = {
				limit = {
					NOT = { has_global_flag = CHI_struggle_for_guizhou_category_BLOCK_flag }
					OR = {
						AND = {
							FROM = { original_tag = CHI	}
							ROOT = { original_tag = GXC	}
						}
						AND = {
							FROM = { original_tag = GXC	}
							ROOT = { original_tag = CHI	}
						}
					}
					CHI = {
						OR = {
							controls_state = 603
							controls_state = 748
						}
					}
				}
				if = {
					limit = { CHI = { check_variable = { CHI_loyalty_of_the_governor_of_guizhou < 25 } } }
					CHI = { country_event = { id = NW_CHI.7 hours = 12 } }
					GXC = { country_event = { id = NW_CHI.7 hours = 12 } }
				}
				else_if = {
					limit = { CHI = { check_variable = { CHI_loyalty_of_the_governor_of_guizhou > 75 } } }
					CHI = { country_event = { id = NW_CHI.6 hours = 12 } }
					GXC = { country_event = { id = NW_CHI.6 hours = 12 } }
				}
				else = {
					CHI = { country_event = { id = NW_CHI.8 hours = 12 } }
					GXC = { country_event = { id = NW_CHI.8 hours = 12 } }
				}
				set_global_flag = CHI_struggle_for_guizhou_category_BLOCK_flag
			}
		}
	}
	on_army_leader_won_combat = {
		effect = {
			if = {
				limit = { FROM = { original_tag = CHI } }
				if = {
					limit = { ROOT = { is_character = CHI_he_yingqin } }
					FROM = {
						add_to_variable = { CHI_influence_of_he_yingqin_var = 1 }
						add_to_variable = { CHI_influence_of_hu_zongnan_var = -1 }
						add_to_variable = { CHI_influence_of_chen_cheng_var = -1 }
						add_to_variable = { CHI_influence_of_tu_yuming_var = -1 }
						CHI_factionalism_of_the_army_effect = yes
					}
				}
				else_if = {
					limit = { ROOT = { is_character = CHI_hu_zongnan } }
					FROM = {
						add_to_variable = { CHI_influence_of_he_yingqin_var = -1 }
						add_to_variable = { CHI_influence_of_hu_zongnan_var = 1 }
						add_to_variable = { CHI_influence_of_chen_cheng_var = -1 }
						add_to_variable = { CHI_influence_of_tu_yuming_var = -1 }
						CHI_factionalism_of_the_army_effect = yes
					}
				}
				else_if = {
					limit = { ROOT = { is_character = CHI_chen_cheng } }
					FROM = {
						add_to_variable = { CHI_influence_of_he_yingqin_var = -1 }
						add_to_variable = { CHI_influence_of_hu_zongnan_var = -1 }
						add_to_variable = { CHI_influence_of_chen_cheng_var = 1 }
						add_to_variable = { CHI_influence_of_tu_yuming_var = -1 }
						CHI_factionalism_of_the_army_effect = yes
					}
				}
				else_if = {
					limit = { ROOT = { is_character = CHI_tu_yuming } }
					FROM = {
						add_to_variable = { CHI_influence_of_he_yingqin_var = -1 }
						add_to_variable = { CHI_influence_of_hu_zongnan_var = -1 }
						add_to_variable = { CHI_influence_of_chen_cheng_var = -1 }
						add_to_variable = { CHI_influence_of_tu_yuming_var = 1 }
						CHI_factionalism_of_the_army_effect = yes
					}
				}
			}
		}
	}
	
	### FSR ###
	
	on_startup = {
		effect = {
			if = {
				limit = { has_start_date < 1936.01.02 }
				FSR = {
					country_event = NW_FSR.0
					country_event = { id = NW_FSR.22 days = 126 }
				}
				YUN = {
					country_event = { id = NW_FSR.1 days = 15 }
				}
			}
		}
	}
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					ROOT = {
						original_tag = FSR
						has_country_flag = NW_FSR_event_41_flag
						NOT = { has_country_flag = NW_FSR_event_45_BLOCK_flag }
					}
					FROM.FROM = { any_neighbor_state = { state = 760 } }
				}
				ROOT = { country_event = { id = NW_FSR.45 days = 1 } }				#Завершение похода на Синьцзянь
			}
		}	
	}
	on_capitulation = {
		effect = {
			if = {
				limit = {
					ROOT = {
						original_tag = FSR
						has_completed_focus = FSR_turn_to_xinjiang
						NOT = { has_country_flag = NW_FSR_event_41_flag }
						country_exists = PRC
					}
				}
				PRC = { country_event = { id = NW_FSR.46 days = 1 } }				#Гибель армии Западного маршрута
			}
			if = {
				limit = {
					ROOT = { has_country_flag = NW_FSR_event_40_opponent_flag }
					FROM = { original_tag = FSR }
				}
				FROM = {
					set_country_flag = NW_FSR_event_45_BLOCK_flag
					country_event = { id = NW_FSR.44 days = 1 }						#Неожиданный исход событий
				}
			}
		}
	}
	
	### SIK ###
	
	on_startup = {
		effect = {
			if = {
				limit = { has_start_date < 1936.01.02 }
				SIK = {
					country_event = { id = NW_SIK.1 days = 763 }
					country_event = { id = NW_SIK.6 days = 153 }
					country_event = NW_SIK.7
				}
			}
		}
	}
	on_capitulation = {
		effect = {
			if = {
				limit = {
					ROOT = { original_tag = TNG }
					FROM = {
						original_tag = SIK
						has_country_flag = SIK_ma_shengui_flag
					}
				}
				FROM = { country_event = { id = NW_SIK.5 days = 1 } }
			}
		}
	}
	on_declare_war = {
		effect = {
			if = {
				limit = {
					OR = {
						FROM = { original_tag = SIK	}
						ROOT = { original_tag = SIK	}
					}
					SIK = { has_idea = SIK_sending_students_to_the_ussr_idea }
				}
				SIK = {
					swap_ideas = {
						remove_idea = SIK_sending_students_to_the_ussr_idea
						add_idea = SIK_sending_students_to_the_ussr_idea_1
					}
				}
			}
			if = {
				limit = {
					FROM = {
						original_tag = TNG
						has_character = TNG_ma_shenggui
					}
					ROOT = { 
						original_tag = SIK 
						has_country_leader = { character = SIK_Sheng_Shicai ruling_only = yes }
					}	
				}
				ROOT = { country_event = { id = NW_SIK.3 days = 1 }	}
			}
			if = {
				limit = {
					ROOT = {
						original_tag = TNG
						has_character = TNG_ma_shenggui
					}
					FROM = { 
						original_tag = SIK 
						has_country_leader = { character = SIK_Sheng_Shicai ruling_only = yes }
					}
				}
				FROM = { country_event = { id = NW_SIK.3 days = 2 }	}
			}  
			if = {
				limit = { 
					FROM = { original_tag = KAS }
					ROOT = {
						original_tag = SIK
						NOT = { has_country_flag = NW_SIK_event_8_block_flag }
					}
				}
				ROOT = {
					set_country_flag = NW_SIK_event_8_block_flag
					country_event = { id = NW_SIK.8 days = 15 }
				}
			}
			if = {
				limit = { 
					ROOT = { original_tag = KAS }
					FROM = {
						original_tag = SIK
						NOT = { has_country_flag = NW_SIK_event_8_block_flag }
					}
				}
				FROM = {
					set_country_flag = NW_SIK_event_8_block_flag
					country_event = { id = NW_SIK.8 days = 15 }
				}
			}
		}
	}
	on_daily_SIK = { 
		effect = { 
			if = {
				limit = { has_country_flag = SIK_start_collecting_information_on_officials_flag }
				add_to_variable = { SIK_soviet_influence_var = -0.15 }
				SIK_soviet_influence_effect = yes
			}
		}
	}
	
	### HNA ##
	
	on_startup = {
		effect = {
			### HNA start events
			if = {
				limit = {
					has_start_date < 1936.01.02
				}
				HNA = {
					country_event = { id = HNA.1 days = 1 }
				}
			}
		}
	}
	
	on_state_control_changed = {
		effect = {
			if = {
				limit = { 
					FROM.FROM = { state = 750 }
					ROOT = { 
						original_tag = HNA 
						has_country_flag = HNA_rebellion_xiangxi_flag
					}
				}
				ROOT = { activate_mission = HNA_insurrection }
			}
		}
	}
	
	### YCP ##
	
	on_weekly_YCP = {
		effect = {
			if = {
				limit = { has_start_date < 1936.01.02 }
				if = {
					limit = {
						surrender_progress > 0.8 # TODO balance
						has_war_with = MAN
					}
					country_event = ycp.3
				}
				
				if = {
					limit = { has_idea = YCP_communist_logistic_idea }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 21
					}
				}
			}
		}
	}
	
	on_monthly_YCP = {
		effect = {
			if = {
				limit = { has_start_date < 1936.01.02 }
				if = {
					limit = {
						any_neighbor_country = {
							is_literally_china = yes
							NOT = { is_subject_of = JAP } # not japan bitches (MAN CSR EHB)
							OR = { controls_state = 608 controls_state = 1132 } 
						} 
					}
					country_event = { id = ycp.1 }
					country_event = { id = ycp.2 } # TODO days = 1
				}
			}
		}
	}
	
	on_war_relation_added = { # on_declare_war 
		effect = {
			if = {
				limit = {
					OR = {
						AND = {
							FROM = { original_tag = JAP }
							original_tag = CHI
						}
						AND = {
							original_tag = JAP 
							FROM = { original_tag = CHI }
						}
					}
				}
				CHI = { country_event = { id = ycp.5 days = 50 } }
			}
		}
	}
	
	on_join_faction = { 
		effect = {
			if = {
				limit = {
					OR = {
						AND = {
							FROM = { original_tag = PRC }
							original_tag = CHI
						}
						AND = {
							original_tag = PRC
							FROM = { original_tag = CHI }
						}
					}
				}
				CHI = { country_event = { id = ycp.6 days = 30 } }
			}
		}
	}
	
	on_capitulation = {
		effect = {
			if = {
				limit = {
					tag = MAN
					FROM = { tag = YCP }
					is_subject_of = JAP
					NOT = { country_exists = MGM country_exists = CMA }
				}
				JAP = { country_event = ycp.40 }
			}
		}
	}
	
	on_annex = { # on_civil_war_end
		effect = {
			if = {
				limit = {
					FROM = { original_tag = YCP }
					original_tag = MAN
				}
				FROM = { # TODO возвращать в случае повторного появления YCP?
					every_character = { ## FROM characters return to ROOT ##
						limit = {
							OR = {
								is_character = YCP_zeng_qi 
								is_character = YCP_li_huan 
								is_character = YCP_zuo_shunsheng 
							}
						}
						set_nationality = ROOT
						log = "[GetDateText]: [THIS.GetName]: character set_nationality = [Root.GetTag]"
					}
				}
			}
		}
	}
}
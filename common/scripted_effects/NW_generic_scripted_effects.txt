up_state_category = {
	if = {
		limit = {
			OR = {
				has_state_category = wasteland
				has_state_category = tiny_island
				has_state_category = enclave
			}
		}
		set_state_category = pastoral
		add_manpower = 10000
	}
	else_if = {
		limit = {
			OR = {
				has_state_category = small_island
				has_state_category = pastoral
			}
		}
		set_state_category = rural
		add_manpower = 15000
	}
	else_if = {
		limit = {
			has_state_category = rural
		}
		set_state_category = town
		add_manpower = 20000
	}
	else_if = {
		limit = {
			has_state_category = town
		}
		set_state_category = large_town
		add_manpower = 25000
	}
	else_if = {
		limit = {
			has_state_category = large_town
		}
		set_state_category = city
		add_manpower = 35000
	}
	else_if = {
		limit = {
			has_state_category = city
		}
		set_state_category = large_city
		add_manpower = 50000
	}
	else_if = {
		limit = {
			has_state_category = large_city
		}
		set_state_category = metropolis
		add_manpower = 75000
	}
	else_if = {
		limit = {
			has_state_category = metropolis
		}
		set_state_category = megalopolis
		add_manpower = 100000
	}
}

build_civil_factory = {
	if = {
		limit = { check_variable = { total_factory > 1 } }
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		subtract_from_temp_variable = { total_factory = 1 }
		if = {
			limit = { check_variable = { total_factory > 1 } }
			build_civil_factory = yes
		}
	}
}

build_arms_factory = {
	if = {
		limit = { check_variable = { consolidation_empire > 1 } }
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
		subtract_from_temp_variable = { consolidation_empire = 1 }
		if = {
			limit = { check_variable = { consolidation_empire > 1 } }
			build_arms_factory = yes
		}
	}
}

clear_gem_flag = {
	clr_country_flag = generic_investment_in_subject_flag_1
	clr_country_flag = generic_investment_in_subject_flag_2
	clr_country_flag = start_seek_support_flag
	clr_country_flag = accept_call_to_fight_for_independence
	clr_country_flag = declane_call_to_fight_for_independence
	clr_country_flag = is_gem_among_colonies_flag_@THIS
}


clear_anarchism_flag = {
	if = {
		limit = { has_country_flag = anarchism_neutrality_flag }
		clr_country_flag = anarchism_neutrality_flag
	}
	if = {
		limit = { has_country_flag = anarchism_left_flag }
		clr_country_flag = anarchism_left_flag
	}
	if = {
		limit = { has_country_flag = anarchism_right_flag }
		clr_country_flag = anarchism_right_flag
	}
}

generic_expand_recruiting_station_effect = {
	set_state_flag = has_recruiting_station_flag_@ROOT
	if = {
		limit = { NOT = { check_variable = { recruiting_station_var_level = 0 } } }
		add_state_modifier = { modifier = { local_manpower = 0.1 } }
	}
	else = { add_state_modifier = { modifier = { local_manpower = 0.5 } } }
	add_to_variable = { recruiting_station_var_level = 1 }
}


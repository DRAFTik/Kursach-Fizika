up_state_category = {
	if = {
		limit = {
			OR = {
				has_state_category = wasteland
				has_state_category = tiny_island
				has_state_category = enclave
			}
		}
		set_state_category = pastoral
		add_manpower = 10000
	}
	else_if = {
		limit = {
			OR = {
				has_state_category = small_island
				has_state_category = pastoral
			}
		}
		set_state_category = rural
		add_manpower = 15000
	}
	else_if = {
		limit = {
			has_state_category = rural
		}
		set_state_category = town
		add_manpower = 20000
	}
	else_if = {
		limit = {
			has_state_category = town
		}
		set_state_category = large_town
		add_manpower = 25000
	}
	else_if = {
		limit = {
			has_state_category = large_town
		}
		set_state_category = city
		add_manpower = 35000
	}
	else_if = {
		limit = {
			has_state_category = city
		}
		set_state_category = large_city
		add_manpower = 50000
	}
	else_if = {
		limit = {
			has_state_category = large_city
		}
		set_state_category = metropolis
		add_manpower = 75000
	}
	else_if = {
		limit = {
			has_state_category = metropolis
		}
		set_state_category = megalopolis
		add_manpower = 100000
	}
}

build_civil_factory = {
	if = {
		limit = { check_variable = { total_factory > 1 } }
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		subtract_from_temp_variable = { total_factory = 1 }
		if = {
			limit = { check_variable = { total_factory > 1 } }
			build_civil_factory = yes
		}
	}
}

build_arms_factory = {
	if = {
		limit = { check_variable = { consolidation_empire > 1 } }
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
		subtract_from_temp_variable = { consolidation_empire = 1 }
		if = {
			limit = { check_variable = { consolidation_empire > 1 } }
			build_arms_factory = yes
		}
	}
}

clear_gem_flag = {
	clr_country_flag = generic_investment_in_subject_flag_1
	clr_country_flag = generic_investment_in_subject_flag_2
	clr_country_flag = start_seek_support_flag
	clr_country_flag = accept_call_to_fight_for_independence
	clr_country_flag = declane_call_to_fight_for_independence
	clr_country_flag = is_gem_among_colonies_flag_GER
	clr_country_flag = is_gem_among_colonies_flag_ENG
	clr_country_flag = is_gem_among_colonies_flag_SOV
	clr_country_flag = is_gem_among_colonies_flag_SWE
	clr_country_flag = is_gem_among_colonies_flag_FRA
	clr_country_flag = is_gem_among_colonies_flag_LUX
	clr_country_flag = is_gem_among_colonies_flag_BEL
	clr_country_flag = is_gem_among_colonies_flag_HOL
	clr_country_flag = is_gem_among_colonies_flag_CZE
	clr_country_flag = is_gem_among_colonies_flag_POL
	clr_country_flag = is_gem_among_colonies_flag_AUS
	clr_country_flag = is_gem_among_colonies_flag_LIT
	clr_country_flag = is_gem_among_colonies_flag_EST
	clr_country_flag = is_gem_among_colonies_flag_LAT
	clr_country_flag = is_gem_among_colonies_flag_SPR
	clr_country_flag = is_gem_among_colonies_flag_ITA
	clr_country_flag = is_gem_among_colonies_flag_ROM
	clr_country_flag = is_gem_among_colonies_flag_YUG
	clr_country_flag = is_gem_among_colonies_flag_SER
	clr_country_flag = is_gem_among_colonies_flag_SWI
	clr_country_flag = is_gem_among_colonies_flag_TUR
	clr_country_flag = is_gem_among_colonies_flag_GRE
	clr_country_flag = is_gem_among_colonies_flag_ALB
	clr_country_flag = is_gem_among_colonies_flag_NOR
	clr_country_flag = is_gem_among_colonies_flag_DEN
	clr_country_flag = is_gem_among_colonies_flag_BUL
	clr_country_flag = is_gem_among_colonies_flag_POR
	clr_country_flag = is_gem_among_colonies_flag_FIN
	clr_country_flag = is_gem_among_colonies_flag_IRE
	clr_country_flag = is_gem_among_colonies_flag_HUN
	clr_country_flag = is_gem_among_colonies_flag_AFG
	clr_country_flag = is_gem_among_colonies_flag_ARG
	clr_country_flag = is_gem_among_colonies_flag_AST
	clr_country_flag = is_gem_among_colonies_flag_BHU
	clr_country_flag = is_gem_among_colonies_flag_BOL
	clr_country_flag = is_gem_among_colonies_flag_BRA
	clr_country_flag = is_gem_among_colonies_flag_CAN
	clr_country_flag = is_gem_among_colonies_flag_CHI
	clr_country_flag = is_gem_among_colonies_flag_CHL
	clr_country_flag = is_gem_among_colonies_flag_COL
	clr_country_flag = is_gem_among_colonies_flag_COS
	clr_country_flag = is_gem_among_colonies_flag_ECU
	clr_country_flag = is_gem_among_colonies_flag_ELS
	clr_country_flag = is_gem_among_colonies_flag_ETH
	clr_country_flag = is_gem_among_colonies_flag_GUA
	clr_country_flag = is_gem_among_colonies_flag_HON
	clr_country_flag = is_gem_among_colonies_flag_IRQ
	clr_country_flag = is_gem_among_colonies_flag_JAP
	clr_country_flag = is_gem_among_colonies_flag_KOR
	clr_country_flag = is_gem_among_colonies_flag_LIB
	clr_country_flag = is_gem_among_colonies_flag_MEX
	clr_country_flag = is_gem_among_colonies_flag_MEN
	clr_country_flag = is_gem_among_colonies_flag_NEP
	clr_country_flag = is_gem_among_colonies_flag_NIC
	clr_country_flag = is_gem_among_colonies_flag_NZL
	clr_country_flag = is_gem_among_colonies_flag_PAN
	clr_country_flag = is_gem_among_colonies_flag_PER
	clr_country_flag = is_gem_among_colonies_flag_PHI
	clr_country_flag = is_gem_among_colonies_flag_PRU
	clr_country_flag = is_gem_among_colonies_flag_SAF
	clr_country_flag = is_gem_among_colonies_flag_SAU
	clr_country_flag = is_gem_among_colonies_flag_SIA
	clr_country_flag = is_gem_among_colonies_flag_SIK
	clr_country_flag = is_gem_among_colonies_flag_TIB
	clr_country_flag = is_gem_among_colonies_flag_URG
	clr_country_flag = is_gem_among_colonies_flag_VEN
	clr_country_flag = is_gem_among_colonies_flag_YUN
	clr_country_flag = is_gem_among_colonies_flag_USA
	clr_country_flag = is_gem_among_colonies_flag_MON
	clr_country_flag = is_gem_among_colonies_flag_TAN
	clr_country_flag = is_gem_among_colonies_flag_PAR
	clr_country_flag = is_gem_among_colonies_flag_CUB
	clr_country_flag = is_gem_among_colonies_flag_DOM
	clr_country_flag = is_gem_among_colonies_flag_HAI
	clr_country_flag = is_gem_among_colonies_flag_YEM
	clr_country_flag = is_gem_among_colonies_flag_OMA
	clr_country_flag = is_gem_among_colonies_flag_SLO
	clr_country_flag = is_gem_among_colonies_flag_RAJ
	clr_country_flag = is_gem_among_colonies_flag_CRO
	clr_country_flag = is_gem_among_colonies_flag_GXC
	clr_country_flag = is_gem_among_colonies_flag_PRC
	clr_country_flag = is_gem_among_colonies_flag_SHX
	clr_country_flag = is_gem_among_colonies_flag_XSM
	clr_country_flag = is_gem_among_colonies_flag_ICE
	clr_country_flag = is_gem_among_colonies_flag_LEB
	clr_country_flag = is_gem_among_colonies_flag_JOR
	clr_country_flag = is_gem_among_colonies_flag_SYR
	clr_country_flag = is_gem_among_colonies_flag_EGY
	clr_country_flag = is_gem_among_colonies_flag_LBA
	clr_country_flag = is_gem_among_colonies_flag_WGR
	clr_country_flag = is_gem_among_colonies_flag_DDR
	clr_country_flag = is_gem_among_colonies_flag_PAL
	clr_country_flag = is_gem_among_colonies_flag_ISR
	clr_country_flag = is_gem_among_colonies_flag_VIN
	clr_country_flag = is_gem_among_colonies_flag_CAM
	clr_country_flag = is_gem_among_colonies_flag_MAL
	clr_country_flag = is_gem_among_colonies_flag_INS
	clr_country_flag = is_gem_among_colonies_flag_LAO
	clr_country_flag = is_gem_among_colonies_flag_MNT
	clr_country_flag = is_gem_among_colonies_flag_UKR
	clr_country_flag = is_gem_among_colonies_flag_GEO
	clr_country_flag = is_gem_among_colonies_flag_KAZ
	clr_country_flag = is_gem_among_colonies_flag_AZR
	clr_country_flag = is_gem_among_colonies_flag_ARM
	clr_country_flag = is_gem_among_colonies_flag_BLR
	clr_country_flag = is_gem_among_colonies_flag_ANG
	clr_country_flag = is_gem_among_colonies_flag_MZB
	clr_country_flag = is_gem_among_colonies_flag_ZIM
	clr_country_flag = is_gem_among_colonies_flag_COG
	clr_country_flag = is_gem_among_colonies_flag_KEN
	clr_country_flag = is_gem_among_colonies_flag_PAK
	clr_country_flag = is_gem_among_colonies_flag_BOT
	clr_country_flag = is_gem_among_colonies_flag_MAN
	clr_country_flag = is_gem_among_colonies_flag_BAH
	clr_country_flag = is_gem_among_colonies_flag_BAN
	clr_country_flag = is_gem_among_colonies_flag_BLZ
	clr_country_flag = is_gem_among_colonies_flag_BRM
	clr_country_flag = is_gem_among_colonies_flag_CRC
	clr_country_flag = is_gem_among_colonies_flag_GDL
	clr_country_flag = is_gem_among_colonies_flag_GYA
	clr_country_flag = is_gem_among_colonies_flag_JAM
	clr_country_flag = is_gem_among_colonies_flag_KYR
	clr_country_flag = is_gem_among_colonies_flag_MAD
	clr_country_flag = is_gem_among_colonies_flag_MOL
	clr_country_flag = is_gem_among_colonies_flag_PNG
	clr_country_flag = is_gem_among_colonies_flag_PUE
	clr_country_flag = is_gem_among_colonies_flag_QAT
	clr_country_flag = is_gem_among_colonies_flag_SCO
	clr_country_flag = is_gem_among_colonies_flag_SRL
	clr_country_flag = is_gem_among_colonies_flag_SUR
	clr_country_flag = is_gem_among_colonies_flag_TAJ
	clr_country_flag = is_gem_among_colonies_flag_TRI
	clr_country_flag = is_gem_among_colonies_flag_TMS
	clr_country_flag = is_gem_among_colonies_flag_UAE
	clr_country_flag = is_gem_among_colonies_flag_UZB
	clr_country_flag = is_gem_among_colonies_flag_KUW
	clr_country_flag = is_gem_among_colonies_flag_CYP
	clr_country_flag = is_gem_among_colonies_flag_ALG
	clr_country_flag = is_gem_among_colonies_flag_MOR
	clr_country_flag = is_gem_among_colonies_flag_TUN
	clr_country_flag = is_gem_among_colonies_flag_SUD
	clr_country_flag = is_gem_among_colonies_flag_ERI
	clr_country_flag = is_gem_among_colonies_flag_DJI
	clr_country_flag = is_gem_among_colonies_flag_SOM
	clr_country_flag = is_gem_among_colonies_flag_UGA
	clr_country_flag = is_gem_among_colonies_flag_RWA
	clr_country_flag = is_gem_among_colonies_flag_BRD
	clr_country_flag = is_gem_among_colonies_flag_TZN
	clr_country_flag = is_gem_among_colonies_flag_ZAM
	clr_country_flag = is_gem_among_colonies_flag_MLW
	clr_country_flag = is_gem_among_colonies_flag_GAB
	clr_country_flag = is_gem_among_colonies_flag_RCG
	clr_country_flag = is_gem_among_colonies_flag_EQG
	clr_country_flag = is_gem_among_colonies_flag_CMR
	clr_country_flag = is_gem_among_colonies_flag_CAR
	clr_country_flag = is_gem_among_colonies_flag_CHA
	clr_country_flag = is_gem_among_colonies_flag_NGA
	clr_country_flag = is_gem_among_colonies_flag_DAH
	clr_country_flag = is_gem_among_colonies_flag_TOG
	clr_country_flag = is_gem_among_colonies_flag_GHA
	clr_country_flag = is_gem_among_colonies_flag_IVO
	clr_country_flag = is_gem_among_colonies_flag_VOL
	clr_country_flag = is_gem_among_colonies_flag_MLI
	clr_country_flag = is_gem_among_colonies_flag_SIE
	clr_country_flag = is_gem_among_colonies_flag_GNA
	clr_country_flag = is_gem_among_colonies_flag_GNB
	clr_country_flag = is_gem_among_colonies_flag_SEN
	clr_country_flag = is_gem_among_colonies_flag_GAM
	clr_country_flag = is_gem_among_colonies_flag_WLS
	clr_country_flag = is_gem_among_colonies_flag_NGR
	clr_country_flag = is_gem_among_colonies_flag_CSA
	clr_country_flag = is_gem_among_colonies_flag_USB
	clr_country_flag = is_gem_among_colonies_flag_MRT
	clr_country_flag = is_gem_among_colonies_flag_NMB
	clr_country_flag = is_gem_among_colonies_flag_WES
	clr_country_flag = is_gem_among_colonies_flag_CAY
	clr_country_flag = is_gem_among_colonies_flag_MLD
	clr_country_flag = is_gem_among_colonies_flag_FIJ
	clr_country_flag = is_gem_among_colonies_flag_SLV
	clr_country_flag = is_gem_among_colonies_flag_BOS
	clr_country_flag = is_gem_among_colonies_flag_MAC
	clr_country_flag = is_gem_among_colonies_flag_NIR
	clr_country_flag = is_gem_among_colonies_flag_KOS
	clr_country_flag = is_gem_among_colonies_flag_DVR
	clr_country_flag = is_gem_among_colonies_flag_SIB
	clr_country_flag = is_gem_among_colonies_flag_YAK
	clr_country_flag = is_gem_among_colonies_flag_SOR
	clr_country_flag = is_gem_among_colonies_flag_HES
	clr_country_flag = is_gem_among_colonies_flag_SAR
	clr_country_flag = is_gem_among_colonies_flag_BAV
	clr_country_flag = is_gem_among_colonies_flag_SAX
	clr_country_flag = is_gem_among_colonies_flag_PRS
	clr_country_flag = is_gem_among_colonies_flag_VUR
	clr_country_flag = is_gem_among_colonies_flag_HNN
	clr_country_flag = is_gem_among_colonies_flag_TRN
	clr_country_flag = is_gem_among_colonies_flag_WST
	clr_country_flag = is_gem_among_colonies_flag_OLD
	clr_country_flag = is_gem_among_colonies_flag_MDA
	clr_country_flag = is_gem_among_colonies_flag_CRI
	clr_country_flag = is_gem_among_colonies_flag_WAL
	clr_country_flag = is_gem_among_colonies_flag_LIE
	clr_country_flag = is_gem_among_colonies_flag_KPR
	clr_country_flag = is_gem_among_colonies_flag_SDT
	clr_country_flag = is_gem_among_colonies_flag_NCP
	clr_country_flag = is_gem_among_colonies_flag_MLT
	clr_country_flag = is_gem_among_colonies_flag_DNZ
	clr_country_flag = is_gem_among_colonies_flag_RUS
	clr_country_flag = is_gem_among_colonies_flag_ASK
	clr_country_flag = is_gem_among_colonies_flag_QUB
	clr_country_flag = is_gem_among_colonies_flag_HAW
	clr_country_flag = is_gem_among_colonies_flag_CLF
	clr_country_flag = is_gem_among_colonies_flag_TEX
	clr_country_flag = is_gem_among_colonies_flag_HAM
	clr_country_flag = is_gem_among_colonies_flag_VAT
	clr_country_flag = is_gem_among_colonies_flag_ADR
	clr_country_flag = is_gem_among_colonies_flag_MNC
	clr_country_flag = is_gem_among_colonies_flag_SMA
	clr_country_flag = is_gem_among_colonies_flag_TRT
	clr_country_flag = is_gem_among_colonies_flag_GRO
	clr_country_flag = is_gem_among_colonies_flag_BRY
	clr_country_flag = is_gem_among_colonies_flag_ABH
	clr_country_flag = is_gem_among_colonies_flag_FIU
	clr_country_flag = is_gem_among_colonies_flag_VOJ
	clr_country_flag = is_gem_among_colonies_flag_BPL
	clr_country_flag = is_gem_among_colonies_flag_HAT
	clr_country_flag = is_gem_among_colonies_flag_KRD
	clr_country_flag = is_gem_among_colonies_flag_KMX
	clr_country_flag = is_gem_among_colonies_flag_TRK
	clr_country_flag = is_gem_among_colonies_flag_LKA
	clr_country_flag = is_gem_among_colonies_flag_KZN
	clr_country_flag = is_gem_among_colonies_flag_KAR
	clr_country_flag = is_gem_among_colonies_flag_TRA
	clr_country_flag = is_gem_among_colonies_flag_PVG
	clr_country_flag = is_gem_among_colonies_flag_BWI
	clr_country_flag = is_gem_among_colonies_flag_YUC
	clr_country_flag = is_gem_among_colonies_flag_RIO
	clr_country_flag = is_gem_among_colonies_flag_SON
	clr_country_flag = is_gem_among_colonies_flag_KEC
	clr_country_flag = is_gem_among_colonies_flag_AJM
	clr_country_flag = is_gem_among_colonies_flag_PAT
	clr_country_flag = is_gem_among_colonies_flag_BUE
	clr_country_flag = is_gem_among_colonies_flag_RIU
	clr_country_flag = is_gem_among_colonies_flag_JUL
	clr_country_flag = is_gem_among_colonies_flag_PAU
	clr_country_flag = is_gem_among_colonies_flag_SIH
	clr_country_flag = is_gem_among_colonies_flag_XIK
	clr_country_flag = is_gem_among_colonies_flag_SHA
	clr_country_flag = is_gem_among_colonies_flag_TNG
	clr_country_flag = is_gem_among_colonies_flag_UYG
	clr_country_flag = is_gem_among_colonies_flag_KUM
	clr_country_flag = is_gem_among_colonies_flag_SPA
	clr_country_flag = is_gem_among_colonies_flag_ARA
	clr_country_flag = is_gem_among_colonies_flag_TNR
	clr_country_flag = is_gem_among_colonies_flag_CAT
	clr_country_flag = is_gem_among_colonies_flag_BAS
	clr_country_flag = is_gem_among_colonies_flag_GLC
	clr_country_flag = is_gem_among_colonies_flag_SNT
	clr_country_flag = is_gem_among_colonies_flag_ASU
	clr_country_flag = is_gem_among_colonies_flag_CAS
	clr_country_flag = is_gem_among_colonies_flag_NAV
	clr_country_flag = is_gem_among_colonies_flag_SEU
	clr_country_flag = is_gem_among_colonies_flag_SPC
	clr_country_flag = is_gem_among_colonies_flag_ANL
	clr_country_flag = is_gem_among_colonies_flag_VLA
	clr_country_flag = is_gem_among_colonies_flag_GBT
	clr_country_flag = is_gem_among_colonies_flag_GAL
	clr_country_flag = is_gem_among_colonies_flag_WBR
	clr_country_flag = is_gem_among_colonies_flag_PRL
	clr_country_flag = is_gem_among_colonies_flag_CRE
	clr_country_flag = is_gem_among_colonies_flag_HEL
	clr_country_flag = is_gem_among_colonies_flag_EMA
	clr_country_flag = is_gem_among_colonies_flag_SRD
	clr_country_flag = is_gem_among_colonies_flag_SIC
	clr_country_flag = is_gem_among_colonies_flag_VNC
	clr_country_flag = is_gem_among_colonies_flag_TUS
	clr_country_flag = is_gem_among_colonies_flag_MDN
	clr_country_flag = is_gem_among_colonies_flag_LOM
	clr_country_flag = is_gem_among_colonies_flag_RSI
	clr_country_flag = is_gem_among_colonies_flag_NAP
	clr_country_flag = is_gem_among_colonies_flag_PIE
	clr_country_flag = is_gem_among_colonies_flag_EMR
	clr_country_flag = is_gem_among_colonies_flag_LIG
	clr_country_flag = is_gem_among_colonies_flag_TIR
	clr_country_flag = is_gem_among_colonies_flag_ADY
	clr_country_flag = is_gem_among_colonies_flag_KCH
	clr_country_flag = is_gem_among_colonies_flag_KBA
	clr_country_flag = is_gem_among_colonies_flag_OAL
	clr_country_flag = is_gem_among_colonies_flag_ICH
	clr_country_flag = is_gem_among_colonies_flag_DAG
	clr_country_flag = is_gem_among_colonies_flag_DJA
	clr_country_flag = is_gem_among_colonies_flag_ING
	clr_country_flag = is_gem_among_colonies_flag_BRE
	clr_country_flag = is_gem_among_colonies_flag_ESS
	clr_country_flag = is_gem_among_colonies_flag_KRS
	clr_country_flag = is_gem_among_colonies_flag_OXI
	clr_country_flag = is_gem_among_colonies_flag_FRR
	clr_country_flag = is_gem_among_colonies_flag_FRC
	clr_country_flag = is_gem_among_colonies_flag_FIC
	clr_country_flag = is_gem_among_colonies_flag_WLN
	clr_country_flag = is_gem_among_colonies_flag_FLA
	clr_country_flag = is_gem_among_colonies_flag_BDN
	clr_country_flag = is_gem_among_colonies_flag_MKB
	clr_country_flag = is_gem_among_colonies_flag_TKN
	clr_country_flag = is_gem_among_colonies_flag_GMN
	clr_country_flag = is_gem_among_colonies_flag_SAI
	clr_country_flag = is_gem_among_colonies_flag_APG
	clr_country_flag = is_gem_among_colonies_flag_MHB
	clr_country_flag = is_gem_among_colonies_flag_GIL
	clr_country_flag = is_gem_among_colonies_flag_D01
	clr_country_flag = is_gem_among_colonies_flag_D02
	clr_country_flag = is_gem_among_colonies_flag_D03
	clr_country_flag = is_gem_among_colonies_flag_D04
	clr_country_flag = is_gem_among_colonies_flag_D05
	clr_country_flag = is_gem_among_colonies_flag_D06
	clr_country_flag = is_gem_among_colonies_flag_D07
	clr_country_flag = is_gem_among_colonies_flag_D08
	clr_country_flag = is_gem_among_colonies_flag_D09
	clr_country_flag = is_gem_among_colonies_flag_D10
	clr_country_flag = is_gem_among_colonies_flag_D11
	clr_country_flag = is_gem_among_colonies_flag_D12
	clr_country_flag = is_gem_among_colonies_flag_D13
	clr_country_flag = is_gem_among_colonies_flag_D14
	clr_country_flag = is_gem_among_colonies_flag_D15
}


clear_anarchism_flag = {
	if = {
		limit = { has_country_flag = anarchism_neutrality_flag }
		clr_country_flag = anarchism_neutrality_flag
	}
	if = {
		limit = { has_country_flag = anarchism_left_flag }
		clr_country_flag = anarchism_left_flag
	}
	if = {
		limit = { has_country_flag = anarchism_right_flag }
		clr_country_flag = anarchism_right_flag
	}
}


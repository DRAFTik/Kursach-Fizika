#	THIS FILE IS FOR effects SPECIFICALLY FOR THE chinese TAGs

china_integrate_province_Example = { # README
	# активация механики для страны
	activate_china_integrate_province = yes
	set_country_flag = chinese_reunification_flag # решения на завоевания клик (опционально)
	unlock_decision_category_tooltip = chinese_reunification # базовый тултип (опционально)
	
	# изменение параметров, примеры
	add_to_variable = { china_integration_of_province_cost_var = 0.25 tooltip = china_integration_of_province_cost_tooltip } # увеличить стоимость интеграции на 25%, с тултипом
	add_to_variable = { china_integration_of_province_time_var = -0.15 tooltip = china_integration_of_province_time_tooltip } # уменьшить время интеграции на 15%, с тултипом
	
	multiply_variable = { china_integrate_province_cost_array^1 = 0.75 } # уменьшить стоимость интеграции провинции Цинхай на 25% (1-0.25)
	multiply_variable = { china_integrate_province_cost_array^3 = 1.75 } # увеличить стоимость интеграции провинции Нинся на 75% (1+0.75)
	multiply_variable = { china_integrate_province_cost_array^2 = 1.25 } # увеличить стоимость интеграции провинции Ганьсу на 25% (1+0.25)
	# тултип для этого делайте сами
	# индексы ищите в china_integrate_province_set_cost_array в этом же файле
	
	add_to_variable = { china_integrate_province_time_array^0 = 0.25 } # увеличить время интеграции провинции Синьцзянь на 25%
	add_to_variable = { china_integrate_province_time_array^7 = -0.5 } # уменьшить время интеграции провинции Чахар на 50%
	add_to_variable = { china_integrate_province_time_array^35 = 0.3 } # увеличить время интеграции провинции Шанхай на 30%
	# тултип для этого делайте сами
	# обратите внимание, время определяется иначе, чем стоимость!!
}

### SIK ###

SIK_soviet_influence_effect = {
	
	clamp_variable = { var = SIK_soviet_influence_var min = 0 max = 100 }
	hidden_effect = {
		if = {
			limit = {
				check_variable = { SIK_soviet_influence_var < 85 }
				NOT = { has_country_flag = NW_SIK_event_15_block_flag }
			}
			set_country_flag = NW_SIK_event_15_block_flag
			SOV = { country_event = NW_SIK.15 }
		}
		else_if = {
			limit = {
				check_variable = { SIK_soviet_influence_var < 88 }
				NOT = { has_country_flag = NW_SIK_event_14_block_flag }
			}
			set_country_flag = NW_SIK_event_14_block_flag
			country_event = NW_SIK.14
		}	
	}
}

### DZH ###

DZH_kazakh_nationalism_effect = {
	
	clamp_variable = { var = DZH_kazakh_nationalism_var min = 0 }
}

DZH_coalition_government_effect = {
	
	clamp_variable = { min = 0 max = 5  var = DZH_kazakhs_coalition }
	if = {
		limit = { has_completed_focus = DZH_maintain_the_separation_of_the_uighurs }
		clamp_variable = { min = 0 max = 7 var = DZH_uighurs_coalition }
		clamp_variable = { min = 0 max = 7 var = DZH_taranchi_coalition }
	}
	else = {
		clamp_variable = { min = 0 max = 14 var = DZH_uighurs_coalition }
	}
	clamp_variable = { min = 0 max = 2  var = DZH_kyrgyz_coalition }
	clamp_variable = { min = 0 max = 2  var = DZH_han_chinese_coalition }
	clamp_variable = { min = 0 max = 2  var = DZH_russians_svo_z_z_z_coalition }
	clamp_variable = { min = 0 max = 2  var = DZH_mongols_coalition }
	clamp_variable = { min = 0 max = 2  var = DZH_dungan_coalition }
	if = {
		limit = {
			NOT = { has_active_mission = DZH_discontent_of_the_uighurs_mission }
			check_variable = { DZH_uighurs_coalition > 0 }
		}
		activate_mission = DZH_discontent_of_the_uighurs_mission
	}
	if = {
		limit = {
			NOT = { has_active_mission = DZH_discontent_of_other_nations_mission }
			OR = {
				check_variable = { DZH_kazakhs_coalition > 0 }
				check_variable = { DZH_kyrgyz_coalition > 0 }
				check_variable = { DZH_han_chinese_coalition > 0 }
				check_variable = { DZH_russians_svo_z_z_z_coalition > 0 }
				check_variable = { DZH_mongols_coalition > 0 }
				check_variable = { DZH_dungan_coalition > 0 }
				check_variable = { DZH_taranchi_coalition > 0 }
			}
		}
		activate_mission = DZH_discontent_of_other_nations_mission
	}
	#checking sum#
	set_temp_variable = { DZH_kazakhs_coalition_temp = DZH_kazakhs_coalition }
	set_temp_variable = { DZH_uighurs_coalition_temp = DZH_uighurs_coalition }
	set_temp_variable = { DZH_kyrgyz_coalition_temp = DZH_kyrgyz_coalition }
	set_temp_variable = { DZH_han_chinese_coalition_temp = DZH_han_chinese_coalition }
	set_temp_variable = { DZH_russians_svo_z_z_z_coalition_temp = DZH_russians_svo_z_z_z_coalition }
	set_temp_variable = { DZH_mongols_coalition_temp = DZH_mongols_coalition }
	set_temp_variable = { DZH_dungan_coalition_temp = DZH_dungan_coalition }
	add_to_temp_variable = { DZH_kazakhs_coalition_temp = DZH_uighurs_coalition_temp }
	add_to_temp_variable = { DZH_kazakhs_coalition_temp = DZH_kyrgyz_coalition_temp }
	add_to_temp_variable = { DZH_kazakhs_coalition_temp = DZH_han_chinese_coalition_temp }
	add_to_temp_variable = { DZH_kazakhs_coalition_temp = DZH_russians_svo_z_z_z_coalition_temp }
	add_to_temp_variable = { DZH_kazakhs_coalition_temp = DZH_mongols_coalition_temp }
	add_to_temp_variable = { DZH_kazakhs_coalition_temp = DZH_dungan_coalition_temp }
	if = {
		limit = { has_completed_focus = DZH_maintain_the_separation_of_the_uighurs }
		set_temp_variable = { DZH_taranchi_coalition_temp = DZH_taranchi_coalition }
		add_to_temp_variable = { DZH_kazakhs_coalition_temp = DZH_taranchi_coalition_temp }
	}
	set_variable = { DZH_sum_of_coalitions = DZH_kazakhs_coalition_temp }
}

### CHI ###

CHI_factionalism_of_the_party_effect = {
	
	hidden_effect = {
		clamp_variable = { var = CHI_influence_of_the_cc_clique_var min = 0 max = 100 }
		clamp_variable = { var = CHI_influence_of_vampire_clique_var min = 0 max = 100 }
		clamp_variable = { var = CHI_influence_of_the_political_research_clique_var min = 0 max = 100 }
		
		set_temp_variable = { CHI_influence_of_the_cc_clique_var_temp = CHI_influence_of_the_cc_clique_var }
		set_temp_variable = { CHI_influence_of_vampire_clique_var_temp = CHI_influence_of_vampire_clique_var }
		set_temp_variable = { CHI_influence_of_the_political_research_clique_var_temp = CHI_influence_of_the_political_research_clique_var }
		
		divide_temp_variable = { CHI_influence_of_vampire_clique_var_temp = 100 }
		
		divide_temp_variable = { CHI_influence_of_the_political_research_clique_var_temp = 100 }
		divide_temp_variable = { CHI_influence_of_the_cc_clique_var_temp = -200 }
		
		set_variable = { CHI_political_power_factor_var = CHI_influence_of_the_cc_clique_var_temp }
		set_variable = { CHI_political_power_gain_var = CHI_influence_of_the_political_research_clique_var_temp }
		set_variable = { CHI_command_power_gain_mult_var = CHI_influence_of_vampire_clique_var_temp }
		
		multiply_temp_variable = { CHI_influence_of_the_cc_clique_var_temp = -2 }
		divide_temp_variable = { CHI_influence_of_the_cc_clique_var_temp = 10 }
		
		set_variable = { CHI_neutrality_drift_var = CHI_influence_of_the_cc_clique_var_temp }
		
		force_update_dynamic_modifier = yes
	}
}

CHI_factionalism_of_the_army_effect = {
	
	hidden_effect = {
		clamp_variable = { var = CHI_influence_of_he_yingqin_var min = 0 max = 40 }
		clamp_variable = { var = CHI_influence_of_hu_zongnan_var min = 0 max = 40 }
		clamp_variable = { var = CHI_influence_of_chen_cheng_var min = 0 max = 40 }
		clamp_variable = { var = CHI_influence_of_tu_yuming_var min = 0 max = 40 }
	}
}

CHI_corruption_effect = {
	
	hidden_effect = {
		clamp_variable = { var = CHI_corruption_var min = 0 max = 100 }
		
		set_temp_variable = { CHI_corruption_var_temp = CHI_corruption_var }
		divide_temp_variable = { CHI_corruption_var_temp = -100 }	
		set_variable = { CHI_political_power_factor_var_3 = CHI_corruption_var_temp }
		set_variable = { CHI_industrial_capacity_factory_var_2 = CHI_corruption_var_temp }
		set_variable = { CHI_industrial_capacity_dockyard_var_2 = CHI_corruption_var_temp }
		set_variable = { CHI_land_reinforce_rate_var_2 = CHI_corruption_var_temp }		
		divide_temp_variable = { CHI_corruption_var_temp = 2 }		
		set_variable = { CHI_stability_factor_var_2 = CHI_corruption_var_temp }
		set_variable = { CHI_war_support_factor_var_2 = CHI_corruption_var_temp }		
		divide_temp_variable = { CHI_corruption_var_temp = 5 }
		set_variable = { CHI_army_org_factor_var_2 = CHI_corruption_var_temp }				
	}
}

CHI_inflation_rise_effect = {

	if = {
		limit = { has_idea = CHI_hyperinflation_idea }
		add_political_power = -150
	}
	else_if = {
		limit = { has_idea = CHI_high_inflation_idea }
		swap_ideas = {
			remove_idea = CHI_high_inflation_idea
			add_idea = CHI_hyperinflation_idea
		}
	}
	else_if = {
		limit = { has_idea = CHI_increased_inflation_idea }
		swap_ideas = {
			remove_idea = CHI_increased_inflation_idea
			add_idea = CHI_high_inflation_idea
		}
	}
	else_if = {
		limit = { has_idea = CHI_normal_inflation_idea }
		swap_ideas = {
			remove_idea = CHI_normal_inflation_idea
			add_idea = CHI_increased_inflation_idea
		}
	}
	else = {
		add_ideas = CHI_normal_inflation_idea
	}
}

CHI_inflation_down_effect = {

	if = {
		limit = { has_idea = CHI_hyperinflation_idea }
		swap_ideas = {
			remove_idea = CHI_hyperinflation_idea
			add_idea = CHI_high_inflation_idea
		}
	}
	else_if = {
		limit = { has_idea = CHI_high_inflation_idea }
		swap_ideas = {
			remove_idea = CHI_high_inflation_idea
			add_idea = CHI_increased_inflation_idea
		}
	}
	else_if = {
		limit = { has_idea = CHI_increased_inflation_idea }
		swap_ideas = {
			remove_idea = CHI_increased_inflation_idea
			add_idea = CHI_normal_inflation_idea
		}
	}
	else_if = {
		limit = { has_idea = CHI_normal_inflation_idea }
		remove_ideas = CHI_normal_inflation_idea
	}
}

CHI_unity_of_the_party_effect = {
	
	hidden_effect = {
		clamp_variable = { var = CHI_unity_of_the_party_var min = 0 max = 100 }
		
		set_temp_variable = { CHI_temp_1 = 80 }
		set_temp_variable = { CHI_unity_of_the_party_var_temp = CHI_unity_of_the_party_var }
		subtract_from_temp_variable = { CHI_temp_1 = CHI_unity_of_the_party_var_temp }
		divide_temp_variable = { CHI_temp_1 = -100 }
		set_variable = { CHI_stability_factor_var = CHI_temp_1 }
		set_variable = { CHI_war_support_factor_var = CHI_temp_1 }
		force_update_dynamic_modifier = yes
	}
}

CHI_movement_for_a_new_life_effect = {
	
	hidden_effect = {
		clamp_variable = { var = CHI_movement_for_a_new_life_var min = 0 max = 2000000 }
		if = {
			limit = {
				check_variable = { CHI_movement_for_a_new_life_var > 1999999 }
				NOT = { has_country_flag = NW_CHI_event_0_BLOCK_flag }
			}
			set_country_flag = NW_CHI_event_0_BLOCK_flag
			country_event = NW_CHI.0
		}
		else_if = {
			limit = {
				check_variable = { CHI_movement_for_a_new_life_var > 1749999 }
				NOT = { has_country_flag = NW_CHI_event_1_BLOCK_flag }
			}
			set_country_flag = NW_CHI_event_1_BLOCK_flag
			country_event = NW_CHI.1
		}
		else_if = {
			limit = {
				check_variable = { CHI_movement_for_a_new_life_var > 1499999 }
				NOT = { has_country_flag = NW_CHI_event_2_BLOCK_flag }
			}
			set_country_flag = NW_CHI_event_2_BLOCK_flag
			country_event = NW_CHI.2
		}
		else_if = {
			limit = {
				check_variable = { CHI_movement_for_a_new_life_var > 1199999 }
				NOT = { has_country_flag = NW_CHI_event_3_BLOCK_flag }
			}
			set_country_flag = NW_CHI_event_3_BLOCK_flag
			country_event = NW_CHI.3
		}
		else_if = {
			limit = {
				check_variable = { CHI_movement_for_a_new_life_var > 899999 }
				NOT = { has_country_flag = NW_CHI_event_4_BLOCK_flag }
			}
			set_country_flag = NW_CHI_event_4_BLOCK_flag
			country_event = NW_CHI.4
		}
		else_if = {
			limit = {
				check_variable = { CHI_movement_for_a_new_life_var > 599999 }
				NOT = { has_country_flag = NW_CHI_event_5_BLOCK_flag }
			}
			set_country_flag = NW_CHI_event_5_BLOCK_flag
			country_event = NW_CHI.5
		}
	}
}

### KAS ###

KAS_unity_of_the_nation_effect = {
	
	hidden_effect = {
		
		clamp_variable = { var = KAS_unity_of_the_nation min = 0 max = 100 }
		set_temp_variable = { KAS_unity_of_the_nation_temp = KAS_unity_of_the_nation }
		subtract_from_temp_variable = { KAS_unity_of_the_nation_temp = 100 }
		divide_temp_variable = { KAS_unity_of_the_nation_temp = 100 }
		set_variable = { KAS_unity_of_the_nation_modifier_var = KAS_unity_of_the_nation_temp }
		force_update_dynamic_modifier = yes
	}
}

KAS_restore_the_republic_from_the_ashes_effect = {
	
	hidden_effect = {
		
		clamp_variable = { var = KAS_influence_of_muhammad_amin_buhra min = 0 max = 100 }
		clamp_variable = { var = KAS_influence_of_masoud_sabri min = 0 max = 100 }
		clamp_variable = { var = KAS_influence_of_abdullah_niyaz min = 0 max = 100 }
	}
}

KAS_research_reform_effect = {
	
	if = {
		limit = { has_idea = KAS_towards_universal_education_idea }
		remove_ideas = KAS_towards_universal_education_idea
	}
	else_if = {
		limit = { has_idea = KAS_poorly_educated_population_idea }
		swap_ideas = {
			remove_idea = KAS_poorly_educated_population_idea
			add_idea = KAS_towards_universal_education_idea
		}
	}
	else = {
		swap_ideas = {
			remove_idea = KAS_illiterate_population_idea
			add_idea = KAS_poorly_educated_population_idea
		}
	}
}

KAS_legitimacy_of_the_crown_effect = {
	
	hidden_effect = {
		clamp_variable = { var = KAS_legitimacy_of_the_crown_var min = 0 max = 100 }
		if = {
			limit = { check_variable = { KAS_legitimacy_of_the_crown_var < 1 } }
			country_event = { id = NW_KAS.20 hours = 12 }
		}
	}
}

### MAN ###

MAN_set_puyi_idea = {	
	if = { # alt with trait
		limit = { 
			has_country_flag = MAN_manchurian_revolt_flag 
			MAN_aisin_gioro_puyi = { has_trait = the_god_emperor } # TODO а нужны ли эти проверки теперь?
		}
		add_ideas = MAN_aisin_gyoro_puyi_the_god_emperor_alt
	}
	else_if = { # alt
		limit = { 
			has_country_flag = MAN_manchurian_revolt_flag 
		}
		add_ideas = MAN_aisin_gyoro_puyi_alt
	}
	else_if = { # with trait
		limit = { 
			MAN_aisin_gioro_puyi = { has_trait = the_god_emperor } 
		}
		add_ideas = MAN_aisin_gyoro_puyi_the_god_emperor
	}
	else = {
		add_ideas = MAN_aisin_gyoro_puyi
	}
}
MAN_remove_puyi_idea = { # TODO а надо ли вообще?
	if = {
		limit = { has_idea = MAN_aisin_gyoro_puyi_the_god_emperor_alt }
		remove_ideas = MAN_aisin_gyoro_puyi_the_god_emperor_alt
	}
	else_if = {
		limit = { has_idea = MAN_aisin_gyoro_puyi_alt }
		remove_ideas = MAN_aisin_gyoro_puyi_alt
	}
	else_if = {
		limit = { has_idea = MAN_aisin_gyoro_puyi_the_god_emperor }
		remove_ideas = MAN_aisin_gyoro_puyi_the_god_emperor
	}
	else_if = {
		limit = { has_idea = MAN_aisin_gyoro_puyi }
		remove_ideas = MAN_aisin_gyoro_puyi
	}
}

# MGM
MGM_clear_psB_variables = {
	set_variable = { MAN_psB_command_power_gain_mult = 0 } 
	set_variable = { MAN_psB_production_speed_buildings_factor = 0 } 
	set_variable = { MAN_psB_conscription_factor = 0 } 
	set_variable = { MAN_psB_resistance_growth = 0 }
	set_variable = { MAN_psB_compliance_growth = 0 } 
	set_variable = { MAN_psB_political_power_factor = 0 } 
}
MGM_clear_psG_variables = {
	set_variable = { MAN_psG_defensive_war_stability_factor = 0 }
	set_variable = { MAN_psG_party_popularity_stability_factor = 0 } 
	set_variable = { MAN_psG_monthly_population = 0 } 
	set_variable = { MAN_psG_max_command_power_mult = 0 } 
	set_variable = { MAN_psG_agency_upgrade_time = 0 } 
	set_variable = { MAN_psG_civilian_factory_use = 0 } 
}
MGM_clear_psM_variables = {
	set_variable = { MAN_psM_army_core_attack_factor = 0 } 
	set_variable = { MAN_psM_army_core_defence_factor = 0 }	
	set_variable = { MAN_psM_army_morale = 0 } 
	set_variable = { MAN_psM_army_org = 0 } 
	set_variable = { MAN_psM_special_forces_cap = 0 } 
	set_variable = { MAN_psM_special_forces_training_time_factor = 0 } 
}

### XIK ###

XIK_ula_system_change_effect = {
	clamp_variable = { var = XIK_volume_traffic min = 5 }
	set_variable = { XIK_volume_traffic_plus = XIK_volume_traffic }
	set_variable = { XIK_volume_traffic_minus = XIK_volume_traffic }
	set_variable = { XIK_volume_traffic_quarter_minus = XIK_volume_traffic }
	set_variable = { XIK_volume_traffic_half_minus = XIK_volume_traffic }

	multiply_variable = { XIK_volume_traffic_plus = 0.01 }
	multiply_variable = { XIK_volume_traffic_minus = -0.01 }
	multiply_variable = { XIK_volume_traffic_half_minus = -0.005 }
	multiply_variable = { XIK_volume_traffic_quarter_minus = -0.0075 }

	force_update_dynamic_modifier = yes
}

### NEA ###

NEA_change_idea_by_variable_effect = {
	set_temp_variable = { NEA_popularity_of_the_fascist_revolution_temp_2_var = NEA_popularity_of_the_fascist_revolution_var }
	add_to_temp_variable = { NEA_popularity_of_the_fascist_revolution_temp_2_var = NEA_popularity_of_the_fascist_revolution_temp_var }
	
	if = {
		limit = {
			check_variable = { NEA_popularity_of_the_fascist_revolution_temp_2_var > 24 }
			check_variable = { NEA_popularity_of_the_fascist_revolution_temp_2_var < 51 }
			NOT = { has_idea = low_legitimacy }
		}
		add_ideas = low_legitimacy
	}
	else_if = {
		limit = {
			check_variable = { NEA_popularity_of_the_fascist_revolution_temp_2_var > 50 }
			check_variable = { NEA_popularity_of_the_fascist_revolution_temp_2_var < 76 }
			NOT = { has_idea = normal_legitimacy }
		}
		add_ideas = normal_legitimacy
	}
	else_if = {
		limit = {
			check_variable = { NEA_popularity_of_the_fascist_revolution_temp_2_var > 75 }
			NOT = { has_idea = good_legitimacy }
		}
		add_ideas = good_legitimacy
	}
	else_if = {
		limit = {
			check_variable = { NEA_popularity_of_the_fascist_revolution_temp_2_var < 25 }
			NOT = { has_idea = very_low_legitimacy }
		}
		add_ideas = very_low_legitimacy
	}
}

NEA_war_with_bureaucracy_dyn_effects = {
	set_temp_variable = { NEA_dissatisfaction_of_bureaucracy_2_temp_var = NEA_dissatisfaction_of_bureaucracy_temp_var }
	
	set_temp_variable = { NEA_dissatisfaction_of_bureaucracy_temp_2_var = NEA_dissatisfaction_of_bureaucracy_var }		
	multiply_temp_variable = { NEA_dissatisfaction_of_bureaucracy_temp_2_var = -1 }
	set_variable = { NEA_stability_factor_dyn_var = NEA_dissatisfaction_of_bureaucracy_temp_2_var }
	subtract_from_temp_variable = { NEA_dissatisfaction_of_bureaucracy_temp_2_var = NEA_dissatisfaction_of_bureaucracy_temp_var }
	set_temp_variable = { NEA_stability_tt_var = NEA_dissatisfaction_of_bureaucracy_temp_2_var }
	multiply_variable = { NEA_stability_factor_dyn_var = 0.01 }
	
	set_temp_variable = { NEA_dissatisfaction_of_bureaucracy_temp_3_var = NEA_dissatisfaction_of_bureaucracy_var }
	multiply_temp_variable = { NEA_dissatisfaction_of_bureaucracy_temp_3_var = -0.5 }
	set_variable = { NEA_political_power_factor_dyn_var = NEA_dissatisfaction_of_bureaucracy_temp_3_var }
	subtract_from_temp_variable = { NEA_dissatisfaction_of_bureaucracy_temp_3_var = NEA_dissatisfaction_of_bureaucracy_temp_var }
	set_temp_variable = { NEA_political_power_tt_var = NEA_dissatisfaction_of_bureaucracy_temp_3_var }
	multiply_variable = { NEA_political_power_factor_dyn_var = 0.01 }	
	
	set_temp_variable = { NEA_dissatisfaction_of_bureaucracy_temp_4_var = NEA_dissatisfaction_of_bureaucracy_2_temp_var }
	multiply_temp_variable = { NEA_dissatisfaction_of_bureaucracy_temp_4_var = 2 }
	add_to_variable = { china_integration_of_province_cost_var = NEA_dissatisfaction_of_bureaucracy_temp_4_var }
	
	add_to_variable = { china_integration_of_province_time_var = NEA_dissatisfaction_of_bureaucracy_2_temp_var }
	
	force_update_dynamic_modifier = yes
	
	custom_effect_tooltip = NEA_war_with_bureaucracy_dyn_effect_tt
}

### YCP ###

YCP_provisional_parliament_update = {
	set_variable = { YCP_num_of_deputies = 0 }
	add_to_variable = { YCP_num_of_deputies = YCP_ycp_deputies }
	add_to_variable = { YCP_num_of_deputies = YCP_ssp_deputies }
	add_to_variable = { YCP_num_of_deputies = YCP_kdu_deputies }
	add_to_variable = { YCP_num_of_deputies = YCP_federalist_deputies }
	add_to_variable = { YCP_num_of_deputies = YCP_other_parties_deputies }
	add_to_variable = { YCP_num_of_deputies = YCP_professional_groups_deputies }
	add_to_variable = { YCP_num_of_deputies = YCP_independent_deputies }
	
	set_variable = { YCP_ruling_coalition_deputies = 0 }
	if = {
		limit = { is_in_array = { YCP_coalition_array = 1 } } # МКП
		add_to_variable = { YCP_ruling_coalition_deputies = YCP_ycp_deputies }
	}
	if = {
		limit = { is_in_array = { YCP_coalition_array = 2 } } # ПГС
		add_to_variable = { YCP_ruling_coalition_deputies = YCP_ssp_deputies }
	}
	if = {
		limit = { is_in_array = { YCP_coalition_array = 3 } } # ДСГ
		add_to_variable = { YCP_ruling_coalition_deputies = YCP_kdu_deputies }
	}
	if = {
		limit = { is_in_array = { YCP_coalition_array = 4 } } # Федералисты
		add_to_variable = { YCP_ruling_coalition_deputies = YCP_federalist_deputies }
	}
	add_to_variable = { YCP_ruling_coalition_deputies = YCP_independent_support }
	add_to_variable = { YCP_ruling_coalition_deputies = YCP_professional_groups_support }
	add_to_variable = { YCP_ruling_coalition_deputies = YCP_other_parties_support }
	
	set_temp_variable = { temp_value = YCP_ruling_coalition_deputies }
	divide_temp_variable = { temp_value = YCP_num_of_deputies }
	multiply_temp_variable = { temp_value = -50 }
	add_to_temp_variable = { temp_value = 50 }
	multiply_temp_variable = { temp_value = -1 }
	log = "[GetDateText]: [THIS.GetName] ([THIS.GetTag]): YCP_provisional_parliament_update curr: [?YCP_pp_political_power_gain] new: [?temp_value]"
	
	divide_temp_variable = { temp_value = 100 }
	set_variable = { YCP_pp_political_power_factor = temp_value }
	force_update_dynamic_modifier = yes
}

YCP_integrate_province_state_effect = {
	if = {
		limit = { 
			state = var:china_capital_of_province
			ROOT = { has_completed_focus = YCP_update_bureaucratic_apparatus } 
		}
		YCP_update_bureaucratic_apparatus_effect = yes
	}
	if = {
		limit = { 
			state = var:china_capital_of_province
			ROOT = { has_completed_focus = YCP_abandoning_traditional_ties } 
		}
		YCP_abandoning_traditional_ties_effect = yes
	}
}
YCP_abandoning_traditional_ties_effect = {
	add_extra_state_shared_building_slots = 1
}
YCP_update_bureaucratic_apparatus_effect = {
	random_list = {
		1 = { 
			add_building_construction = {
				type = infrastructure
				level = 1 # TODO bug?
				instant_build = yes
			}
		}
		1 = {
			add_building_construction = {
				type = hospital
				level = 1
				instant_build = yes
			}
		}
		1 = {
			ROOT = {
				add_stability = 0.02
				add_political_power = 50 # 75
			}
		}
	}
}

### EHB-YSC ###

EHB_summon_YSC = {
	hidden_effect = {
		YSC = {
			transfer_state = 816
			add_state_core = 816 
			add_state_core = 609 
			set_politics = {
				ruling_party = monarchy
				elections_allowed = no
			}
			add_popularity = {
				ideology = monarchy
				popularity = 1.0
			}
			promote_character = YSC_chang_yin_tang
			division_template = {
				name = "Großyellowsand"
				priority = 1
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }	
				}
			}
			816 = {
				create_unit = {
					division = "name = \"Yellow sand 1\" division_template = \"Großyellowsand\" start_experience_factor = 0.1 start_equipment_factor = 0.75"
					owner = YSC
				}
				create_unit = {
					division = "name = \"Yellow sand 2\" division_template = \"Großyellowsand\" start_experience_factor = 0.1 start_equipment_factor = 0.75"
					owner = YSC
				}
				create_unit = {
					division = "name = \"Yellow sand 3\" division_template = \"Großyellowsand\" start_experience_factor = 0.1 start_equipment_factor = 0.65"
					owner = YSC
				}
				create_unit = {
					division = "name = \"Yellow sand 4\" division_template = \"Großyellowsand\" start_experience_factor = 0.1 start_equipment_factor = 0.65"
					owner = YSC
				}
				create_unit = {
					division = "name = \"Yellow sand 5\" division_template = \"Großyellowsand\" start_experience_factor = 0.1 start_equipment_factor = 0.55"
					owner = YSC
				}
			}
		}
		declare_war_on = {
			target = YSC
			type = civil_war
		}
		add_civil_war_target = YSC
	}
	if = {
		limit = { is_subject = yes }
		YSC = {
			set_variable = { china_intervention_timer_timeout = 90 }
			activate_targeted_decision = { decision = china_intervention_timer target = PREV.overlord }
		}
	}
}

### Mechanics

activate_china_integrate_province = {
	hidden_effect = {
		set_country_flag = chinese_integration_of_province_flag
		add_dynamic_modifier = { modifier = china_integration_of_province_dyn }
		china_integrate_province_set_cost_array = yes
	}
}

china_integrate_province_effect = {
	if = {
		limit = { original_tag = CHI }
		if = {
			limit = { has_completed_focus = CHI_support_reliance_on_landowners_and_financiers }
			add_stability = -0.05
		}
		if = {
			limit = { check_variable = { var = CHI_unity_of_the_party_var_for_integration value = 0 compare = not_equals } }
			add_to_variable = { CHI_unity_of_the_party_var = CHI_unity_of_the_party_var_for_integration tooltip = CHI_unity_of_the_party_var_tt }
			CHI_unity_of_the_party_effect = yes
		}
	}
	every_state = {
		limit = {
			#is_in_array = { global.chinese_state = THIS }
			check_variable = { china_capital_of_province = FROM.china_capital_of_province }
			NOT = { is_core_of = ROOT }
		}
		add_core_of = ROOT
		meta_effect = {
			text = { 
				NW_china_integrate_[PROVINCE]_state_effect = yes
			}
			PROVINCE = "[FROM.ChinaGetProvinceName]"
		}
	}
	custom_effect_tooltip = empty_line_tooltip # TODO убрать
	meta_effect = {
		text = { 
			set_country_flag = NW_china_integrate_[PROVINCE] 
			NW_china_integrate_[PROVINCE]_effect = yes
		}
		PROVINCE = "[FROM.ChinaGetProvinceName]"
	}
	hidden_effect = {
		if = {
			limit = { is_in_array = { chinese_integrate_province_state_map = FROM.FROM:china_capital_of_province.id } }
			for_each_loop = {
				array = FROM.FROM.china_capital_of_province:chinese_province
				value = state
				
				remove_from_array = { chinese_integrate_province_state_map = state }
			}
		}
	}
}

# README: сейчас здесь представлены не все провинции, по мере необходимости добавляйте (меняйте в названии провинцию)
NW_china_integrate_xinjiang_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_support_republic_of_five_nations }
			add_to_variable = { YCP_ycp_deputies = 3 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 3 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 2 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_other_parties_deputies = 4 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 4 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_xinjiang_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_outer_mongolia_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_support_republic_of_five_nations }
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_independent_deputies = 1 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_independent_deputies = 2 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_outer_mongolia_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_tibet_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_support_republic_of_five_nations }
			add_to_variable = { YCP_ycp_deputies = 2 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_independent_deputies = 4 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_independent_deputies = 6 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_tibet_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_suiyuan_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_support_republic_of_five_nations }
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_independent_deputies = 2 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_independent_deputies = 3 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_suiyuan_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_chahar_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_support_republic_of_five_nations }
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_independent_deputies = 2 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_independent_deputies = 3 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_chahar_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_ningxia_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_support_republic_of_five_nations }
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_independent_deputies = 1 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_independent_deputies = 2 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_ningxia_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_hebei_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_liberal_education has_completed_focus = YCP_synthesis_of_liberalism_and_confucianism }
			add_to_variable = { YCP_ycp_deputies = 25 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 12 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 19 tooltip = YCP_add_independent_deputies }
			add_to_variable = { YCP_ssp_deputies = 10 tooltip = YCP_add_ssp_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 17 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 19 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 20 tooltip = YCP_add_independent_deputies }
			add_to_variable = { YCP_ssp_deputies = 10 tooltip = YCP_add_ssp_deputies }
		}
	}
}
NW_china_integrate_hebei_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_yunnan_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_institute_of_democracy }
			add_to_variable = { YCP_ycp_deputies = 8 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 2 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 4 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 10 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 3 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 2 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 4 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 15 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_yunnan_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_jiangxi_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_democratic_breakaway_of_kuomintang }
			add_to_variable = { YCP_kdu_deputies = 14 tooltip = YCP_add_kdu_deputies }
			add_to_variable = { YCP_ycp_deputies = 3 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 3 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_ssp_deputies = 3 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_independent_deputies = 7 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 2 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 8 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_ssp_deputies = 4 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_independent_deputies = 16 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_jiangxi_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_jiangsu_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_democratic_breakaway_of_kuomintang }
			add_to_variable = { YCP_kdu_deputies = 20 tooltip = YCP_add_kdu_deputies }
			add_to_variable = { YCP_ycp_deputies = 10 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 5 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_ssp_deputies = 10 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 8 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 7 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 10 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 7 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_ssp_deputies = 10 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 13 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 20 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_jiangsu_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_hubei_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_democratic_breakaway_of_kuomintang }
			add_to_variable = { YCP_kdu_deputies = 25 tooltip = YCP_add_kdu_deputies }
			add_to_variable = { YCP_ycp_deputies = 7 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 4 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 5 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 9 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 15 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 8 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 5 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 22 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_hubei_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_shandong_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_use_scientific_methods }
			add_to_variable = { YCP_ycp_deputies = 46 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 12 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 10 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 5 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 5 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 29 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 16 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 13 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 7 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 13 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_shandong_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_henan_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_nationwide_welfare }
			add_to_variable = { YCP_ycp_deputies = 30 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 8 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_other_parties_deputies = 8 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 22 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 15 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 10 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_other_parties_deputies = 10 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 33 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_henan_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_shansi_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_nationwide_welfare }
			add_to_variable = { YCP_ycp_deputies = 12 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 2 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_other_parties_deputies = 8 tooltip = YCP_add_other_parties_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 8 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 2 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_other_parties_deputies = 12 tooltip = YCP_add_other_parties_deputies }
		}
	}
}
NW_china_integrate_shansi_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_shensi_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_nationwide_welfare }
			add_to_variable = { YCP_ycp_deputies = 7 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 2 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 9 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 3 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 2 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_other_parties_deputies = 3 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 10 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_shensi_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_hunan_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_written_constitutionalism }
			add_to_variable = { YCP_ycp_deputies = 30 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 6 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 8 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_federalist_deputies = 8 tooltip = YCP_add_federalist_deputies }
			add_to_variable = { YCP_other_parties_deputies = 2 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 4 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 20 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 6 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 11 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_federalist_deputies = 15 tooltip = YCP_add_federalist_deputies }
			add_to_variable = { YCP_independent_deputies = 6 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_hunan_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_sichuan_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_nationwide_government }
			add_to_variable = { YCP_ycp_deputies = 75 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 15 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 5 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_federalist_deputies = 6 tooltip = YCP_add_federalist_deputies }
			add_to_variable = { YCP_independent_deputies = 5 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 60 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 15 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 8 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_federalist_deputies = 10 tooltip = YCP_add_federalist_deputies }
			add_to_variable = { YCP_other_parties_deputies = 3 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 10 tooltip = YCP_add_independent_deputies }
		}
		
		custom_effect_tooltip = available_political_advisor
		if = {
			limit = { has_character = YCP_li_gongquan }
			show_ideas_tooltip = YCP_li_gongquan
		}
		if = {
			limit = { has_character = YCP_mu_zibing }
			show_ideas_tooltip = YCP_mu_zibing
		}
	}
}
NW_china_integrate_sichuan_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_sikan_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_nationwide_government }
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_independent_deputies = 1 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_independent_deputies = 2 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_sikan_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_fujian_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_nationwide_welfare }
			add_to_variable = { YCP_ycp_deputies = 8 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 4 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 8 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 3 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 1 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 5 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 6 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 9 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 3 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 1 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_fujian_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_anhui_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_nationwide_welfare }
			add_to_variable = { YCP_ycp_deputies = 16 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 9 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 11 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_independent_deputies = 10 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 10 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 9 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 15 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_independent_deputies = 12 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_anhui_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_zhejiang_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_democratic_breakaway_of_kuomintang }
			add_to_variable = { YCP_ycp_deputies = 15 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_kdu_deputies = 20 tooltip = YCP_add_kdu_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 5 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 11 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_independent_deputies = 2 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 18 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 6 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 5 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 13 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_zhejiang_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_shanghai_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_creating_middle_class }
			add_to_variable = { YCP_ycp_deputies = 4 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 2 tooltip = YCP_add_ssp_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 3 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 2 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_other_parties_deputies = 1 tooltip = YCP_add_other_parties_deputies }
		}
	}
}
NW_china_integrate_shanghai_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_hong_kong_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_progressive_income_tax }
			add_to_variable = { YCP_federalist_deputies = 3 tooltip = YCP_add_federalist_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 2 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_ssp_deputies = 1 tooltip = YCP_add_ssp_deputies }
		}
	}
}
NW_china_integrate_hong_kong_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_qinghai_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_support_republic_of_five_nations }
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_independent_deputies = 2 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_independent_deputies = 3 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_qinghai_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_gansu_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_replace_disorganization_with_discipline }
			add_to_variable = { YCP_ycp_deputies = 4 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 1 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 6 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 1 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 9 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_gansu_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_guizhou_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_take_benefits_of_baojia_system }
			add_to_variable = { YCP_ycp_deputies = 10 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 2 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 6 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 6 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 1 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 2 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_independent_deputies = 9 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_guizhou_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_guangxi_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_democratic_breakaway_of_kuomintang }
			add_to_variable = { YCP_ycp_deputies = 12 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 3 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_kdu_deputies = 15 tooltip = YCP_add_kdu_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 14 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 3 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 5 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_independent_deputies = 8 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_guangxi_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_guangdong_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_democratic_breakaway_of_kuomintang }
			add_to_variable = { YCP_ycp_deputies = 20 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 10 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_kdu_deputies = 40 tooltip = YCP_add_kdu_deputies }
		}
		else = {
			add_to_variable = { YCP_ycp_deputies = 20 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 10 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_ssp_deputies = 10 tooltip = YCP_add_ssp_deputies }
			add_to_variable = { YCP_federalist_deputies = 8 tooltip = YCP_add_federalist_deputies }
			add_to_variable = { YCP_other_parties_deputies = 12 tooltip = YCP_add_other_parties_deputies }
			add_to_variable = { YCP_independent_deputies = 10 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_guangdong_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_taiwan_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_rule_of_law }
			add_to_variable = { YCP_ycp_deputies = 5 tooltip = YCP_add_ycp_deputies }
			add_to_variable = { YCP_professional_groups_deputies = 1 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_independent_deputies = 3 tooltip = YCP_add_independent_deputies }
		}
		else = {
			add_to_variable = { YCP_professional_groups_deputies = 1 tooltip = YCP_add_professional_groups_deputies }
			add_to_variable = { YCP_federalist_deputies = 5 tooltip = YCP_add_federalist_deputies }
			add_to_variable = { YCP_independent_deputies = 3 tooltip = YCP_add_independent_deputies }
		}
	}
}
NW_china_integrate_taiwan_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_guangzhouwan_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_protectionist_tariffs }
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
		}
		else = {
			add_to_variable = { YCP_ssp_deputies = 1 tooltip = YCP_add_ssp_deputies }
		}
	}
}
NW_china_integrate_guangzhouwan_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_macau_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_protectionist_tariffs }
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
		}
		else = {
			add_to_variable = { YCP_ssp_deputies = 1 tooltip = YCP_add_ssp_deputies }
		}
	}
}
NW_china_integrate_macau_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

NW_china_integrate_dalian_effect = {
	if = {
		limit = { original_tag = YCP }
		if = {
			limit = { has_completed_focus = YCP_protectionist_tariffs }
			add_to_variable = { YCP_ycp_deputies = 1 tooltip = YCP_add_ycp_deputies }
		}
		else = {
			add_to_variable = { YCP_ssp_deputies = 1 tooltip = YCP_add_ssp_deputies }
		}
	}
}
NW_china_integrate_dalian_state_effect = {
	if = {
		limit = { ROOT = { original_tag = YCP } }
		YCP_integrate_province_state_effect = yes
	}
}

china_integrate_province_set_cost_array = {
	add_to_array = { china_integrate_province_cost_array = 250 } # xinjiang ^0
	add_to_array = { china_integrate_province_cost_array = 25 } # qinghai ^1
	add_to_array = { china_integrate_province_cost_array = 25 } # gansu ^2
	add_to_array = { china_integrate_province_cost_array = 25 } # ningxia ^3
	add_to_array = { china_integrate_province_cost_array = 50 } # shensi ^4
	add_to_array = { china_integrate_province_cost_array = 50 } # shansi ^5
	add_to_array = { china_integrate_province_cost_array = 100 } # suiyuan ^6
	add_to_array = { china_integrate_province_cost_array = 100 } # chahar ^7
	add_to_array = { china_integrate_province_cost_array = 75 } # hebei ^8
	add_to_array = { china_integrate_province_cost_array = 75 } # shandong ^9
	add_to_array = { china_integrate_province_cost_array = 50 } # henan ^10
	add_to_array = { china_integrate_province_cost_array = 100 } # jiangsu ^11
	add_to_array = { china_integrate_province_cost_array = 50 } # anhui ^12
	add_to_array = { china_integrate_province_cost_array = 50 } # zhejiang ^13
	add_to_array = { china_integrate_province_cost_array = 75 } # fujian ^14
	add_to_array = { china_integrate_province_cost_array = 75 } # jiangxi ^15
	add_to_array = { china_integrate_province_cost_array = 50 } # hubei ^16
	add_to_array = { china_integrate_province_cost_array = 50 } # hunan ^17
	add_to_array = { china_integrate_province_cost_array = 50 } # guizhou ^18
	add_to_array = { china_integrate_province_cost_array = 100 } # guangxi ^19
	add_to_array = { china_integrate_province_cost_array = 125 } # guangdong ^20
	add_to_array = { china_integrate_province_cost_array = 125 } # yunnan ^21
	add_to_array = { china_integrate_province_cost_array = 125 } # sichuan ^22
	add_to_array = { china_integrate_province_cost_array = 100 } # sikan ^23
	add_to_array = { china_integrate_province_cost_array = 50 } # zhehe ^24
	add_to_array = { china_integrate_province_cost_array = 50 } # girin ^25
	add_to_array = { china_integrate_province_cost_array = 50 } # heilongjiang ^26
	add_to_array = { china_integrate_province_cost_array = 50 } # fengtian ^27
	add_to_array = { china_integrate_province_cost_array = 200 } # tibet ^28
	add_to_array = { china_integrate_province_cost_array = 250 } # outer_mongolia ^29
	add_to_array = { china_integrate_province_cost_array = 150 } # taiwan ^30
	add_to_array = { china_integrate_province_cost_array = 150 } # hong_kong ^31
	add_to_array = { china_integrate_province_cost_array = 25 } # guangzhouwan ^32
	add_to_array = { china_integrate_province_cost_array = 25 } # macau ^33
	add_to_array = { china_integrate_province_cost_array = 25 } # dalian ^34
	add_to_array = { china_integrate_province_cost_array = 50 } # shanghai ^35
	
	resize_array = { china_integrate_province_time_array = 36 } # индексация аналогична
}

china_set_province_arrays = {
	
	# xinjiang ^0
	every_state = {
		limit = { OR = { state = 287 state = 617 state = 618 state = 619 state = 759 state = 760 state = 1047 state = 1120 state = 1121 state = 1122 state = 1046 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 617 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 287 state = 617 state = 618 state = 619 state = 759 state = 760 state = 1047 state = 1120 state = 1121 state = 1122 state = 1046 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 0 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# qinghai ^1
	every_state = {
		limit = { OR = { state = 755 state = 754 state = 1166 state = 1177 state = 604 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 754 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 755 state = 754 state = 1166 state = 1177 state = 604 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 1 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# gansu ^2
	every_state = {
		limit = { OR = { state = 756 state = 1126 state = 1125 state = 283 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 283 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 756 state = 1126 state = 1125 state = 283 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 2 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# ningxia ^3
	every_state = {
		limit = { OR = { state = 1133 state = 616 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 616 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 1133 state = 616 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 3 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# shensi ^4
	every_state = {
		limit = { OR = { state = 744 state = 622 state = 1123 state = 1124 state = 1127 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 744 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 744 state = 622 state = 1123 state = 1124 state = 1127 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 4 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# shansi ^5
	every_state = {
		limit = { OR = { state = 1154 state = 1060 state = 615 state = 1134 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 615 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 1154 state = 1060 state = 615 state = 1134 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 5 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# suiyuan ^6
	every_state = {
		limit = { OR = { state = 621 state = 746 state = 1161 state = 1136 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 621 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 621 state = 746 state = 1161 state = 1136 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 6 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# chahar ^7
	every_state = {
		limit = { OR = { state = 611 state = 612 state = 1132 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 611 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 611 state = 612 state = 1132 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 7 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# hebei ^8
	every_state = {
		limit = { OR = { state = 608 state = 609 state = 614 state = 816 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 608 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 608 state = 609 state = 614 state = 816 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 8 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# shandong ^9
	every_state = {
		limit = { OR = { state = 597 state = 743 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 597 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 597 state = 743 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 9 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# henan ^10
	every_state = {
		limit = { OR = { state = 607 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 607 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 607 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 10 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# jiangsu ^11
	every_state = {
		limit = { OR = { state = 598 state = 613 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 598 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 598 state = 613 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 11 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# anhui ^12
	every_state = {
		limit = { OR = { state = 749 state = 606 state = 1192 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 606 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 749 state = 606 state = 1192 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 12 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# zhejiang ^13
	every_state = {
		limit = { OR = { state = 596 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 596 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 596 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 13 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# fujian ^14
	every_state = {
		limit = { OR = { state = 595 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 595 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 595 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 14 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# jiangxi ^15
	every_state = {
		limit = { OR = { state = 600 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 600 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 600 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 15 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# hubei ^16
	every_state = {
		limit = { OR = { state = 620 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 620 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 620 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 16 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# hunan ^17
	every_state = {
		limit = { OR = { state = 602 state = 750 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 602 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 602 state = 750 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 17 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# guizhou ^18
	every_state = {
		limit = { OR = { state = 748 state = 603 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 603 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 748 state = 603 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 18 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# guangxi ^19
	every_state = {
		limit = { OR = { state = 599 state = 594 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 599 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 599 state = 594 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 19 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# guangdong ^20
	every_state = {
		limit = { OR = { state = 591 state = 592 state = 593 state = 1129 state = 1130 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 592 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 591 state = 592 state = 593 state = 1129 state = 1130 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 20 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# yunnan ^21
	every_state = {
		limit = { OR = { state = 325 state = 747 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 325 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 325 state = 747 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 21 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# sichuan ^22
	every_state = {
		limit = { OR = { state = 605 state = 852 state = 1131 state = 753 state = 1182 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 605 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 605 state = 852 state = 1131 state = 753 state = 1182 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 22 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# sikan ^23
	every_state = {
		limit = { OR = { state = 751 state = 752 state = 601 state = 994 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 751 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 751 state = 752 state = 601 state = 994 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 23 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# zhehe ^24
	every_state = {
		limit = { OR = { state = 610 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 610 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 610 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 24 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# girin ^25
	every_state = {
		limit = { OR = { state = 328 state = 717 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 328 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 328 state = 717 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 25 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# heilongjiang ^26
	every_state = {
		limit = { OR = { state = 714 state = 761 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 714 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 714 state = 761 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 26 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# fengtian ^27
	every_state = {
		limit = { OR = { state = 715 state = 716 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 716 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 715 state = 716 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 27 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# tibet ^28
	every_state = {
		limit = { OR = { state = 757 state = 758 state = 322 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 757 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 757 state = 758 state = 322 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 28 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# outer_mongolia ^29
	every_state = {
		limit = { OR = { state = 953 state = 954 state = 955 state = 957 state = 330 state = 1135 state = 956 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 957 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 953 state = 954 state = 955 state = 957 state = 330 state = 1135 state = 956 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 29 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# taiwan ^30
	every_state = {
		limit = { OR = { state = 524 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 524 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 524 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 30 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# hong_kong ^31
	every_state = {
		limit = { OR = { state = 326 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 326 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
			limit = { OR = { state = 326 } }
			add_to_array = { PREV.chinese_province = This.id }
		}
			set_variable = { china_capital_of_province_index = 31 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# guangzhouwan ^32
	every_state = {
		limit = { OR = { state = 728 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 728 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 728 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 32 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# macau ^33
	every_state = {
		limit = { OR = { state = 729 state = 1162 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 729 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 729 state = 1162 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 33 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# dalian ^34
	every_state = {
		limit = { OR = { state = 745 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 745 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 745 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 34 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	# shanghai ^35
	every_state = {
		limit = { OR = { state = 1145 state = 1031 state = 1117 } }
		add_to_array = { global.chinese_state = This.id }
		set_variable = { china_capital_of_province = 1145 }
		if = {
			limit = { state = var:china_capital_of_province }
			every_state = {
				limit = { OR = { state = 1145 state = 1031 state = 1117 } }
				add_to_array = { PREV.chinese_province = This.id }
			}
			set_variable = { china_capital_of_province_index = 35 } # обязателен для столиц провинций
		}
		log = "[This.GetName] ([This.GetID]): ADD IN ARRAY global.chinese_state"
	}
	
	for_each_loop = {
		array = global.chinese_state
		add_to_variable = { global.num_chinese_states = 1 }
	}
	
	#log = "[This.GetName] ([This.GetID]): NOT ADD IN ARRAY !!!"
}

# устанавливает бонус к атаке против коммунистического противника
set_attack_against_communists_bonus = { # во временной перемнной enemy должна содержаться коммунистическая страна, с которой началась война
	set_temp_variable = { bonus = NW_attack_against_communists }
	while_loop_effect = { # 10%
		limit = { check_variable = { var = bonus value = 0.1 } }
		meta_effect = {
			text = {
				add_relation_modifier = {
					target = [ENEMY]
					modifier = NW_attack_against_communists_10_percent
				}
			}
			ENEMY = "[?enemy.GetTag]"
		}
		subtract_from_temp_variable = { bonus = 0.1 }
		add_to_temp_variable = { count_10 = 1 } # for loc
	}
	while_loop_effect = { # 5%
		limit = { check_variable = { var = bonus value = 0.05 } }
		meta_effect = {
			text = {
				add_relation_modifier = {
					target = [ENEMY]
					modifier = NW_attack_against_communists_5_percent
				}
			}
			ENEMY = "[?enemy.GetTag]"
		}
		subtract_from_temp_variable = { bonus = 0.05 }
		add_to_temp_variable = { count_5 = 1 } # for loc
	}
	while_loop_effect = { # 1%
		limit = { check_variable = { var = bonus value = 0.01 } }
		meta_effect = {
			text = {
				add_relation_modifier = {
					target = [ENEMY]
					modifier = NW_attack_against_communists_1_percent
				}
			}
			ENEMY = "[?enemy.GetTag]"
		}
		subtract_from_temp_variable = { bonus = 0.01 }
		add_to_temp_variable = { count_1 = 1 } # for loc
	}
	log = "[GetDateText]: [ROOT.GetName] ([ROOT.GetTag]): set_attack_against_communists_bonus | enemy: [?enemy.GetName] [?enemy.GetTag], count10: [?count_10], count5: [?count_5], count1: [?count_1] ([?NW_attack_against_communists|%]) debug: [?bonus] = 0"
}